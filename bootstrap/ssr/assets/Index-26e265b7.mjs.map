{"version":3,"file":"Index-26e265b7.mjs","sources":["../../../resources/js/Pages/Public/Home/Index.vue"],"sourcesContent":["<script setup>\nimport ProductsList from './ProductsList.vue';\nimport MasterLayout from '@/Layouts/MasterLayout.vue'\nimport MainBanners from './../Components/Banners.vue';\nimport Categories from './../Components/Categories.vue';\nimport Head from \"@/Pages/Public/Components/Head.vue\";\n\ndefineOptions({layout: MasterLayout})\n\nimport {isLoading} from \"@/Pages/Public/load\";\nimport {defineAsyncComponent, onMounted, ref} from \"vue\";\n\nconst Content = defineAsyncComponent(() => import('../Components/Content.vue'));\nconst Advantages = defineAsyncComponent(() => import('../Components/Advantages.vue'));\nconst AllReviewsCarousel = defineAsyncComponent(() => import('../Components/AllReviewsCarousel.vue'));\nconst FaqComponent = defineAsyncComponent(() => import('../Components/FaqComponent.vue'));\nconst Support = defineAsyncComponent(() => import('../Components/Support.vue'));\n\nconst props = defineProps([\n    'lang',\n    'categories',\n    'options',\n    'banners',\n    'bestSellingProducts',\n    'newProducts',\n    'allProducts',\n    'pages',\n    'reviews',\n    'text',\n    'faqs',\n    'advantages',\n]);\n\nconst meta = {\n    title: props.lang === 'ua' ? props.options.meta_title_ua : props.options.meta_title_ru,\n    description: props.lang === 'ua' ? props.options.meta_description_ua : props.options.meta_description_ru,\n}\n\nconst stateNewProducts = ref({\n    data: [],\n    isLoadMore: false,\n    isShowLoadMore: false,\n    currentPage: 1,\n    endpoint: '/api/v1/product/new-products?page='\n});\n\nconst stateAllProducts = ref({\n    data: [],\n    isLoadMore: false,\n    isShowLoadMore: false,\n    currentPage: 1,\n    endpoint: '/api/v1/product?page='\n});\n\nconst stateBestSellingProducts = ref({\n    data: [],\n    isLoadMore: false,\n    isShowLoadMore: false,\n    currentPage: 1,\n    endpoint: '/api/v1/product/best-selling?page='\n});\n\nonMounted(() => {\n    stateBestSellingProducts.value.data = props.bestSellingProducts.data;\n    stateNewProducts.value.data = props.newProducts.data;\n    stateAllProducts.value.data = props.allProducts.data;\n\n    if (props.bestSellingProducts.current_page !== props.bestSellingProducts.per_page) {\n        setShowLoadMore(stateBestSellingProducts.value);\n    }\n    if (props.newProducts.current_page !== props.newProducts.per_page) {\n        setShowLoadMore(stateNewProducts.value);\n    }\n    if (props.allProducts.current_page !== props.allProducts.per_page) {\n        setShowLoadMore(stateAllProducts.value);\n    }\n})\n\nconst setShowLoadMore = (product) => {\n    product.isShowLoadMore = true;\n}\n\nconst fetchAllProducts = async () => {\n    stateAllProducts.value.isLoadMore = true;\n    await axios.get(stateAllProducts.value.endpoint + (stateAllProducts.value.currentPage + 1))\n        .then(({data}) => onSuccessFetch(stateAllProducts.value, data))\n        .catch((response) => console.error(response));\n}\n\nconst fetchBestSellingProducts = async () => {\n    stateBestSellingProducts.value.isLoadMore = true;\n    await axios.get(stateBestSellingProducts.value.endpoint + (stateBestSellingProducts.value.currentPage + 1))\n        .then(({data}) => onSuccessFetch(stateBestSellingProducts.value, data))\n        .catch((response) => console.error(response));\n}\n\nconst fetchNewProducts = async () => {\n    await axios.get(stateNewProducts.value.endpoint + (stateNewProducts.value.currentPage + 1))\n        .then(({data}) => onSuccessFetch(stateNewProducts.value, data))\n        .catch((response) => console.error(response));\n}\n\nconst onSuccessFetch = (variable, data) => {\n    variable.data = variable.data.concat(data.result.data);\n    variable.total = data.result.total;\n    variable.currentPage = data.result.current_page;\n    variable.isShowLoadMore = (data.result.to !== data.result.total);\n    variable.isLoadMore = false;\n}\n</script>\n\n<template>\n    <Head :title=\"meta.title\" :description=\"meta.description\"/>\n    <div class=\"grid grid-cols-1 gap-4\">\n        <MainBanners v-if=\"banners.length\" :data=\"banners\" :lang=\"lang\"/>\n\n        <Categories v-if=\"categories.length\" :data=\"categories\" :lang=\"lang\"/>\n\n        <ProductsList :slider=\"true\"\n                      :lang=\"lang\"\n                      :data=\"stateBestSellingProducts.data\"\n                      :isLoadMore=\"stateBestSellingProducts.isLoadMore\"\n                      :isShowLoadMore=\"stateBestSellingProducts.isShowLoadMore\"\n                      @fetch=\"fetchBestSellingProducts\"\n                      heading=\"Найпопулярніші\"\n        />\n\n        <ProductsList :slider=\"true\"\n                      :lang=\"lang\"\n                      :data=\"stateNewProducts.data\"\n                      :isLoadMore=\"stateNewProducts.isLoadMore\"\n                      :isShowLoadMore=\"stateNewProducts.isShowLoadMore\"\n                      @fetch=\"fetchNewProducts\"\n                      heading=\"Останні надходження\"\n        />\n\n        <ProductsList :slider=\"true\"\n                      :lang=\"lang\"\n                      :data=\"stateAllProducts.data\"\n                      :isLoadMore=\"stateAllProducts.isLoadMore\"\n                      :isShowLoadMore=\"stateAllProducts.isShowLoadMore\"\n                      @fetch=\"fetchAllProducts\"\n                      heading=\"Усі товари\"\n        />\n\n        <Advantages v-if=\"advantages.length\" :lang=\"lang\" :data=\"advantages\"/>\n\n        <AllReviewsCarousel v-if=\"reviews.length\" :data=\"reviews\"/>\n\n        <Content v-if=\"options.text_home_page_ua || options.text_home_page_ru\"\n                 :data=\"lang === 'ua' ? options.text_home_page_ua : options.text_home_page_ru\"\n        />\n\n        <FaqComponent v-if=\"faqs.length\" :lang=\"lang\" :data=\"faqs\"/>\n\n        <Support v-if=\"!isLoading\"/>\n    </div>\n</template>\n"],"names":["__MACROS_defineComponent","MasterLayout"],"mappings":"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"}
{"version":3,"file":"ImagesSelectModal-eeb13b5f.mjs","sources":["../../../resources/js/Components/ImagesSelectModal.vue"],"sourcesContent":["<script setup>\nimport {onMounted, ref} from \"vue\";\nimport Modal from '@/Components/Modal.vue';\nimport Paginate from '@/Components/Paginate.vue';\nimport Button from '@/Components/Button.vue';\nimport Loader from '@/Components/Loader.vue';\nimport UploadImagesModal from '@/Components/UploadImagesModal.vue';\n\nconst props = defineProps({\n    multiple: {\n        type: Boolean,\n        default: false\n    }\n})\n\ndefineEmits([\n    'closeModal',\n    'submitForm'\n]);\nconst state = ref({\n    images: [],\n    isLoading: false,\n    isImagesUploadModal: false,\n    selected: [],\n    currentPage: 1\n})\n\nonMounted(() => {\n    fetch();\n})\n\nfunction onUploadImages() {\n    modalUploadImagesFunction();\n    fetch();\n}\n\nfunction modalUploadImagesFunction() {\n    state.value.isImagesUploadModal = !state.value.isImagesUploadModal;\n}\n\nfunction fetch(page) {\n    state.value.isLoading = true;\n    if (page) {\n        state.value.currentPage = page;\n    }\n    axios.get(route('api.images.index', {'page': state.value.currentPage}))\n        .then(({data}) => {\n            state.value.images = data.result\n            state.value.isLoading = false;\n        })\n        .catch((response) => {\n            console.log(response);\n            state.value.isLoading = false;\n        })\n}\n</script>\n\n<template>\n    <Modal @closeModal=\"$emit('closeModal')\"\n           submit-button-text=\"Зберегти\"\n           cancel-button-text=\"Відмінити\"\n           @submitForm=\"$emit('submitForm', state.selected)\"\n           @clickCancel=\"$emit('closeModal')\"\n           size=\"extralarge\"\n    >\n        <template #title>Вибір зображення</template>\n        <template #content>\n            <Button type=\"btn\" @click.prevent=\"modalUploadImagesFunction\">\n                Завантажити\n            </Button>\n            <Loader v-if=\"state.isLoading\"/>\n            <div v-else>\n                <div class=\"grid grid-cols-2 md:grid-cols-5 mt-3\">\n                    <div class=\"block m-1\" v-for=\"image in state.images.data\">\n                        <input :type=\"multiple ? 'checkbox' : 'radio'\"\n                               name=\"images\"\n                               v-model=\"state.selected\"\n                               :value=\"image\"\n                               :id=\"image.id\"\n                               class=\"hidden peer\"\n                        >\n                        <label\n                            :for=\"image.id\"\n                            class=\"\n                                inline-flex\n                                justify-between\n                                items-center\n                                p-5\n                                w-full\n                                text-gray-500\n                                bg-white\n                                rounded-lg\n                                border-2\n                                border-gray-200\n                                cursor-pointer\n                                dark:hover:text-gray-300\n                                dark:border-gray-700\n                                peer-checked:border-blue-600\n                                hover:text-gray-600\n                                dark:peer-checked:text-gray-300\n                                peer-checked:text-gray-600\n                                hover:bg-gray-50\n                                dark:text-gray-400\n                                dark:bg-gray-800\n                                dark:hover:bg-gray-900\n                            \"\n                        >\n                            <picture>\n                                <source :srcset=\"route('images.350',image.webp_src)\" type=\"image/webp\">\n                                <img :src=\"route('images.350',image.src)\"\n                                     class=\"rounded-lg mx-auto  h-full object-cover\"\n                                     alt=\"\"\n                                >\n                            </picture>\n                        </label>\n                    </div>\n                </div>\n                <div class=\"row flex justify-center my-5\" v-if=\"state.images\">\n                    <Paginate\n                        :click-handler=\"fetch\"\n                        :pagination=\"state.images\"\n                        v-model=\"state.currentPage\"\n                    />\n                </div>\n            </div>\n\n            <UploadImagesModal\n                v-if=\"state.isImagesUploadModal\"\n                @closeModal=\"modalUploadImagesFunction\"\n                @onUpload=\"onUploadImages\"\n            />\n        </template>\n    </Modal>\n</template>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAmBA,UAAM,QAAQ,IAAI;AAAA,MACd,QAAQ,CAAE;AAAA,MACV,WAAW;AAAA,MACX,qBAAqB;AAAA,MACrB,UAAU,CAAE;AAAA,MACZ,aAAa;AAAA,IACjB,CAAC;AAED,cAAU,MAAM;AACZ;IACJ,CAAC;AAED,aAAS,iBAAiB;AACtB;AACA;IACJ;AAEA,aAAS,4BAA4B;AACjC,YAAM,MAAM,sBAAsB,CAAC,MAAM,MAAM;AAAA,IACnD;AAEA,aAAS,MAAM,MAAM;AACjB,YAAM,MAAM,YAAY;AACxB,UAAI,MAAM;AACN,cAAM,MAAM,cAAc;AAAA,MAC7B;AACD,YAAM,IAAI,MAAM,oBAAoB,EAAC,QAAQ,MAAM,MAAM,YAAW,CAAC,CAAC,EACjE,KAAK,CAAC,EAAC,KAAI,MAAM;AACd,cAAM,MAAM,SAAS,KAAK;AAC1B,cAAM,MAAM,YAAY;AAAA,MACpC,CAAS,EACA,MAAM,CAAC,aAAa;AACjB,gBAAQ,IAAI,QAAQ;AACpB,cAAM,MAAM,YAAY;AAAA,MACpC,CAAS;AAAA,IACT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
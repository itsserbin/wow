{"version":3,"file":"Index-30662ff4.mjs","sources":["../../../resources/js/Pages/Admin/Statistics/Refunds/Index.vue"],"sourcesContent":["<script setup>\nimport {onMounted, inject, ref, computed} from \"vue\";\nimport {endOfMonth, startOfMonth} from \"date-fns\";\n\nimport Loader from '@/Components/Loader.vue';\nimport Card from '@/Components/Card.vue';\nimport Paginate from '@/Components/Paginate.vue';\nimport Table from '@/Pages/Admin/Statistics/Refunds/Table.vue';\nimport StatisticLayout from '@/Pages/Admin/Statistics/StatisticLayout.vue'\nimport DatepickerComponent from '@/Pages/Admin/Statistics/Datepicker.vue'\n\nconst can = inject('$can');\n\nconst state = ref({\n    data: [],\n    indicators: [],\n    chart: null,\n    isLoading: true,\n});\n\nconst params = ref({\n    date: [],\n    currentPage: 1,\n})\n\nconst dateRange = computed(() => {\n    if (params.value.date.length === 2) {\n        return {\n            date_start: params.value.date[0].toLocaleDateString(),\n            date_end: params.value.date[1].toLocaleDateString()\n        }\n    }\n});\n\nconst last = computed(() => params.value.last);\n\nconst getParams = computed(() => ({\n    ...dateRange.value,\n    last: last.value,\n    page: params.value.currentPage\n}));\n\nonMounted(() => {\n    params.value.date[0] = startOfMonth(new Date());\n    params.value.date[1] = endOfMonth(new Date());\n\n    fetch();\n})\n\nconst paginate = (page) => {\n    if (page) {\n        params.value.currentPage = page;\n    }\n    fetch();\n}\n\nconst fetch = async () => {\n    state.value.isLoading = true;\n    axios.get(route('api.statistics.refunds.index', getParams.value))\n        .then(({data}) => {\n            state.value.data = data.result;\n            state.value.isLoading = false;\n        })\n        .catch((response) => {\n            console.log(response);\n            state.value.isLoading = false;\n        });\n}\n</script>\n\n<template>\n    <StatisticLayout title=\"Повернення\">\n        <template #header>\n            Повернення\n        </template>\n\n        <Loader v-if=\"state.isLoading\"/>\n        <div v-if=\"!state.isLoading && can('show-bookkeeping-refunds')\" class=\"grid grid-cols-1 gap-4\">\n            <DatepickerComponent v-model=\"params.date\"\n                                 @update:modelValue=\"fetch\"\n            />\n\n            <div class=\"grid grid-cols-2 md:grid-cols-4\">\n                <Card v-for=\"(item,i) in state.indicatord\"\n                      class=\"text-center\"\n                      :title=\"i\"\n                      :description=\"$filters.formatMoney(item)\"\n                >\n                </Card>\n            </div>\n\n            <Table :data=\"state.data.data\"/>\n\n            <div class=\"text-center\">\n                <Paginate :pagination=\"state.data\"\n                          :click-handler=\"fetch\"\n                          v-model=\"params.currentPage\"\n                />\n            </div>\n        </div>\n    </StatisticLayout>\n</template>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAWA,UAAM,MAAM,OAAO,MAAM;AAEzB,UAAM,QAAQ,IAAI;AAAA,MACd,MAAM,CAAE;AAAA,MACR,YAAY,CAAE;AAAA,MACd,OAAO;AAAA,MACP,WAAW;AAAA,IACf,CAAC;AAED,UAAM,SAAS,IAAI;AAAA,MACf,MAAM,CAAE;AAAA,MACR,aAAa;AAAA,IACjB,CAAC;AAED,UAAM,YAAY,SAAS,MAAM;AAC7B,UAAI,OAAO,MAAM,KAAK,WAAW,GAAG;AAChC,eAAO;AAAA,UACH,YAAY,OAAO,MAAM,KAAK,CAAC,EAAE,mBAAoB;AAAA,UACrD,UAAU,OAAO,MAAM,KAAK,CAAC,EAAE,mBAAoB;AAAA,QACtD;AAAA,MACJ;AAAA,IACL,CAAC;AAED,UAAM,OAAO,SAAS,MAAM,OAAO,MAAM,IAAI;AAE7C,UAAM,YAAY,SAAS,OAAO;AAAA,MAC9B,GAAG,UAAU;AAAA,MACb,MAAM,KAAK;AAAA,MACX,MAAM,OAAO,MAAM;AAAA,IACvB,EAAE;AAEF,cAAU,MAAM;AACZ,aAAO,MAAM,KAAK,CAAC,IAAI,aAAa,oBAAI,KAAI,CAAE;AAC9C,aAAO,MAAM,KAAK,CAAC,IAAI,WAAW,oBAAI,KAAI,CAAE;AAE5C;IACJ,CAAC;AASD,UAAM,QAAQ,YAAY;AACtB,YAAM,MAAM,YAAY;AACxB,YAAM,IAAI,MAAM,gCAAgC,UAAU,KAAK,CAAC,EAC3D,KAAK,CAAC,EAAC,KAAI,MAAM;AACd,cAAM,MAAM,OAAO,KAAK;AACxB,cAAM,MAAM,YAAY;AAAA,MACpC,CAAS,EACA,MAAM,CAAC,aAAa;AACjB,gBAAQ,IAAI,QAAQ;AACpB,cAAM,MAAM,YAAY;AAAA,MACpC,CAAS;AAAA,IACT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
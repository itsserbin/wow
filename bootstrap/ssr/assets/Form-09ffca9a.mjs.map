{"version":3,"file":"Form-09ffca9a.mjs","sources":["../../../resources/js/Repositories/CategoriesRepository.js","../../../resources/js/Pages/Admin/Content/Categories/Form.vue"],"sourcesContent":["export default {\n    async list() {\n        try {\n            const response = await axios.get(route('api.categories.list'));\n            return response.data;\n        } catch (error) {\n            throw new Error(error.response.data);\n        }\n    },\n    async fetch(params) {\n        try {\n            const response = await axios.get(route('api.categories.index', params));\n            return response.data;\n        } catch (error) {\n            throw new Error(error.response.data.message);\n        }\n    },\n    async update(item) {\n        try {\n            const response = await axios.put(route('api.categories.update', item.id), item);\n            return response.data;\n        } catch (error) {\n            return error.response.data;\n        }\n    },\n    async destroy(id) {\n        try {\n            const response = await axios.delete(route('api.categories.destroy', id));\n            return response.data;\n        } catch (error) {\n            return error.response.data;\n        }\n    },\n    async edit(id) {\n        try {\n            const response = await axios.get(route('api.categories.edit', id));\n            return response.data;\n        } catch (error) {\n            return error.response.data;\n        }\n    },\n    async create(item) {\n        try {\n            const response = await axios.post(route('api.categories.create'), item);\n            return response.data;\n        } catch (error) {\n            return error.response.data;\n        }\n    },\n}\n","<script setup>\nimport ImagesSelectModal from '@/Components/ImagesSelectModal.vue';\nimport ImageCard from '@/Components/ImageCard.vue';\nimport InputError from '@/Components/Form/InputError.vue';\nimport Label from '@/Components/Form/Label.vue';\nimport Input from '@/Components/Form/Input.vue';\nimport Textarea from '@/Components/Form/Textarea.vue';\nimport Select from '@/Components/Form/Select.vue';\nimport LangTabs from '@/Components/LangTabs.vue';\nimport Button from '@/Components/Button.vue';\nimport Editor from '@tinymce/tinymce-vue';\n\nimport {inject, onMounted, ref} from \"vue\";\nimport CategoriesRepository from \"@/Repositories/CategoriesRepository\";\n\nconst props = defineProps(['item', 'errors'])\nconst tiny = inject('$tiny');\nconst defaultLang = inject('$defaultLang');\nconst publishedStatuses = inject('$publishedStatuses');\n\nconst state = ref({\n    categories: [],\n    categoryPreview: [],\n    isActiveSelectedPreviewModal: false,\n    activeLang: defaultLang\n});\n\nonMounted(async () => {\n    await getCategoriesList();\n});\n\nconst previewModalFunction = () => {\n    state.value.isActiveSelectedPreviewModal = !state.value.isActiveSelectedPreviewModal;\n}\n\nconst destroyPreview = () => {\n    props.item.preview_id = null;\n    props.item.preview = {};\n}\n\nconst changeLang = (val) => {\n    state.value.activeLang = val;\n}\n\nconst setPreview = (image) => {\n    props.item.preview_id = image.id;\n    props.item.preview.src = image.src;\n    previewModalFunction();\n}\n\nconst getCategoriesList = async () => {\n    const data = await CategoriesRepository.list();\n    if (data.success) {\n        data.result.forEach((item) => {\n            state.value.categories.push(\n                {\n                    key: item.id,\n                    value: item.title.ua ? item.title.ua : item.title.ru\n                }\n            )\n        })\n    }\n}\n</script>\n\n<template>\n    <form @submit.prevent=\"$emit('submit',item)\" class=\"flex flex-col\">\n        <div class=\"grid grid-cols-3 mb-5 gap-4\">\n            <div class=\"block col-span-2\">\n                <Label :value=\"$t('slug')\"/>\n                <Input v-model=\"item.slug\" type=\"text\" :placeholder=\"$t('enter_slug')\"/>\n                <InputError v-if=\"errors.slug\" v-for=\"error in errors.slug\" :message=\"error\"/>\n            </div>\n\n            <div class=\"block\">\n                <Label :value=\"$t('published')\"/>\n                <Select v-model=\"item.published\" :options=\"publishedStatuses\"/>\n            </div>\n        </div>\n\n        <div class=\"grid grid-cols-2 gap-4 mb-5\">\n            <div class=\"block\">\n                <Label :value=\"$t('categories.parent')\"/>\n                <Select v-model=\"item.parent_id\" :options=\"state.categories\"/>\n            </div>\n\n            <div class=\"block\">\n                <Label :value=\"$t('preview')\"/>\n                <div class=\"block mb-7 w-1/4 mx-auto\" v-if=\"item.preview_id\">\n                    <ImageCard\n                        :destroyIcon=\"true\"\n                        :image=\"item.preview\"\n                        @destroyImage=\"destroyPreview\"\n                        size=\"55\"\n                    />\n                </div>\n                <div class=\"block mb-7\" v-else>\n                    <Button type=\"button\" @click=\"previewModalFunction\">\n                        {{ $t('select_image') }}\n                    </Button>\n                    <ImagesSelectModal v-if=\"state.isActiveSelectedPreviewModal\"\n                                       @submitForm=\"setPreview\"\n                                       @closeModal=\"previewModalFunction\"\n                    />\n                </div>\n            </div>\n        </div>\n\n        <LangTabs @clickLang=\"changeLang\"/>\n        <hr class=\"mb-5\">\n\n        <div class=\"grid grid-cols-1 rounded\">\n            <div class=\"block mb-5\">\n                <Label :value=\"$t('categories.title')\"/>\n                <Input v-model=\"item.title[state.activeLang]\" type=\"text\"\n                       :placeholder=\"$t('categories.enter_title')\"/>\n            </div>\n\n            <div class=\"block mb-5\">\n                <Label :value=\"$t('meta.title')\"/>\n                <Input v-model=\"item.meta_title[state.activeLang]\" type=\"text\"\n                       :placeholder=\"$t('meta.enter_title')\"/>\n            </div>\n\n            <div class=\"block mb-5\">\n                <Label :value=\"$t('meta.description')\"/>\n                <Textarea v-model=\"item.meta_description[state.activeLang]\"\n                          :placeholder=\"$t('meta.enter_description')\"/>\n            </div>\n\n            <div class=\"block mb-5\">\n                <Label :value=\"$t('meta.keywords')\"/>\n                <Textarea v-model=\"item.meta_keyword[state.activeLang]\"\n                          :placeholder=\"$t('meta.enter_keywords')\"/>\n            </div>\n\n            <div class=\"block mb-5\">\n                <Label :value=\"$t('seo_text')\"/>\n                <editor :api-key=\"tiny.api\" v-model=\"item.seo_text[state.activeLang]\" :init=\"tiny.settings\"/>\n            </div>\n        </div>\n    </form>\n</template>\n"],"names":[],"mappings":"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"}
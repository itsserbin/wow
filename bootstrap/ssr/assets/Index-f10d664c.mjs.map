{"version":3,"file":"Index-f10d664c.mjs","sources":["../../../resources/js/Pages/Public/Thanks/Index.vue"],"sourcesContent":["<script setup>\nimport Timer from '@/Pages/Public/Thanks/Timer.vue'\nimport ProductCard from '@/Pages/Public/Thanks/ProductCard.vue'\nimport MasterLayout from '@/Layouts/MasterLayout.vue'\nimport Head from \"@/Pages/Public/Components/Head.vue\";\n\nimport {onMounted, ref} from \"vue\";\nimport {swal} from '@/Includes/swal';\n\ndefineOptions({layout: MasterLayout})\n\nconst props = defineProps({\n    categories: Array,\n    options: Object,\n    pages: Array,\n    lang: String,\n    eventIdPageView: String,\n    textThanksPageTitle: {\n        type: String,\n        default: 'Дякую за ваше замовлення :)'\n    },\n    textThanksPageDescription: {\n        type: String,\n        default: 'Найближчим часом з вами зв`яжеться оператор для підтвердження замовлення.',\n    },\n    textThanksPageOrderId: {\n        type: String,\n        default: 'Номер вашого замовлення:'\n    },\n    textThanksPageSpecials: {\n        type: String,\n        default: 'Спеціальні пропозиції. Встигни додати до замовлення'\n    },\n    textThanksPageSpecialsEnds: {\n        type: String,\n        default: 'Час дії пропозиції минув. Сподіваємось, Вас зацікавлять наші акції наступного разу. Починаємо готувати посилку і незабаром відправимо Ваше замовлення'\n    },\n});\n\nconst timer = ref({\n    hours: '',\n    mins: '',\n    secs: '',\n});\n\nconst state = ref({\n    orderId: null,\n    isLoading: true,\n    products: [],\n    activeSpecialOffer: false,\n});\n\nonMounted(async () => {\n    state.value.orderId = route().params.id;\n\n    await axios.get(route('api.v1.orders.special', state.value.orderId))\n        .then(({data}) => {\n            if (data.result) {\n                setInterval(function () {\n                    let t = new Date(data.result.end_time).getTime() - new Date().getTime();\n                    if (t >= 0) {\n                        timer.value.hours = ('0' + Math.floor((t % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))).slice(-2);\n                        timer.value.mins = ('0' + Math.floor((t % (1000 * 60 * 60)) / (1000 * 60))).slice(-2);\n                        timer.value.secs = ('0' + Math.floor((t % (1000 * 60)) / 1000)).slice(-2);\n                        state.value.activeSpecialOffer = true;\n                        state.value.products = data.result.products;\n                        state.value.isLoading = false;\n                    } else {\n                        state.value.activeSpecialOffer = false;\n                        state.value.isLoading = false;\n                    }\n                }, 1000);\n            } else {\n                state.value.isLoading = false;\n                state.value.activeSpecialOffer = false;\n            }\n\n        })\n});\n\nconst addItemToOrder = async (id, price) => {\n    await axios.post('/api/v1/order/add-item/' + state.value.orderId, {\n        'id': id,\n        'price': price,\n    })\n        .then(async () => await swal({\n            icon: 'success',\n            title: 'Додано!',\n            text: 'Товар успішно додано до вашого замовлення',\n        }))\n        .catch(async (response) => {\n            console.error(response);\n            await swal({\n                icon: 'error',\n                title: 'Виникла помилка',\n                text: 'Зверніться до адміністратора',\n            })\n        })\n}\n</script>\n\n<template>\n    <Head title=\"Дякуємо за покупку!\"/>\n\n    <section class=\"grid gap-4 grid-cols-1\">\n        <div class=\"grid grid-cols-1 gap-4\">\n            <h1 class=\"font-bold text-black text-center text-2xl font-heading\">\n                {{ textThanksPageTitle }}\n            </h1>\n\n            <div class=\"text-center text-xl font-subheading\">\n                <p>{{ textThanksPageDescription }}</p>\n            </div>\n\n            <div class=\"text-center text-xl font-subheading\" v-if=\"state.orderId\">\n                {{ textThanksPageOrderId }} {{ state.orderId }}\n            </div>\n        </div>\n\n        <div v-if=\"state.activeSpecialOffer\" class=\"grid gap-4 mt-5\">\n            <div class=\"font-bold text-black text-center text-2xl font-subheading\">\n                {{ textThanksPageSpecials }}\n            </div>\n            <Timer :timer=\"timer\"/>\n            <div class=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <ProductCard v-for=\"product in state.products\"\n                             :product=\"product\"\n                             @addItemToOrder=\"addItemToOrder\"\n                             :lang=\"lang\"\n                />\n            </div>\n        </div>\n        <div v-else class=\"order-page__text my-5\">\n            <p>{{ textThanksPageSpecialsEnds }}</p>\n        </div>\n    </section>\n</template>\n"],"names":["__MACROS_defineComponent","MasterLayout"],"mappings":";;;;;;;;;;;;;;;;;;;AASc,MAAA,cAAAA,gBAAA,EAAC,QAAQC,YAAY,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BnC,UAAM,QAAQ,IAAI;AAAA,MACd,OAAO;AAAA,MACP,MAAM;AAAA,MACN,MAAM;AAAA,IACV,CAAC;AAED,UAAM,QAAQ,IAAI;AAAA,MACd,SAAS;AAAA,MACT,WAAW;AAAA,MACX,UAAU,CAAE;AAAA,MACZ,oBAAoB;AAAA,IACxB,CAAC;AAED,cAAU,YAAY;AAClB,YAAM,MAAM,UAAU,MAAK,EAAG,OAAO;AAErC,YAAM,MAAM,IAAI,MAAM,yBAAyB,MAAM,MAAM,OAAO,CAAC,EAC9D,KAAK,CAAC,EAAC,KAAI,MAAM;AACd,YAAI,KAAK,QAAQ;AACb,sBAAY,WAAY;AACpB,gBAAI,IAAI,IAAI,KAAK,KAAK,OAAO,QAAQ,EAAE,aAAY,oBAAI,KAAM,GAAC,QAAO;AACrE,gBAAI,KAAK,GAAG;AACR,oBAAM,MAAM,SAAS,MAAM,KAAK,MAAO,KAAK,MAAO,KAAK,KAAK,OAAQ,MAAO,KAAK,GAAG,GAAG,MAAM,EAAE;AAC/F,oBAAM,MAAM,QAAQ,MAAM,KAAK,MAAO,KAAK,MAAO,KAAK,OAAQ,MAAO,GAAG,GAAG,MAAM,EAAE;AACpF,oBAAM,MAAM,QAAQ,MAAM,KAAK,MAAO,KAAK,MAAO,MAAO,GAAI,GAAG,MAAM,EAAE;AACxE,oBAAM,MAAM,qBAAqB;AACjC,oBAAM,MAAM,WAAW,KAAK,OAAO;AACnC,oBAAM,MAAM,YAAY;AAAA,YAChD,OAA2B;AACH,oBAAM,MAAM,qBAAqB;AACjC,oBAAM,MAAM,YAAY;AAAA,YAC3B;AAAA,UACJ,GAAE,GAAI;AAAA,QACvB,OAAmB;AACH,gBAAM,MAAM,YAAY;AACxB,gBAAM,MAAM,qBAAqB;AAAA,QACpC;AAAA,MAEb,CAAS;AAAA,IACT,CAAC;AAED,UAAM,iBAAiB,OAAO,IAAI,UAAU;AACxC,YAAM,MAAM,KAAK,4BAA4B,MAAM,MAAM,SAAS;AAAA,QAC9D,MAAM;AAAA,QACN,SAAS;AAAA,MACjB,CAAK,EACI,KAAK,YAAY,MAAM,KAAK;AAAA,QACzB,MAAM;AAAA,QACN,OAAO;AAAA,QACP,MAAM;AAAA,MAClB,CAAS,CAAC,EACD,MAAM,OAAO,aAAa;AACvB,gBAAQ,MAAM,QAAQ;AACtB,cAAM,KAAK;AAAA,UACP,MAAM;AAAA,UACN,OAAO;AAAA,UACP,MAAM;AAAA,QACtB,CAAa;AAAA,MACb,CAAS;AAAA,IACT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
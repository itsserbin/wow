{"version":3,"file":"Consultation-6735f7e2.mjs","sources":["../../../resources/js/Pages/Public/Components/Consultation.vue"],"sourcesContent":["<script setup>\nimport Modal from '@/Pages/Public/Components/Modal.vue';\nimport Input from '@/Pages/Public/Components/Input.vue';\nimport InputError from '@/Components/Form/InputError.vue';\n\nimport {ref} from \"vue\";\nimport {swal} from '@/Includes/swal';\nimport {vMaska} from \"@/Includes/maska\"\n\nconst state = ref({\n    show: false,\n    isShow: true,\n    isLoading: false,\n    item: {\n        name: null,\n        phone: null,\n        comment: null,\n    },\n    errors: []\n});\n\nsetTimeout(() => {\n    if (state.value.isShow) {\n        showModal();\n    }\n}, 60000)\n\nfunction showModal() {\n    state.value.show = !state.value.show;\n}\n\nasync function sendForm() {\n    state.value.isLoading = true;\n    await axios.post(route('api.v1.callback.create'), state.value.item)\n        .then(() => {\n            swal({\n                icon: 'success',\n                title: 'Ваш запит надіслано!',\n                text: 'Наш оператор зателефонує Вам протягом 5 хвилин',\n            })\n            state.value.item = {\n                phone: null,\n            };\n            state.value.isLoading = false;\n            showModal();\n        })\n        .catch(({response}) => {\n            swal({\n                icon: 'error',\n                title: 'Виникла помилка',\n                text: 'Перевірте корректність данних',\n            })\n            state.value.errors = response.data;\n            state.value.isLoading = false;\n        })\n}\n</script>\n\n<template>\n    <Modal @closeModal=\"showModal\"\n           v-if=\"state.show\"\n           size=\"medium\"\n           submit-button-text=\"Відправити\"\n           @submitForm=\"sendForm\"\n           @clickCancel=\"showModal\"\n           :is-loading=\"state.isLoading\"\n    >\n        <template #content>\n            <div class=\"text-[24px] text-[#000] font-bold mb-5 text-center\">Потрібна консультація?</div>\n            <div class=\"text-[20px] text-[#000] mb-5 text-center\">\n                Залиште свій номер телефону, і наш консультант вам зателефонує\n            </div>\n            <div class=\"block\">\n                <Input v-maska\n                       data-maska=\"+38 (0##) ###-##-##\"\n                       placeholder=\"+380\"\n                       v-model=\"state.item.phone\"\n                       type=\"tel\"\n                ></Input>\n                <InputError v-if=\"state.errors.phone\" v-for=\"error in state.errors.phone\" :message=\"error\"/>\n            </div>\n        </template>\n    </Modal>\n</template>\n"],"names":[],"mappings":";;;;;;;;;;;;;AASA,UAAM,QAAQ,IAAI;AAAA,MACd,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,WAAW;AAAA,MACX,MAAM;AAAA,QACF,MAAM;AAAA,QACN,OAAO;AAAA,QACP,SAAS;AAAA,MACZ;AAAA,MACD,QAAQ,CAAE;AAAA,IACd,CAAC;AAED,eAAW,MAAM;AACb,UAAI,MAAM,MAAM,QAAQ;AACpB;MACH;AAAA,IACL,GAAG,GAAK;AAER,aAAS,YAAY;AACjB,YAAM,MAAM,OAAO,CAAC,MAAM,MAAM;AAAA,IACpC;AAEA,mBAAe,WAAW;AACtB,YAAM,MAAM,YAAY;AACxB,YAAM,MAAM,KAAK,MAAM,wBAAwB,GAAG,MAAM,MAAM,IAAI,EAC7D,KAAK,MAAM;AACR,aAAK;AAAA,UACD,MAAM;AAAA,UACN,OAAO;AAAA,UACP,MAAM;AAAA,QACtB,CAAa;AACD,cAAM,MAAM,OAAO;AAAA,UACf,OAAO;AAAA,QACvB;AACY,cAAM,MAAM,YAAY;AACxB;MACZ,CAAS,EACA,MAAM,CAAC,EAAC,SAAQ,MAAM;AACnB,aAAK;AAAA,UACD,MAAM;AAAA,UACN,OAAO;AAAA,UACP,MAAM;AAAA,QACtB,CAAa;AACD,cAAM,MAAM,SAAS,SAAS;AAC9B,cAAM,MAAM,YAAY;AAAA,MACpC,CAAS;AAAA,IACT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
{"version":3,"file":"Dashboard-5c76e46a.mjs","sources":["../../../resources/js/Pages/Admin/Dashboard.vue"],"sourcesContent":["<script setup>\nimport {computed, onMounted, ref} from \"vue\";\nimport Chart from '@/Pages/Admin/Statistics/Chart.vue'\nimport OrdersIndicators from '@/Pages/Admin/Statistics/Orders/Indicators.vue';\nimport OrdersTable from '@/Pages/Admin/Statistics/Orders/Table.vue';\nimport DatepickerComponent from '@/Pages/Admin/Statistics/Datepicker.vue'\nimport {endOfMonth, startOfMonth} from \"date-fns\";\nimport AuthenticatedLayout from '@/Layouts/AuthenticatedLayout.vue';\nimport Card from '@/Components/Card.vue';\n\nconst params = ref({\n    date: [],\n    page: 1,\n});\n\nconst orders = ref({\n    table: null,\n    indicators2: null,\n    chart: null,\n    indicators: null,\n});\n\nconst state = ref({\n    statistics: []\n});\n\nonMounted(async () => {\n    params.value.date[0] = startOfMonth(new Date());\n    params.value.date[1] = endOfMonth(new Date());\n\n    await fetch();\n\n    await axios.get(route('api.dashboard'))\n        .then(({data}) => state.value.statistics = data.countOrders)\n        .catch((response) => console.log(response))\n});\n\nconst getParams = computed(() => {\n    const data = {};\n    if (params.value.date.length === 2) {\n        data.date_start = params.value.date[0].toLocaleDateString();\n        data.date_end = params.value.date[1].toLocaleDateString();\n    }\n    data.page = params.value.page;\n    return data;\n});\n\nconst fetch = async () => {\n    await axios.get(route('api.statistics.orders.index', getParams.value))\n        .then(({data}) => orders.value.table = data.result.data)\n        .catch((response) => console.log(response))\n\n    await axios.get(route('api.statistics.orders.chart', getParams.value))\n        .then(({data}) => orders.value.chart = data.result)\n        .catch((response) => console.log(response))\n\n    await axios.get(route('api.statistics.orders.indicators', getParams.value))\n        .then(({data}) => orders.value.indicators = data.result)\n        .catch((response) => console.log(response))\n\n    await axios.get(route('api.statistics.orders.indicators2', getParams.value))\n        .then(({data}) => orders.value.indicators2 = data.result)\n        .catch((response) => console.log(response))\n}\n</script>\n\n<template>\n    <AuthenticatedLayout title=\"Dashboard\">\n        <template #header>\n            Dashboard\n        </template>\n        <div class=\"grid grid-cols-1 gap-4\">\n            <div class=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <Card v-for=\"(item,i) in state.statistics\"\n                      class=\"text-center\"\n                      :title=\"i\"\n                      :description=\"item ? item : '0'\"\n                >\n                </Card>\n            </div>\n\n            <DatepickerComponent v-model=\"params.date\"\n                                 @update:modelValue=\"fetch\"\n            />\n\n            <Chart v-if=\"orders.chart\" :chartData=\"orders.chart\"/>\n\n            <OrdersIndicators v-if=\"orders.indicators\" :data=\"orders.indicators\"/>\n            <OrdersTable v-if=\"orders.table\" :data=\"orders.table\"/>\n        </div>\n    </AuthenticatedLayout>\n</template>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAUA,UAAM,SAAS,IAAI;AAAA,MACf,MAAM,CAAE;AAAA,MACR,MAAM;AAAA,IACV,CAAC;AAED,UAAM,SAAS,IAAI;AAAA,MACf,OAAO;AAAA,MACP,aAAa;AAAA,MACb,OAAO;AAAA,MACP,YAAY;AAAA,IAChB,CAAC;AAED,UAAM,QAAQ,IAAI;AAAA,MACd,YAAY,CAAE;AAAA,IAClB,CAAC;AAED,cAAU,YAAY;AAClB,aAAO,MAAM,KAAK,CAAC,IAAI,aAAa,oBAAI,KAAI,CAAE;AAC9C,aAAO,MAAM,KAAK,CAAC,IAAI,WAAW,oBAAI,KAAI,CAAE;AAE5C,YAAM,MAAK;AAEX,YAAM,MAAM,IAAI,MAAM,eAAe,CAAC,EACjC,KAAK,CAAC,EAAC,KAAI,MAAM,MAAM,MAAM,aAAa,KAAK,WAAW,EAC1D,MAAM,CAAC,aAAa,QAAQ,IAAI,QAAQ,CAAC;AAAA,IAClD,CAAC;AAED,UAAM,YAAY,SAAS,MAAM;AAC7B,YAAM,OAAO,CAAA;AACb,UAAI,OAAO,MAAM,KAAK,WAAW,GAAG;AAChC,aAAK,aAAa,OAAO,MAAM,KAAK,CAAC,EAAE;AACvC,aAAK,WAAW,OAAO,MAAM,KAAK,CAAC,EAAE;MACxC;AACD,WAAK,OAAO,OAAO,MAAM;AACzB,aAAO;AAAA,IACX,CAAC;AAED,UAAM,QAAQ,YAAY;AACtB,YAAM,MAAM,IAAI,MAAM,+BAA+B,UAAU,KAAK,CAAC,EAChE,KAAK,CAAC,EAAC,KAAI,MAAM,OAAO,MAAM,QAAQ,KAAK,OAAO,IAAI,EACtD,MAAM,CAAC,aAAa,QAAQ,IAAI,QAAQ,CAAC;AAE9C,YAAM,MAAM,IAAI,MAAM,+BAA+B,UAAU,KAAK,CAAC,EAChE,KAAK,CAAC,EAAC,KAAI,MAAM,OAAO,MAAM,QAAQ,KAAK,MAAM,EACjD,MAAM,CAAC,aAAa,QAAQ,IAAI,QAAQ,CAAC;AAE9C,YAAM,MAAM,IAAI,MAAM,oCAAoC,UAAU,KAAK,CAAC,EACrE,KAAK,CAAC,EAAC,KAAI,MAAM,OAAO,MAAM,aAAa,KAAK,MAAM,EACtD,MAAM,CAAC,aAAa,QAAQ,IAAI,QAAQ,CAAC;AAE9C,YAAM,MAAM,IAAI,MAAM,qCAAqC,UAAU,KAAK,CAAC,EACtE,KAAK,CAAC,EAAC,KAAI,MAAM,OAAO,MAAM,cAAc,KAAK,MAAM,EACvD,MAAM,CAAC,aAAa,QAAQ,IAAI,QAAQ,CAAC;AAAA,IAClD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
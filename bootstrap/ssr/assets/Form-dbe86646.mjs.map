{"version":3,"file":"Form-dbe86646.mjs","sources":["../../../resources/js/Pages/Admin/Options/Banners/Form.vue"],"sourcesContent":["<script setup>\nimport {inject, ref, onMounted} from \"vue\";\nimport UploadBannersInput from './UploadBannersInput.vue';\nimport Input from '@/Components/Form/Input.vue';\nimport Label from '@/Components/Form/Label.vue';\nimport Select from '@/Components/Form/Select.vue';\nimport LangTabs from '@/Components/LangTabs.vue';\nimport Multiselect from '@/Components/Multiselect/Multiselect.vue';\n\nconst props = defineProps(['item'])\n\nconst publishedStatuses = inject('$publishedStatuses');\nconst defaultLang = inject('$defaultLang');\nconst emits = defineEmits(['onUploadImage']);\nconst state = ref({\n    categories: [],\n    activeLang: defaultLang\n});\n\nonMounted(() => {\n    axios.get(route('api.categories.list'))\n        .then(({data}) => state.value.categories = data.result)\n        .catch((response) => console.log(response))\n})\n\nfunction h1AndCodeAndId({title, id}) {\n    if (title && id) {\n        return `${state.value.activeLang === 'ua' ? title.ua : (state.value.activeLang === 'ru' ? title.ru : '-')} -${id}`;\n    } else {\n        return `${id}`;\n    }\n}\n\nfunction changeLang(val) {\n    state.value.activeLang = val;\n}\n\nfunction uploadImageMobileUa(file) {\n    uploadImage(file, 'mobile', 'ua')\n}\n\nfunction uploadImageMobileRu(file) {\n    uploadImage(file, 'mobile', 'ru')\n}\n\nfunction uploadImageTableUa(file) {\n    uploadImage(file, 'table', 'ua')\n}\n\nfunction uploadImageTableRu(file) {\n    uploadImage(file, 'table', 'ru')\n}\n\n\nfunction uploadImageDesktopUa(file) {\n    uploadImage(file, 'desktop', 'ua')\n}\n\nfunction uploadImageDesktopRu(file) {\n    uploadImage(file, 'desktop', 'ru')\n}\n\nfunction uploadImage(image, device, lang) {\n    emits('onUploadImage', image, device, lang)\n}\n\nfunction destroyImage(device, lang) {\n    if (device === 'mobile') {\n        if (lang === 'ru') {\n            props.item.image_mobile.ru = null;\n        }\n        if (lang === 'ua') {\n            props.item.image_mobile.ua = null;\n        }\n    }\n    if (device === 'table') {\n        if (lang === 'ru') {\n            props.item.image_table.ru = null;\n        }\n        if (lang === 'ua') {\n            props.item.image_table.ua = null;\n        }\n    }\n    if (device === 'desktop') {\n        if (lang === 'ru') {\n            props.item.image_desktop.ru = null;\n        }\n        if (lang === 'ua') {\n            props.item.image_desktop.ua = null;\n        }\n    }\n}\n</script>\n\n<template>\n    <form>\n        <div class=\"grid gap-4\">\n            <div class=\"block\">\n                <Label value=\"Статус публікації\"/>\n                <Select v-model=\"item.published\" :options=\"publishedStatuses\"/>\n            </div>\n\n            <div class=\"block\">\n                <Label value=\"Категорії\"/>\n                <Multiselect\n                    :options=\"state.categories\"\n                    v-model=\"item.categories\"\n                    :custom-label=\"h1AndCodeAndId\"\n                    placeholder=\"Оберіть категорії\"\n                    track-by=\"id\"\n                    :close-on-select=\"true\"\n                    :searchable=\"true\"\n                    :multiple=\"true\"\n                />\n            </div>\n\n            <LangTabs @clickLang=\"changeLang\"/>\n\n            <div class=\"block\">\n                <Label value=\"Назва\"/>\n                <Input v-model=\"item.title[state.activeLang]\" type=\"text\"/>\n            </div>\n\n            <div class=\"block\">\n                <Label value=\"Посилання\"/>\n                <Input v-model=\"item.link[state.activeLang]\" type=\"text\"/>\n            </div>\n\n            <div class=\"grid grid-cols-2 gap-4\">\n                <div class=\"block\">\n                    <UploadBannersInput label=\"Зображення для мобільних\"\n                                        @upload=\"uploadImageMobileUa\"\n                                        v-if=\"state.activeLang === 'ua'\"\n                                        :image=\"item.image_mobile.ua ? route('images.banners.mobile',{filename:item.image_mobile.ua + '.jpeg'}) : null\"\n                                        @onDestroyImage=\"destroyImage('mobile','ua')\"\n                    />\n                    <UploadBannersInput label=\"Зображення для мобільних\"\n                                        @upload=\"uploadImageMobileRu\"\n                                        v-if=\"state.activeLang === 'ru'\"\n                                        :image=\"item.image_mobile.ru ? route('images.banners.mobile',{filename:item.image_mobile.ru + '.jpeg'}) : null\"\n                                        @onDestroyImage=\"destroyImage('mobile','ru')\"\n                    />\n                </div>\n\n                <div class=\"block\">\n                    <UploadBannersInput @upload=\"uploadImageTableRu\"\n                                        :image=\"item.image_table.ru ? route('images.banners.mobile',{filename:item.image_table.ru + '.jpeg'}) : null\"\n                                        @onDestroyImage=\"destroyImage('table','ru')\"\n                                        v-if=\"state.activeLang === 'ru'\"\n                    />\n\n                    <UploadBannersInput label=\"Зображення для планшетів\"\n                                        @upload=\"uploadImageTableUa\"\n                                        :image=\"item.image_table.ua ? route('images.banners.mobile',{filename:item.image_table.ua + '.jpeg'}) : null\"\n                                        @onDestroyImage=\"destroyImage('table','ua')\"\n                                        v-if=\"state.activeLang === 'ua'\"\n                    />\n                </div>\n            </div>\n            <div class=\"block\">\n                <UploadBannersInput label=\"Зображення для компʼютерів\"\n                                    @upload=\"uploadImageDesktopRu\"\n                                    :image=\"item.image_desktop.ru ? route('images.banners.mobile',{filename:item.image_desktop.ru + '.jpeg'}) : null\"\n                                    @onDestroyImage=\"destroyImage('desktop','ru')\"\n                                    v-if=\"state.activeLang === 'ru'\"\n                />\n\n                <UploadBannersInput label=\"Зображення для компʼютерів\"\n                                    @upload=\"uploadImageDesktopUa\"\n                                    :image=\"item.image_desktop.ua ? route('images.banners.mobile',{filename:item.image_desktop.ua + '.jpeg'}) : null\"\n                                    @onDestroyImage=\"destroyImage('desktop','ua')\"\n                                    v-if=\"state.activeLang === 'ua'\"\n                />\n            </div>\n        </div>\n    </form>\n</template>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAWA,UAAM,oBAAoB,OAAO,oBAAoB;AACrD,UAAM,cAAc,OAAO,cAAc;AAEzC,UAAM,QAAQ,IAAI;AAAA,MACd,YAAY,CAAE;AAAA,MACd,YAAY;AAAA,IAChB,CAAC;AAED,cAAU,MAAM;AACZ,YAAM,IAAI,MAAM,qBAAqB,CAAC,EACjC,KAAK,CAAC,EAAC,KAAI,MAAM,MAAM,MAAM,aAAa,KAAK,MAAM,EACrD,MAAM,CAAC,aAAa,QAAQ,IAAI,QAAQ,CAAC;AAAA,IAClD,CAAC;AAED,aAAS,eAAe,EAAC,OAAO,GAAE,GAAG;AACjC,UAAI,SAAS,IAAI;AACb,eAAO,GAAG,MAAM,MAAM,eAAe,OAAO,MAAM,KAAM,MAAM,MAAM,eAAe,OAAO,MAAM,KAAK,QAAS;AAAA,MACtH,OAAW;AACH,eAAO,GAAG;AAAA,MACb;AAAA,IACL;AAEA,aAAS,WAAW,KAAK;AACrB,YAAM,MAAM,aAAa;AAAA,IAC7B;AAEA,aAAS,oBAAoB,MAAM;AAC/B,kBAAY,MAAM,UAAU,IAAI;AAAA,IACpC;AAEA,aAAS,oBAAoB,MAAM;AAC/B,kBAAY,MAAM,UAAU,IAAI;AAAA,IACpC;AAEA,aAAS,mBAAmB,MAAM;AAC9B,kBAAY,MAAM,SAAS,IAAI;AAAA,IACnC;AAEA,aAAS,mBAAmB,MAAM;AAC9B,kBAAY,MAAM,SAAS,IAAI;AAAA,IACnC;AAGA,aAAS,qBAAqB,MAAM;AAChC,kBAAY,MAAM,WAAW,IAAI;AAAA,IACrC;AAEA,aAAS,qBAAqB,MAAM;AAChC,kBAAY,MAAM,WAAW,IAAI;AAAA,IACrC;AAEA,aAAS,YAAY,OAAO,QAAQ,MAAM;AACtC,YAAM,iBAAiB,OAAO,QAAQ,IAAI;AAAA,IAC9C;AAEA,aAAS,aAAa,QAAQ,MAAM;AAChC,UAAI,WAAW,UAAU;AACrB,YAAI,SAAS,MAAM;AACf,gBAAM,KAAK,aAAa,KAAK;AAAA,QAChC;AACD,YAAI,SAAS,MAAM;AACf,gBAAM,KAAK,aAAa,KAAK;AAAA,QAChC;AAAA,MACJ;AACD,UAAI,WAAW,SAAS;AACpB,YAAI,SAAS,MAAM;AACf,gBAAM,KAAK,YAAY,KAAK;AAAA,QAC/B;AACD,YAAI,SAAS,MAAM;AACf,gBAAM,KAAK,YAAY,KAAK;AAAA,QAC/B;AAAA,MACJ;AACD,UAAI,WAAW,WAAW;AACtB,YAAI,SAAS,MAAM;AACf,gBAAM,KAAK,cAAc,KAAK;AAAA,QACjC;AACD,YAAI,SAAS,MAAM;AACf,gBAAM,KAAK,cAAc,KAAK;AAAA,QACjC;AAAA,MACJ;AAAA,IACL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
import{s as i}from"./swal-76588f7d.js";import{_ as M}from"./Paginate-7604e12b.js";import{L}from"./Loader-3f12bd2d.js";import{_ as D}from"./Button-18e692de.js";import{_ as V}from"./Table-d4015883.js";import{_ as B}from"./XCircle-0fb660d3.js";import F from"./Modal-116ca54c.js";import S from"./StatisticLayout-1a38d1fa.js";import{i as j,r as E,o as P,j as N,G as I,p as r,D as m,x as c,A as l,C as _,t as h,q as U,l as u,v as p,B as d,J as q}from"./app-6d1ec759.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Modal-1e77e375.js";import"./Form-5e2e7655.js";import"./Label-646a10b8.js";import"./Input-335d7e3d.js";import"./AuthenticatedLayout-53775af0.js";import"./index.esm-09a1b1ab.js";import"./Logo-7b0b10d2.js";import"./vue-i18n.esm-bundler-39f45a4f.js";import"./SidebarItem-9941fa54.js";const G={key:1},J=["onClick"],O=p("hr",{class:"my-1"},null,-1),T=["onClick"],me={__name:"Index",setup(z){const f=j("$can"),v={title:null,slug:null,code:null},e=E({categories:[],isLoading:!0,isActiveModal:!1,modalAction:"",item:{},currentPage:1});P(async()=>await n());const k=N(()=>e.value.isActiveModal?F:null),y=I([{label:"ID",key:"id"},{label:"Код ",key:"code"},{label:"Назва",key:"title"},{label:"Slug",key:"slug"},{label:"Оновлено<hr class='my-1'>Створено",key:"timestamps"},{label:"#",key:"actions"}]),n=async o=>{e.value.isLoading=!0,o&&(e.value.currentPage=o),await axios.get(route("api.statistics.costs.categories.index",{page:e.value.currentPage})).then(({data:a})=>{e.value.categories=a.result,e.value.isLoading=!1}).catch(a=>{console.log(a),e.value.isLoading=!1})};function g(o){f("show-bookkeeping-costs")&&i({title:"Видалити?",icon:"warning",showCancelButton:!0}).then(a=>{a.isConfirmed&&axios.delete(route("api.statistics.costs.categories.destroy",o)).then(()=>{n(),e.value.isActiveModal&&s(),i({icon:"success",title:"Destroyed!"})}).catch(t=>{console.log(t),i({icon:"error",title:"Error!"})})})}function s(){e.value.isActiveModal=!e.value.isActiveModal}function w(o,a){axios.get(route("api.statistics.costs.categories.edit",o)).then(({data:t})=>{e.value.item=t.result,e.value.modalAction="edit",e.value.item.index=a,s()}).catch(t=>console.log(t))}function C(){axios.put(route("api.statistics.costs.categories.update",e.value.item.id),e.value.item).then(()=>{s(),n(),i({title:"Success!",icon:"success"})}).catch(o=>{console.log(o),i({title:"Error!",icon:"error"})})}function b(){axios.post(route("api.statistics.costs.categories.create"),e.value.item).then(()=>{s(),e.value.item=v,n(),i({title:"Success!",icon:"success"})}).catch(o=>{console.log(o),i({title:"Error!",icon:"error"})})}function x(){e.value.modalAction==="edit"?C():e.value.modalAction==="create"&&b()}function A(){Object.assign(e.value.item,v),e.value.modalAction="create",s()}return(o,a)=>(r(),m(S,{title:"Категорії витрат"},{header:c(()=>[l(" Категорії витрат ")]),default:c(()=>[e.value.isLoading?(r(),m(L,{key:0})):_("",!0),!e.value.isLoading&&h(f)("show-bookkeeping-costs")?(r(),U("div",G,[u(D,{type:"btn",onClick:A},{default:c(()=>[l(" Додати ")]),_:1}),u(V,{headings:y,rows:e.value.categories.data,isSlotMode:!0},{id:c(({data:t})=>[p("a",{href:"javascript:",onClick:$=>w(t.row.id,t.i)},d(t.row.id),9,J)]),timestamps:c(({data:t})=>[l(d(o.$filters.dateFormat(t.row.updated_at))+" ",1),O,l(" "+d(o.$filters.dateFormat(t.row.created_at)),1)]),actions:c(({data:t})=>[p("a",{href:"javascript:",onClick:$=>g(t.row.id)},[u(B)],8,T)]),_:1},8,["headings","rows"]),u(M,{pagination:e.value.categories,"click-handler":n,modelValue:e.value.currentPage,"onUpdate:modelValue":a[0]||(a[0]=t=>e.value.currentPage=t)},null,8,["pagination","modelValue"]),(r(),m(q(h(k)),{item:e.value.item,onCloseModal:s,onSubmitForm:x,onDeclineForm:g},null,40,["item"]))])):_("",!0)]),_:1}))}};export{me as default};

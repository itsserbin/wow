{"version":3,"file":"Form-93012e50.js","sources":["../../../resources/js/Pages/Admin/Content/Products/Form.vue"],"sourcesContent":["<script setup>\nimport {inject, onMounted, ref} from \"vue\";\nimport Images from '@/Pages/Admin/Content/Products/Images.vue';\nimport ImagesSelectModal from '@/Components/ImagesSelectModal.vue';\nimport Button from '@/Components/Button.vue';\nimport Label from '@/Components/Form/Label.vue';\nimport Textarea from '@/Components/Form/Textarea.vue';\nimport Input from '@/Components/Form/Input.vue';\nimport Select from '@/Components/Form/Select.vue';\nimport ImageCard from '@/Components/ImageCard.vue';\nimport LangTabs from '@/Components/LangTabs.vue';\nimport {CharacteristicsRepository} from \"@/Repositories/CharacteristicsRepository\";\nimport Multiselect from '@/Components/Multiselect/Multiselect.vue';\nimport Editor from '@tinymce/tinymce-vue';\n\nconst emits = defineEmits(['submit', 'setProductImages', 'destroyImage'])\nconst props = defineProps(['product'])\nconst defaultLang = inject('$defaultLang');\nconst tiny = inject('$tiny');\nconst publishedStatuses = inject('$publishedStatuses');\nconst state = ref({\n    isActiveSelectedImagesModal: false,\n    isActiveSelectedPreviewModal: false,\n    activeLang: defaultLang,\n    statusOptions: [\n        {\n            key: 'in stock',\n            value: 'В наявності'\n        },\n        {\n            key: 'ends',\n            value: 'Закінчується'\n        },\n        {\n            key: 'out of stock',\n            value: 'Нема в наявності'\n        }\n    ],\n    categories: [],\n    providers: [],\n    colors: [],\n    sizes: [],\n    characteristics: []\n})\n\nonMounted(async () => {\n    await getCharacteristicsList();\n\n    await axios.get(route('api.categories.list'))\n        .then(({data}) => state.value.categories = data.result)\n        .catch((response) => console.log(response));\n\n    await axios.get(route('api.providers.list'))\n        .then(({data}) => {\n            data.result.forEach((item) => {\n                state.value.providers.push({\n                    key: item.id,\n                    value: item.name\n                })\n            })\n        })\n        .catch((response) => console.log(response));\n\n    await axios.get(route('api.colors.list'))\n        .then(({data}) => state.value.colors = data.result)\n        .catch((response) => console.log(response));\n\n    await axios.get(route('api.sizes.list'))\n        .then(({data}) => state.value.sizes = data.result)\n        .catch((response) => console.log(response));\n});\n\nconst customCharacteristicLabel = ({title}) => {\n    if (title) {\n        return title[state.value.activeLang];\n    }\n}\n\nconst getCharacteristicsList = async () => {\n    try {\n        const {result, success} = await CharacteristicsRepository().list();\n        if (success) {\n            state.value.characteristics = result;\n        }\n    } catch (e) {\n        console.error(e);\n    }\n}\n\nconst changeLang = (val) => {\n    state.value.activeLang = val;\n}\n\nconst h1AndCodeAndId = ({h1, id}) => {\n    if (h1 && id) {\n        return `${state.value.activeLang === 'ua' ? h1.ua : (state.value.activeLang === 'ru' ? h1.ru : '-')} -${id}`;\n    } else {\n        return `${id}`;\n    }\n}\n\nconst imagesModalFunction = () => {\n    state.value.isActiveSelectedImagesModal = !state.value.isActiveSelectedImagesModal;\n}\n\nconst previewModalFunction = () => {\n    state.value.isActiveSelectedPreviewModal = !state.value.isActiveSelectedPreviewModal;\n}\n\nconst destroyPreview = () => {\n    props.product.preview_id = null;\n}\n\nconst setProductImages = (images) => {\n    imagesModalFunction();\n    emits('setProductImages', images);\n}\n\nconst setProductPreview = (image) => {\n    props.product.preview_id = image.id;\n    props.product.preview.src = image.src;\n    previewModalFunction();\n}\n\nconst destroyImage = (image) => {\n    emits('destroyImage', image);\n}\n</script>\n\n<template>\n    <form @submit.prevent=\"$emit('submit',product)\" class=\"grid grid-cols-1 gap-4\">\n        <div class=\"grid grid-cols-3 gap-4 mb-5\">\n            <div class=\"block\">\n                <Label :value=\"$t('published')\"/>\n                <Select v-model=\"product.published\" :options=\"publishedStatuses\"/>\n            </div>\n\n            <div class=\"block\">\n                <Label :value=\"$t('products.status')\"/>\n                <Select v-model=\"product.status\" :options=\"state.statusOptions\"/>\n            </div>\n\n            <div class=\"block\">\n                <Label :value=\"$t('products.vendor_code')\"/>\n                <Input v-model=\"product.vendor_code\" type=\"text\"\n                       :placeholder=\"$t('products.enter_vendor_code')\"/>\n            </div>\n        </div>\n\n        <div class=\"grid grid-cols-3 gap-4\">\n            <div class=\"block\">\n                <Label :value=\"$t('products.categories')\"/>\n                <multiselect\n                    :options=\"state.categories\"\n                    v-model=\"product.categories\"\n                    :custom-label=\"h1AndCodeAndId\"\n                    :placeholder=\"$t('products.enter_categories')\"\n                    class=\"mb-5\"\n                    track-by=\"id\"\n                    :searchable=\"true\"\n                    :multiple=\"true\"\n                />\n            </div>\n\n            <div class=\"block\">\n                <Label :value=\"$t('products.provider')\"/>\n                <Select v-model=\"product.provider_id\" :options=\"state.providers\"/>\n            </div>\n\n            <div class=\"block\">\n                <Label :value=\"$t('preview')\"/>\n                <div class=\"block mb-7\" v-if=\"product.preview_id\">\n                    <ImageCard\n                        :destroyIcon=\"true\"\n                        :image=\"product.preview\"\n                        @destroyImage=\"destroyPreview\"\n                        size=\"55\"\n                    />\n                </div>\n                <div class=\"block mb-7\" v-else>\n                    <Button type=\"button\" @click=\"previewModalFunction\">\n                        {{ $t('select_image') }}\n                    </Button>\n                    <ImagesSelectModal v-if=\"state.isActiveSelectedPreviewModal\"\n                                       @submitForm=\"setProductPreview\"\n                                       @closeModal=\"previewModalFunction\"\n                    />\n                </div>\n            </div>\n        </div>\n\n        <div class=\"grid grid-cols-2 gap-4\">\n            <div class=\"block\">\n                <Label :value=\"$t('products.sizes')\"/>\n                <multiselect\n                    :options=\"state.sizes\"\n                    v-model=\"product.sizes\"\n                    label=\"title\"\n                    :placeholder=\"$t('products.enter_sizes')\"\n                    track-by=\"id\"\n                    :close-on-select=\"false\"\n                    :searchable=\"true\"\n                    :multiple=\"true\"\n                />\n            </div>\n\n            <div class=\"block\">\n                <Label :value=\"$t('products.colors')\"/>\n                <multiselect\n                    :options=\"state.colors\"\n                    v-model=\"product.colors\"\n                    label=\"name\"\n                    :placeholder=\"$t('products.enter_colors')\"\n                    track-by=\"id\"\n                    :close-on-select=\"false\"\n                    :searchable=\"true\"\n                    :multiple=\"true\"\n                />\n            </div>\n        </div>\n\n        <div class=\"block\">\n            <Label :value=\"$t('products.youtube')\"/>\n            <Input v-model=\"product.youtube\" type=\"text\"\n                   :placeholder=\"$t('products.enter_youtube')\"/>\n        </div>\n\n        <LangTabs @clickLang=\"changeLang\"/>\n        <hr class=\"mb-5\">\n\n        <div class=\"grid grid-cols-1 gap-4\">\n            <div class=\"block\">\n                <Label :value=\"$t('products.h1')\"/>\n                <Input v-model=\"product.h1[state.activeLang]\" type=\"text\"\n                       :placeholder=\"$t('products.enter_h1')\"/>\n            </div>\n\n            <div class=\"block\">\n                <Label :value=\"$t('meta.title')\"/>\n                <Input v-model=\"product.title[state.activeLang]\" type=\"text\"\n                       :placeholder=\"$t('meta.enter_title')\"/>\n            </div>\n\n            <div class=\"block\">\n                <Label :value=\"$t('meta.description')\"/>\n                <Textarea v-model=\"product.description[state.activeLang]\"\n                          :placeholder=\"$t('meta.enter_description')\"/>\n            </div>\n\n            <div class=\"block\">\n                <Label :value=\"$t('products.content')\"/>\n                <editor :api-key=\"tiny.api\" v-model=\"product.content[state.activeLang]\" :init=\"tiny.settings\"/>\n            </div>\n\n            <div class=\"block\">\n                <Label :value=\"$t('products.size_table')\"/>\n                <editor :api-key=\"tiny.api\" v-model=\"product.size_table\" :init=\"tiny.settings\"/>\n            </div>\n\n            <div class=\"grid grid-cols-3 gap-4 mb-5\">\n                <div class=\"block\">\n                    <Label :value=\"$t('products.price')\"/>\n                    <Input v-model=\"product.price\" type=\"number\"\n                           :placeholder=\"$t('products.enter_price')\"/>\n                </div>\n\n                <div class=\"block\">\n                    <Label :value=\"$t('products.discount_price')\"/>\n                    <Input v-model=\"product.discount_price\" type=\"number\"\n                           :placeholder=\"$t('products.enter_discount_price')\"/>\n                </div>\n\n                <div class=\"block\">\n                    <Label :value=\"$t('products.trade_price')\"/>\n                    <Input v-model=\"product.trade_price\" type=\"number\"\n                           :placeholder=\"$t('products.enter_trade_price')\"/>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"row\">\n            <div class=\"block mb-7\" v-if=\"product.images\">\n                <Label :value=\"$t('images.page_title')\"/>\n                <Images :images=\"product.images\" @destroyImage=\"destroyImage\"/>\n            </div>\n            <div class=\"block mb-7\">\n                <Button type=\"button\" @click=\"imagesModalFunction\">\n                    {{ $t('select_image') }}\n                </Button>\n                <ImagesSelectModal v-if=\"state.isActiveSelectedImagesModal\"\n                                   @submitForm=\"setProductImages\"\n                                   @closeModal=\"imagesModalFunction\"\n                                   :multiple=\"true\"\n                />\n            </div>\n        </div>\n\n        <div class=\"grid grid-cols-4 gap-4\">\n            <div class=\"block\" v-for=\"characteristic in state.characteristics\" v-if=\"state.characteristics.length\">\n                <Label :value=\"characteristic.title[state.activeLang]\"/>\n                <multiselect\n                    :options=\"characteristic.values\"\n                    v-model=\"product.characteristicsNew[characteristic.id]\"\n                    :custom-label=\"customCharacteristicLabel\"\n                    :placeholder=\"$t('products.select_characteristic_value')\"\n                    class=\"mb-5\"\n                    track-by=\"id\"\n                    value=\"id\"\n                    :searchable=\"true\"\n                    :multiple=\"true\"\n                    :close-on-select=\"false\"\n                />\n            </div>\n        </div>\n    </form>\n</template>\n"],"names":["defaultLang","inject","tiny","publishedStatuses","state","ref","onMounted","getCharacteristicsList","data","response","item","customCharacteristicLabel","title","result","success","CharacteristicsRepository","changeLang","val","h1AndCodeAndId","h1","id","imagesModalFunction","previewModalFunction","destroyPreview","props","setProductImages","images","emits","setProductPreview","image","destroyImage"],"mappings":"iyDAiBMA,EAAcC,EAAO,cAAc,EACnCC,EAAOD,EAAO,OAAO,EACrBE,EAAoBF,EAAO,oBAAoB,EAC/CG,EAAQC,EAAI,CACd,4BAA6B,GAC7B,6BAA8B,GAC9B,WAAYL,EACZ,cAAe,CACX,CACI,IAAK,WACL,MAAO,aACV,EACD,CACI,IAAK,OACL,MAAO,cACV,EACD,CACI,IAAK,eACL,MAAO,kBACV,CACJ,EACD,WAAY,CAAE,EACd,UAAW,CAAE,EACb,OAAQ,CAAE,EACV,MAAO,CAAE,EACT,gBAAiB,CAAE,CACvB,CAAC,EAEDM,EAAU,SAAY,CAClB,MAAMC,EAAsB,EAE5B,MAAM,MAAM,IAAI,MAAM,qBAAqB,CAAC,EACvC,KAAK,CAAC,CAAC,KAAAC,CAAI,IAAMJ,EAAM,MAAM,WAAaI,EAAK,MAAM,EACrD,MAAOC,GAAa,QAAQ,IAAIA,CAAQ,CAAC,EAE9C,MAAM,MAAM,IAAI,MAAM,oBAAoB,CAAC,EACtC,KAAK,CAAC,CAAC,KAAAD,CAAI,IAAM,CACdA,EAAK,OAAO,QAASE,GAAS,CAC1BN,EAAM,MAAM,UAAU,KAAK,CACvB,IAAKM,EAAK,GACV,MAAOA,EAAK,IAChC,CAAiB,CACjB,CAAa,CACb,CAAS,EACA,MAAOD,GAAa,QAAQ,IAAIA,CAAQ,CAAC,EAE9C,MAAM,MAAM,IAAI,MAAM,iBAAiB,CAAC,EACnC,KAAK,CAAC,CAAC,KAAAD,CAAI,IAAMJ,EAAM,MAAM,OAASI,EAAK,MAAM,EACjD,MAAOC,GAAa,QAAQ,IAAIA,CAAQ,CAAC,EAE9C,MAAM,MAAM,IAAI,MAAM,gBAAgB,CAAC,EAClC,KAAK,CAAC,CAAC,KAAAD,CAAI,IAAMJ,EAAM,MAAM,MAAQI,EAAK,MAAM,EAChD,MAAOC,GAAa,QAAQ,IAAIA,CAAQ,CAAC,CAClD,CAAC,EAED,MAAME,EAA4B,CAAC,CAAC,MAAAC,CAAK,IAAM,CAC3C,GAAIA,EACA,OAAOA,EAAMR,EAAM,MAAM,UAAU,CAE3C,EAEMG,EAAyB,SAAY,CACvC,GAAI,CACA,KAAM,CAAC,OAAAM,EAAQ,QAAAC,CAAO,EAAI,MAAMC,EAAyB,EAAG,OACxDD,IACAV,EAAM,MAAM,gBAAkBS,EAErC,OAAQ,EAAP,CACE,QAAQ,MAAM,CAAC,CAClB,CACL,EAEMG,EAAcC,GAAQ,CACxBb,EAAM,MAAM,WAAaa,CAC7B,EAEMC,EAAiB,CAAC,CAAC,GAAAC,EAAI,GAAAC,CAAE,IACvBD,GAAMC,EACC,GAAGhB,EAAM,MAAM,aAAe,KAAOe,EAAG,GAAMf,EAAM,MAAM,aAAe,KAAOe,EAAG,GAAK,QAASC,IAEjG,GAAGA,IAIZC,EAAsB,IAAM,CAC9BjB,EAAM,MAAM,4BAA8B,CAACA,EAAM,MAAM,2BAC3D,EAEMkB,EAAuB,IAAM,CAC/BlB,EAAM,MAAM,6BAA+B,CAACA,EAAM,MAAM,4BAC5D,EAEMmB,EAAiB,IAAM,CACzBC,EAAM,QAAQ,WAAa,IAC/B,EAEMC,EAAoBC,GAAW,CACjCL,IACAM,EAAM,mBAAoBD,CAAM,CACpC,EAEME,EAAqBC,GAAU,CACjCL,EAAM,QAAQ,WAAaK,EAAM,GACjCL,EAAM,QAAQ,QAAQ,IAAMK,EAAM,IAClCP,GACJ,EAEMQ,EAAgBD,GAAU,CAC5BF,EAAM,eAAgBE,CAAK,CAC/B"}
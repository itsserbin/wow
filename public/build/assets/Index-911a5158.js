import{_ as $}from"./Paginate-b71b7269.js";import{_ as y}from"./Card-ec829b36.js";import{_}from"./Button-3f74bcad.js";import{L as C}from"./Loader-8bf33617.js";import{_ as d}from"./Label-fa7af1d1.js";import D from"./StatisticLayout-99ba8621.js";import{s as M,e as P,_ as w}from"./Datepicker-5f10a97a.js";import B from"./Table-9855d2fd.js";import{M as N}from"./Multiselect-325a47ec.js";import{i as j,r as c,j as f,o as S,p as r,D as m,x as u,A as p,C as h,t as U,q as k,v as n,l as s,F as A,K as E}from"./app-f55448cf.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./AuthenticatedLayout-ecf8db9d.js";import"./index.esm-f21e1dfa.js";import"./Logo-edac3a30.js";import"./vue-i18n.esm-bundler-d070be13.js";import"./SidebarItem-eda03439.js";import"./vue-datepicker-3843f364.js";import"./Table-6800669f.js";const F={key:1,class:"grid grid-cols-1 gap-4"},O={class:"grid grid-cols-1 md:grid-cols-12 gap-4 mt-5"},q={class:"block col-span-2 text-center"},I={class:"block col-span-4"},K={class:"block col-span-4"},T={class:"block col-span-2 text-center"},z={class:"grid grid-cols-2 md:grid-cols-4"},G={class:"text-center"},ce={__name:"Index",setup(H){const x=j("$can"),a=c({data:[],managers:[],isLoading:!0}),g=c([]),V=f(()=>{const e={};return t.value.date.length===2&&(e.date_start=t.value.date[0].toLocaleDateString(),e.date_end=t.value.date[1].toLocaleDateString()),v.value&&(e.managers=v.value),e.page=t.value.currentPage,route("api.statistics.managers.index",e)}),v=f(()=>{let e=[];return a.value.managers.forEach(o=>{e.push(o.id)}),e.join()}),t=c({date:[],managers:[],currentPage:1});S(()=>{t.value.date[0]=M(new Date),t.value.date[1]=P(new Date),i(),axios.get(route("api.users.list.managers")).then(({data:e})=>g.value=e.result).catch(e=>console.log(e))});function L(){t.value.managers=[],t.value.date=[],t.value.managers=[],a.value.managers=[],i()}function i(){a.value.isLoading=!0,axios.get(V.value).then(({data:e})=>{a.value.data=e,a.value.isLoading=!1}).catch(e=>{console.log(e),a.value.isLoading=!1})}return(e,o)=>(r(),m(D,{title:"Статистика для менеджерів"},{header:u(()=>[p(" Статистика для менеджерів ")]),default:u(()=>[a.value.isLoading?(r(),m(C,{key:0})):h("",!0),!a.value.isLoading&&U(x)("show-bookkeeping-managers")?(r(),k("div",F,[n("div",O,[n("div",q,[s(d,{value:" "}),s(_,{type:"button",onClick:L},{default:u(()=>[p(" Очистити ")]),_:1})]),n("div",I,[s(d,{value:"Фільтр по даті"}),s(w,{modelValue:t.value.date,"onUpdate:modelValue":o[0]||(o[0]=l=>t.value.date=l)},null,8,["modelValue"])]),n("div",K,[s(d,{value:"Фільтр по менеджерам"}),s(N,{modelValue:a.value.managers,"onUpdate:modelValue":o[1]||(o[1]=l=>a.value.managers=l),options:g.value,label:"name",placeholder:"Оберіть менеджерів","track-by":"id",searchable:!0,"close-on-select":!1,multiple:""},null,8,["modelValue","options"])]),n("div",T,[s(d,{value:" "}),s(_,{type:"button",onClick:i},{default:u(()=>[p(" Пошук ")]),_:1})])]),n("div",z,[(r(!0),k(A,null,E(a.value.data.generalStat,(l,b)=>(r(),m(y,{class:"text-center",title:b,description:l},null,8,["title","description"]))),256))]),s(B,{data:a.value.data.result.data},null,8,["data"]),n("div",G,[s($,{pagination:a.value.data.result,"click-handler":i,modelValue:t.value.currentPage,"onUpdate:modelValue":o[2]||(o[2]=l=>t.value.currentPage=l)},null,8,["pagination","modelValue"])])])):h("",!0)]),_:1}))}};export{ce as default};

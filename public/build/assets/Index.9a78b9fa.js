import{ae as V,p as F,f as y,q as B,m as r,w as g,v as _,o as i,k as M,t as h,j as p,u as d,g as P,i as I,I as b,x as L,ab as k}from"./vendor.aefaaf5e.js";import{L as D,b as E,j as N}from"./app.95816afc.js";import{_ as j}from"./UploadImagesModal.0ea7c4db.js";import S from"./List.6c219a2e.js";import q from"./Modal.8fac8e58.js";import z from"./ContentLayout.451502c3.js";import"./__commonjsHelpers__.488ed5c2.js";import"./vue.m.8e70aa70.js";import"./bootstrap.a62f1e2e.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./Logo.9cbb3071.js";import"./Form.1ac4765e.js";const v={async fetch(s){try{return(await axios.get(route("api.images.index",s))).data}catch(t){throw new Error(t.response.data)}},async destroy(s){try{return(await axios.delete(route("api.images.destroy",s))).data}catch(t){throw new Error(t.response.data)}},async update(s){try{return(await axios.put(route("api.images.update",s.id),s)).data}catch(t){throw new Error(t.response.data)}}},O={key:1,class:"grid grid-cols-1 gap-4"},R={class:"text-center"},te={__name:"Index",setup(s){const t=_("$swal"),l=_("$can"),{t:u}=V(),e=F({imagesList:[],isActiveUploadModal:!1,isActiveImageModal:!1,imageUploadModal:[],imageModal:{id:null,src:null,alt:null},currentPage:1,isLoading:!0}),$=y(()=>e.value.isActiveUploadModal?j:null),C=y(()=>e.value.isActiveImageModal?q:null);B(()=>n());const f=()=>{e.value.isActiveUploadModal=!e.value.isActiveUploadModal},c=()=>{e.value.isActiveImageModal=!e.value.isActiveImageModal},U=a=>{c(),e.value.imageModal=a},x=async()=>{if(l("edit-images")){const{success:a}=await v.update(e.value.imageModal);a&&(c(),await t({icon:"success",title:u("swal.updated")}))}},A=async a=>{await w(a),c()},w=async a=>{if(l("destroy-images")&&(await t({title:u("swal.sure"),icon:"warning",showCancelButton:!0})).isConfirmed){e.value.isLoading=!0;const{success:m}=await v.destroy(a);m&&(await n(),await t({icon:"success",title:u("swal.destroyed")})),e.value.isLoading=!1}},n=async a=>{e.value.isLoading=!0,a&&(e.value.currentPage=a);const o=await v.fetch({page:e.value.currentPage});e.value.imagesList=o.success?o.result:[],e.value.isLoading=!1};return(a,o)=>(i(),r(z,{title:a.$t("images.page_title")},{header:g(()=>[M(h(a.$t("images.page_title")),1)]),default:g(()=>[e.value.isLoading?(i(),r(D,{key:0})):p("",!0),!e.value.isLoading&&d(l)("show-images")?(i(),P("div",O,[I("div",null,[d(l)("create-images")?(i(),r(E,{key:0,type:"btn",onClick:b(f,["prevent"])},{default:g(()=>[M(h(a.$t("add")),1)]),_:1},8,["onClick"])):p("",!0)]),L(S,{images:e.value.imagesList,onClickImage:U,onFetch:n,onDestroyImage:w},null,8,["images"]),I("div",R,[L(N,{pagination:e.value.imagesList,"click-handler":n,modelValue:e.value.currentPage,"onUpdate:modelValue":o[0]||(o[0]=m=>e.value.currentPage=m)},null,8,["pagination","modelValue"])])])):p("",!0),(i(),r(k(d(C)),{onCloseModal:c,onSubmitForm:x,onDeclineForm:A,image:e.value.imageModal,size:"large"},null,40,["image"])),(i(),r(k(d($)),{onCloseModal:f,onOnUpload:n},null,32))]),_:1},8,["title"]))}};export{te as default};

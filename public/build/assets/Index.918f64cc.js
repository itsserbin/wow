import N from"./Modal.37728e05.js";import O from"./OptionsLayout.3f67aa03.js";import{v as k,A as T,G as X,B as H,V as v,S as n,R as m,_ as g,L as I,P as y,K as _,M as f,O as p,Y as u,bc as U,x as h,X as r}from"./moment.fb372146.js";import"./Form.3d3d60e0.js";const G=u(" XML "),K={key:1},R=u(" \u0414\u043E\u0434\u0430\u0442\u0438 "),Y=["onClick"],q=["innerHTML"],z=f("hr",{class:"my-1"},null,-1),J=["onClick"],oe={__name:"Index",setup(Q){const l=h("$swal"),i=h("$can"),x=k({products:[],title:null,description:null,category:null});h("$defaultLang");const e=T({data:[],currentPage:1,isLoading:!0,isActiveModal:!1,modalAction:"",item:{}});X(()=>{d(1)});const L=H(()=>e.value.isActiveModal?N:null),w=k([{label:"ID",key:"id"},{label:"\u041D\u0430\u0437\u0432\u0430",key:"title"},{label:"Slug",key:"slug"},{label:"\u041E\u043F\u0438\u0441",key:"description"},{label:"\u041E\u043D\u043E\u0432\u043B\u0435\u043D\u043E<hr class='my-1'>\u0421\u0442\u0432\u043E\u0440\u0435\u043D\u043E",key:"timestamps"},{label:"#",key:"actions"}]);function C(o){e.value.activeLang=o}function d(o){e.value.isLoading=!0,o&&(e.value.currentPage=o),axios.get(route("api.xmls.index",{page:e.value.currentPage})).then(a=>{Object.assign(e.value.data,a.data.result),e.value.isLoading=!1}).catch(a=>{console.log(a),e.value.isLoading=!1})}function b(o){i("destroy-xml")&&l({title:"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438?",icon:"warning",showCancelButton:!0}).then(a=>{a.isConfirmed&&axios.delete(route("api.xmls.destroy",o)).then(()=>{d(),e.value.isActiveModal&&s(),l({icon:"success",title:"Destroyed!"})}).catch(c=>{console.log(c),l({icon:"error",title:"Error!"})})})}function s(){e.value.isActiveModal=!e.value.isActiveModal}function M(o,a){i("edit-xml")&&axios.get(route("api.xmls.edit",o)).then(({data:c})=>{e.value.item=c.result,e.value.modalAction="edit",e.value.item.index=a,s()}).catch(c=>console.log(c))}function A(){i("edit-xml")&&axios.put(route("api.xmls.update",e.value.item.id),e.value.item).then(()=>{s(),d(),l({title:"Success!",icon:"success"})}).catch(o=>{console.log(o),l({title:"Error!",icon:"error"})})}function $(){i("create-xml")&&axios.post(route("api.xmls.create"),e.value.item).then(()=>{s(),e.value.item=x,d(),l({title:"Success!",icon:"success"})}).catch(o=>{console.log(o),l({title:"Error!",icon:"error"})})}function S(){e.value.modalAction==="edit"&&i("edit-xml")?A():e.value.modalAction==="create"&&i("create-xml")&&$()}function V(){i("create-xml")&&(Object.assign(e.value.item,x),e.value.modalAction="create",s())}return(o,a)=>{const c=r("loader-component"),B=r("button-component"),D=r("lang-tabs"),F=r("xcircle-component"),P=r("table-component"),j=r("paginate");return m(),v(O,{title:"XML"},{header:n(()=>[G]),default:n(()=>[e.value.isLoading?(m(),v(c,{key:0})):g("",!0),e.value.isLoading?g("",!0):(m(),I("div",K,[y(i)("create-xml")?(m(),v(B,{key:0,type:"btn",onClick:V},{default:n(()=>[R]),_:1})):g("",!0),_(D,{onClickLang:C}),_(P,{headings:w,isSlotMode:!0,rows:e.value.data.data},{id:n(({data:t})=>[f("a",{href:"javascript:",onClick:E=>M(t.row.id,t.i)},p(t.row.id),9,Y)]),icon:n(({data:t})=>[f("div",{innerHTML:t.row.icon},null,8,q)]),text:n(({data:t})=>[u(p(e.value.activeLang==="ua"?t.row.text.ua:e.value.activeLang==="ru"?t.row.text.ru:null),1)]),published:n(({data:t})=>[u(p(o.$filters.publishedStatus(t.row.published)),1)]),timestamps:n(({data:t})=>[u(p(o.$filters.dateFormat(t.row.updated_at))+" ",1),z,u(" "+p(o.$filters.dateFormat(t.row.created_at)),1)]),actions:n(({data:t})=>[f("a",{href:"javascript:",onClick:E=>b(t.row.id)},[_(F)],8,J)]),_:1},8,["headings","rows"]),_(j,{pagination:e.value.data,"click-handler":d,modelValue:e.value.currentPage,"onUpdate:modelValue":a[0]||(a[0]=t=>e.value.currentPage=t)},null,8,["pagination","modelValue"]),(m(),v(U(y(L)),{item:e.value.item,onCloseModal:s,onSubmitForm:S,onDeclineForm:b},null,40,["item"]))]))]),_:1})}}};export{oe as default};

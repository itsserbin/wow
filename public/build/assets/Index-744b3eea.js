import B from"./Chart-a2b1e32e.js";import D from"./Table-dd680623.js";import P from"./StatisticLayout-0376b79c.js";import{s as b,e as C,_ as M}from"./Datepicker-d3feb497.js";import{g as u,l as d,o as N,A as l,B as _,D as v,K as r,y as o,s as S,q as p,u as E,m as f,p as m,E as i,F,C as O}from"./index-bc3c132c.js";import"./index-20498043.js";import"./app-b232e098.js";import"./moment-fbc5633a.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Logo-3d23fa23.js";const U={key:1,class:"grid grid-cols-1 gap-4"},j={class:"block"},q={class:"grid grid-cols-2 md:grid-cols-4"},A={class:"text-center"},Y={__name:"Index",setup(I){v("$swal");const h=v("$can"),e=u({profits:[],chart:null,isLoading:!0}),t=u({date:[],currentPage:1});u([]);const k=d(()=>{if(t.value.date.length===2)return{date_start:t.value.date[0].toLocaleDateString(),date_end:t.value.date[1].toLocaleDateString()}}),V=d(()=>t.value.last),g=d(()=>({...k.value,last:V.value,page:t.value.currentPage}));N(()=>{t.value.date[0]=b(new Date),t.value.date[1]=C(new Date),c()});function c(){e.value.isLoading=!0,axios.get(route("api.statistics.profits.index",g.value)).then(({data:a})=>{e.value.profits=a,e.value.isLoading=!1}).catch(a=>{console.log(a),e.value.isLoading=!1}),axios.get(route("api.statistics.profits.chart",g.value)).then(({data:a})=>e.value.chart=a.result).catch(a=>console.log(a))}return(a,s)=>{const x=r("loader-component"),L=r("label-component"),$=r("card-component"),w=r("pagination");return o(),l(P,{title:"Прибуток"},{header:_(()=>[S(" Прибуток ")]),default:_(()=>[e.value.isLoading?(o(),l(x,{key:0})):p("",!0),!e.value.isLoading&&E(h)("show-bookkeeping-profits")?(o(),f("div",U,[m("div",j,[i(L,{value:"Фільтр по даті"}),i(M,{modelValue:t.value.date,"onUpdate:modelValue":[s[0]||(s[0]=n=>t.value.date=n),c]},null,8,["modelValue"])]),e.value.chart?(o(),l(B,{key:0,"chart-data":e.value.chart},null,8,["chart-data"])):p("",!0),m("div",q,[(o(!0),f(F,null,O(e.value.profits.generalStat,(n,y)=>(o(),l($,{class:"text-center",title:y,description:a.$filters.formatMoney(n)},null,8,["title","description"]))),256))]),i(D,{data:e.value.profits.result.data},null,8,["data"]),m("div",A,[i(w,{pagination:e.value.profits.result,"click-handler":c,modelValue:t.value.currentPage,"onUpdate:modelValue":s[1]||(s[1]=n=>t.value.currentPage=n)},null,8,["pagination","modelValue"])])])):p("",!0)]),_:1})}}};export{Y as default};

{"version":3,"file":"Index-5be62de0.js","sources":["../../../resources/js/Pages/Public/Home/Index.vue"],"sourcesContent":["<script setup>\nimport ProductsList from './ProductsList.vue';\nimport MasterLayout from '@/Layouts/MasterLayout.vue'\nimport MainBanners from './../Components/Banners.vue';\nimport Categories from './../Components/Categories.vue';\nimport Head from \"@/Pages/Public/Components/Head.vue\";\n\ndefineOptions({layout: MasterLayout})\n\nimport {isLoading} from \"@/Pages/Public/load\";\nimport {defineAsyncComponent, onMounted, ref} from \"vue\";\n\nconst Content = defineAsyncComponent(() => import('../Components/Content.vue'));\nconst Advantages = defineAsyncComponent(() => import('../Components/Advantages.vue'));\nconst AllReviewsCarousel = defineAsyncComponent(() => import('../Components/AllReviewsCarousel.vue'));\nconst FaqComponent = defineAsyncComponent(() => import('../Components/FaqComponent.vue'));\nconst Support = defineAsyncComponent(() => import('../Components/Support.vue'));\n\nconst props = defineProps([\n    'lang',\n    'categories',\n    'options',\n    'banners',\n    'bestSellingProducts',\n    'newProducts',\n    'allProducts',\n    'pages',\n    'reviews',\n    'text',\n    'faqs',\n    'advantages',\n]);\n\nconst meta = {\n    title: props.lang === 'ua' ? props.options.meta_title_ua : props.options.meta_title_ru,\n    description: props.lang === 'ua' ? props.options.meta_description_ua : props.options.meta_description_ru,\n}\n\nconst stateNewProducts = ref({\n    data: [],\n    isLoadMore: false,\n    isShowLoadMore: false,\n    currentPage: 1,\n    endpoint: '/api/v1/product/new-products?page='\n});\n\nconst stateAllProducts = ref({\n    data: [],\n    isLoadMore: false,\n    isShowLoadMore: false,\n    currentPage: 1,\n    endpoint: '/api/v1/product?page='\n});\n\nconst stateBestSellingProducts = ref({\n    data: [],\n    isLoadMore: false,\n    isShowLoadMore: false,\n    currentPage: 1,\n    endpoint: '/api/v1/product/best-selling?page='\n});\n\nonMounted(() => {\n    stateBestSellingProducts.value.data = props.bestSellingProducts.data;\n    stateNewProducts.value.data = props.newProducts.data;\n    stateAllProducts.value.data = props.allProducts.data;\n\n    if (props.bestSellingProducts.current_page !== props.bestSellingProducts.per_page) {\n        setShowLoadMore(stateBestSellingProducts.value);\n    }\n    if (props.newProducts.current_page !== props.newProducts.per_page) {\n        setShowLoadMore(stateNewProducts.value);\n    }\n    if (props.allProducts.current_page !== props.allProducts.per_page) {\n        setShowLoadMore(stateAllProducts.value);\n    }\n})\n\nconst setShowLoadMore = (product) => {\n    product.isShowLoadMore = true;\n}\n\nconst fetchAllProducts = async () => {\n    stateAllProducts.value.isLoadMore = true;\n    await axios.get(stateAllProducts.value.endpoint + (stateAllProducts.value.currentPage + 1))\n        .then(({data}) => onSuccessFetch(stateAllProducts.value, data))\n        .catch((response) => console.error(response));\n}\n\nconst fetchBestSellingProducts = async () => {\n    stateBestSellingProducts.value.isLoadMore = true;\n    await axios.get(stateBestSellingProducts.value.endpoint + (stateBestSellingProducts.value.currentPage + 1))\n        .then(({data}) => onSuccessFetch(stateBestSellingProducts.value, data))\n        .catch((response) => console.error(response));\n}\n\nconst fetchNewProducts = async () => {\n    await axios.get(stateNewProducts.value.endpoint + (stateNewProducts.value.currentPage + 1))\n        .then(({data}) => onSuccessFetch(stateNewProducts.value, data))\n        .catch((response) => console.error(response));\n}\n\nconst onSuccessFetch = (variable, data) => {\n    variable.data = variable.data.concat(data.result.data);\n    variable.total = data.result.total;\n    variable.currentPage = data.result.current_page;\n    variable.isShowLoadMore = (data.result.to !== data.result.total);\n    variable.isLoadMore = false;\n}\n</script>\n\n<template>\n    <Head :title=\"meta.title\" :description=\"meta.description\"/>\n    <div class=\"grid grid-cols-1 gap-4\">\n        <MainBanners v-if=\"banners.length\" :data=\"banners\" :lang=\"lang\"/>\n\n        <Categories v-if=\"categories.length\" :data=\"categories\" :lang=\"lang\"/>\n\n        <ProductsList :slider=\"true\"\n                      :lang=\"lang\"\n                      :data=\"stateBestSellingProducts.data\"\n                      :isLoadMore=\"stateBestSellingProducts.isLoadMore\"\n                      :isShowLoadMore=\"stateBestSellingProducts.isShowLoadMore\"\n                      @fetch=\"fetchBestSellingProducts\"\n                      heading=\"Найпопулярніші\"\n        />\n\n        <ProductsList :slider=\"true\"\n                      :lang=\"lang\"\n                      :data=\"stateNewProducts.data\"\n                      :isLoadMore=\"stateNewProducts.isLoadMore\"\n                      :isShowLoadMore=\"stateNewProducts.isShowLoadMore\"\n                      @fetch=\"fetchNewProducts\"\n                      heading=\"Останні надходження\"\n        />\n\n        <ProductsList :slider=\"true\"\n                      :lang=\"lang\"\n                      :data=\"stateAllProducts.data\"\n                      :isLoadMore=\"stateAllProducts.isLoadMore\"\n                      :isShowLoadMore=\"stateAllProducts.isShowLoadMore\"\n                      @fetch=\"fetchAllProducts\"\n                      heading=\"Усі товари\"\n        />\n\n        <Advantages v-if=\"advantages.length\" :lang=\"lang\" :data=\"advantages\"/>\n\n        <AllReviewsCarousel v-if=\"reviews.length\" :data=\"reviews\"/>\n\n        <Content v-if=\"options.text_home_page_ua || options.text_home_page_ru\"\n                 :data=\"lang === 'ua' ? options.text_home_page_ua : options.text_home_page_ru\"\n        />\n\n        <FaqComponent v-if=\"faqs.length\" :lang=\"lang\" :data=\"faqs\"/>\n\n        <Support v-if=\"!isLoading\"/>\n    </div>\n</template>\n"],"names":["__default__","__MACROS_defineComponent","MasterLayout","Content","defineAsyncComponent","Advantages","AllReviewsCarousel","__vitePreload","FaqComponent","Support","meta","props","stateNewProducts","ref","stateAllProducts","stateBestSellingProducts","onMounted","setShowLoadMore","product","fetchAllProducts","data","onSuccessFetch","response","fetchBestSellingProducts","fetchNewProducts","variable"],"mappings":"qjCAOcA,EAAAC,EAAA,CAAC,OAAQC,CAAY,CAAA,uMAK7BC,EAAUC,EAAqB,UAAM,OAAO,uBAA2B,EAAA,kBAAA,CAAC,EACxEC,EAAaD,EAAqB,UAAM,OAAO,0BAA8B,EAAA,kBAAA,CAAC,EAC9EE,EAAqBF,EAAqB,IAAKG,EAAA,IAAC,OAAO,kCAAsC,EAAC,kBAAA,CAAA,EAC9FC,EAAeJ,EAAqB,UAAM,OAAO,4BAAgC,EAAA,kBAAA,CAAC,EAClFK,EAAUL,EAAqB,UAAM,OAAO,uBAA2B,EAAA,kBAAA,CAAC,EAiBxEM,EAAO,CACT,MAAOC,EAAM,OAAS,KAAOA,EAAM,QAAQ,cAAgBA,EAAM,QAAQ,cACzE,YAAaA,EAAM,OAAS,KAAOA,EAAM,QAAQ,oBAAsBA,EAAM,QAAQ,mBACzF,EAEMC,EAAmBC,EAAI,CACzB,KAAM,CAAE,EACR,WAAY,GACZ,eAAgB,GAChB,YAAa,EACb,SAAU,oCACd,CAAC,EAEKC,EAAmBD,EAAI,CACzB,KAAM,CAAE,EACR,WAAY,GACZ,eAAgB,GAChB,YAAa,EACb,SAAU,uBACd,CAAC,EAEKE,EAA2BF,EAAI,CACjC,KAAM,CAAE,EACR,WAAY,GACZ,eAAgB,GAChB,YAAa,EACb,SAAU,oCACd,CAAC,EAEDG,EAAU,IAAM,CACZD,EAAyB,MAAM,KAAOJ,EAAM,oBAAoB,KAChEC,EAAiB,MAAM,KAAOD,EAAM,YAAY,KAChDG,EAAiB,MAAM,KAAOH,EAAM,YAAY,KAE5CA,EAAM,oBAAoB,eAAiBA,EAAM,oBAAoB,UACrEM,EAAgBF,EAAyB,KAAK,EAE9CJ,EAAM,YAAY,eAAiBA,EAAM,YAAY,UACrDM,EAAgBL,EAAiB,KAAK,EAEtCD,EAAM,YAAY,eAAiBA,EAAM,YAAY,UACrDM,EAAgBH,EAAiB,KAAK,CAE9C,CAAC,EAED,MAAMG,EAAmBC,GAAY,CACjCA,EAAQ,eAAiB,EAC7B,EAEMC,EAAmB,SAAY,CACjCL,EAAiB,MAAM,WAAa,GACpC,MAAM,MAAM,IAAIA,EAAiB,MAAM,UAAYA,EAAiB,MAAM,YAAc,EAAE,EACrF,KAAK,CAAC,CAAC,KAAAM,CAAI,IAAMC,EAAeP,EAAiB,MAAOM,CAAI,CAAC,EAC7D,MAAOE,GAAa,QAAQ,MAAMA,CAAQ,CAAC,CACpD,EAEMC,EAA2B,SAAY,CACzCR,EAAyB,MAAM,WAAa,GAC5C,MAAM,MAAM,IAAIA,EAAyB,MAAM,UAAYA,EAAyB,MAAM,YAAc,EAAE,EACrG,KAAK,CAAC,CAAC,KAAAK,CAAI,IAAMC,EAAeN,EAAyB,MAAOK,CAAI,CAAC,EACrE,MAAOE,GAAa,QAAQ,MAAMA,CAAQ,CAAC,CACpD,EAEME,EAAmB,SAAY,CACjC,MAAM,MAAM,IAAIZ,EAAiB,MAAM,UAAYA,EAAiB,MAAM,YAAc,EAAE,EACrF,KAAK,CAAC,CAAC,KAAAQ,CAAI,IAAMC,EAAeT,EAAiB,MAAOQ,CAAI,CAAC,EAC7D,MAAOE,GAAa,QAAQ,MAAMA,CAAQ,CAAC,CACpD,EAEMD,EAAiB,CAACI,EAAUL,IAAS,CACvCK,EAAS,KAAOA,EAAS,KAAK,OAAOL,EAAK,OAAO,IAAI,EACrDK,EAAS,MAAQL,EAAK,OAAO,MAC7BK,EAAS,YAAcL,EAAK,OAAO,aACnCK,EAAS,eAAkBL,EAAK,OAAO,KAAOA,EAAK,OAAO,MAC1DK,EAAS,WAAa,EAC1B"}
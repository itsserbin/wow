import T from"./Modal.69015628.js";import H from"./OptionsLayout.de073cbf.js";import{v as w,A as N,G as O,B as X,V as _,S as a,R as v,$ as f,P as h,L as I,K as g,M as d,O as r,Y as m,bc as U,x,X as u}from"./moment.e1708d83.js";import"./Form.dcf9b423.js";const G=m(" XML "),K={key:1},R=m(" \u0414\u043E\u0434\u0430\u0442\u0438 "),Y=["onClick"],q=["innerHTML"],z=["href"],J=["innerHTML"],Q=d("hr",{class:"my-1"},null,-1),W=["onClick"],ae={__name:"Index",setup(Z){const l=x("$swal"),i=x("$can"),b=w({products:[],title:null,description:null,category:null});x("$defaultLang");const e=N({data:[],currentPage:1,isLoading:!0,isActiveModal:!1,modalAction:"",item:{}});O(()=>{p(1)});const y=X(()=>e.value.isActiveModal?T:null),L=w([{label:"ID",key:"id"},{label:"\u041D\u0430\u0437\u0432\u0430",key:"title"},{label:"Slug",key:"slug"},{label:"\u041E\u043F\u0438\u0441",key:"description"},{label:"\u041E\u043D\u043E\u0432\u043B\u0435\u043D\u043E<hr class='my-1'>\u0421\u0442\u0432\u043E\u0440\u0435\u043D\u043E",key:"timestamps"},{label:"#",key:"actions"}]);function M(o){e.value.activeLang=o}function p(o){e.value.isLoading=!0,o&&(e.value.currentPage=o),axios.get(route("api.xmls.index",{page:e.value.currentPage})).then(n=>{Object.assign(e.value.data,n.data.result),e.value.isLoading=!1}).catch(n=>{console.log(n),e.value.isLoading=!1})}function k(o){i("destroy-xml")&&l({title:"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438?",icon:"warning",showCancelButton:!0}).then(n=>{n.isConfirmed&&axios.delete(route("api.xmls.destroy",o)).then(()=>{p(),e.value.isActiveModal&&c(),l({icon:"success",title:"Destroyed!"})}).catch(s=>{console.log(s),l({icon:"error",title:"Error!"})})})}function c(){e.value.isActiveModal=!e.value.isActiveModal}function C(o,n){i("edit-xml")&&axios.get(route("api.xmls.edit",o)).then(({data:s})=>{e.value.item=s.result,e.value.modalAction="edit",e.value.item.index=n,c()}).catch(s=>console.log(s))}function A(){i("edit-xml")&&axios.put(route("api.xmls.update",e.value.item.id),e.value.item).then(()=>{c(),p(),l({title:"Success!",icon:"success"})}).catch(o=>{console.log(o),l({title:"Error!",icon:"error"})})}function $(){i("create-xml")&&axios.post(route("api.xmls.create"),e.value.item).then(()=>{c(),e.value.item=b,p(),l({title:"Success!",icon:"success"})}).catch(o=>{console.log(o),l({title:"Error!",icon:"error"})})}function S(){e.value.modalAction==="edit"&&i("edit-xml")?A():e.value.modalAction==="create"&&i("create-xml")&&$()}function V(){i("create-xml")&&(Object.assign(e.value.item,b),e.value.modalAction="create",c())}return(o,n)=>{const s=u("loader-component"),B=u("button-component"),D=u("lang-tabs"),F=u("xcircle-component"),P=u("table-component"),j=u("pagination");return v(),_(H,{title:"XML"},{header:a(()=>[G]),default:a(()=>[e.value.isLoading?(v(),_(s,{key:0})):f("",!0),!e.value.isLoading&&h(i)("show-xml")?(v(),I("div",K,[h(i)("create-xml")?(v(),_(B,{key:0,type:"btn",onClick:V},{default:a(()=>[R]),_:1})):f("",!0),g(D,{onClickLang:M}),g(P,{headings:L,isSlotMode:!0,rows:e.value.data.data},{id:a(({data:t})=>[d("a",{href:"javascript:",onClick:E=>C(t.row.id,t.i)},r(t.row.id),9,Y)]),icon:a(({data:t})=>[d("div",{innerHTML:t.row.icon},null,8,q)]),slug:a(({data:t})=>[d("a",{href:o.route("xml.fb.get",t.row.slug),target:"_blank"},r(t.row.title),9,z),d("div",{innerHTML:t.row.icon},null,8,J)]),text:a(({data:t})=>[m(r(e.value.activeLang==="ua"?t.row.text.ua:e.value.activeLang==="ru"?t.row.text.ru:null),1)]),published:a(({data:t})=>[m(r(o.$filters.publishedStatus(t.row.published)),1)]),timestamps:a(({data:t})=>[m(r(o.$filters.dateFormat(t.row.updated_at))+" ",1),Q,m(" "+r(o.$filters.dateFormat(t.row.created_at)),1)]),actions:a(({data:t})=>[d("a",{href:"javascript:",onClick:E=>k(t.row.id)},[g(F)],8,W)]),_:1},8,["headings","rows"]),g(j,{pagination:e.value.data,"click-handler":p,modelValue:e.value.currentPage,"onUpdate:modelValue":n[0]||(n[0]=t=>e.value.currentPage=t)},null,8,["pagination","modelValue"]),(v(),_(U(h(y)),{item:e.value.item,onCloseModal:c,onSubmitForm:S,onDeclineForm:k},null,40,["item"]))])):f("",!0)]),_:1})}}};export{ae as default};

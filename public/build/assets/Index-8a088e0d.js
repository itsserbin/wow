import v from"./StatisticLayout-af991e7b.js";import n from"./Chart-8529e800.js";import k from"./Datepicker-1dfd351e.js";import{s as f,e as y}from"./index-7a810988.js";import{k as m,N as x,o as w,z as D,l as s,s as l,y as _,w as V,p as e,n as b,x as d,m as u,t as r}from"./index-a01126e2.js";import"./AuthenticatedLayout-704e8f94.js";import"./index.esm-02fff71f.js";import"./Logo-83ffc10f.js";import"./SidebarItem-446a46b0.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./chart-10c086bf.js";import"./isDark-c828c264.js";import"./vue-datepicker-3bdc29fb.js";import"./index-2cbe9ca3.js";const N={class:"grid grid-cols-1 gap-4"},B={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$={key:0,class:"block"},L=e("div",{class:"text-lg text-gray-800 leading-tight dark:text-gray-300"},"Витрати",-1),M=e("hr",{class:"my-1"},null,-1),C={key:1,class:"div"},O=e("div",{class:"text-lg text-gray-800 leading-tight dark:text-gray-300"},"Прибуток",-1),S=e("hr",{class:"my-1"},null,-1),j={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},z={key:0,class:"div"},E=e("div",{class:"text-lg text-gray-800 leading-tight dark:text-gray-300"},"Заявки",-1),I=e("hr",{class:"my-1"},null,-1),P={key:1,class:"div"},T=e("div",{class:"text-lg text-gray-800 leading-tight dark:text-gray-300"},"Маркетинг",-1),U=e("hr",{class:"my-1"},null,-1),et={__name:"Index",setup(q){const o=m({date:[],page:1}),i=x("$can"),a=m({costs:null,profits:null,orders:null,marketing:null});w(async()=>{o.value.date[0]=f(new Date),o.value.date[1]=y(new Date),await g()});const c=D(()=>{const t={};return o.value.date.length===2&&(t.date_start=o.value.date[0].toLocaleDateString(),t.date_end=o.value.date[1].toLocaleDateString()),t.page=o.value.page,t}),g=async()=>{a.value.isLoading=!0,await axios.get(route("api.statistics.costs.chart",c.value)).then(({data:t})=>a.value.costs=t.result).catch(t=>console.log(t)),await axios.get(route("api.statistics.profits.chart",c.value)).then(({data:t})=>a.value.profits=t.result).catch(t=>console.log(t)),await axios.get(route("api.statistics.orders.chart",c.value)).then(({data:t})=>a.value.orders=t.result).catch(t=>console.log(t)),await axios.get(route("api.statistics.marketing.chart",c.value)).then(({data:t})=>a.value.marketing=t.result).catch(t=>console.log(t))};return(t,h)=>(s(),l(v,{title:"Статистика"},{header:_(()=>[V(" Статистика ")]),default:_(()=>[e("div",N,[b(k,{modelValue:o.value.date,"onUpdate:modelValue":[h[0]||(h[0]=p=>o.value.date=p),g]},null,8,["modelValue"]),e("div",B,[d(i)("show-bookkeeping-costs")?(s(),u("div",$,[L,M,a.value.costs?(s(),l(n,{key:0,chartData:a.value.costs},null,8,["chartData"])):r("",!0)])):r("",!0),d(i)("show-bookkeeping-profits")?(s(),u("div",C,[O,S,a.value.profits?(s(),l(n,{key:0,chartData:a.value.profits},null,8,["chartData"])):r("",!0)])):r("",!0)]),e("div",j,[d(i)("show-bookkeeping-orders")?(s(),u("div",z,[E,I,a.value.orders?(s(),l(n,{key:0,chartData:a.value.orders},null,8,["chartData"])):r("",!0)])):r("",!0),d(i)("show-bookkeeping-marketing")?(s(),u("div",P,[T,U,a.value.marketing?(s(),l(n,{key:0,chartData:a.value.marketing},null,8,["chartData"])):r("",!0)])):r("",!0)])])]),_:1}))}};export{et as default};

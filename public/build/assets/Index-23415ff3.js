import{N as A,ae as V,k as F,z as y,o as B,l as i,s as n,y as u,w as _,v as M,t as p,x as c,m as N,p as h,J as P,n as I,a0 as L}from"./index-a01126e2.js";import{L as D}from"./Loader-ccf6e4ba.js";import{_ as E}from"./Button-dd1aed97.js";import{_ as b}from"./Paginate-01527c78.js";import{_ as z}from"./UploadImagesModal-452117b9.js";import S from"./List-cdf644df.js";import j from"./Modal-e667f61f.js";import J from"./ContentLayout-1276209e.js";import{s as g}from"./swal-03cac797.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./UploadImagesInput-5c733d39.js";import"./Label-20131f4c.js";import"./Modal-e072f216.js";import"./ImageCard-674c7c55.js";import"./XCircle-3c75bba8.js";import"./Form-67ffa991.js";import"./Card-d700085f.js";import"./Input-39294dfa.js";import"./AuthenticatedLayout-704e8f94.js";import"./index.esm-02fff71f.js";import"./Logo-83ffc10f.js";const f={async fetch(s){try{return(await axios.get(route("api.images.index",s))).data}catch(t){throw new Error(t.response.data)}},async destroy(s){try{return(await axios.delete(route("api.images.destroy",s))).data}catch(t){throw new Error(t.response.data)}},async update(s){try{return(await axios.put(route("api.images.update",s.id),s)).data}catch(t){throw new Error(t.response.data)}}},O={key:1,class:"grid grid-cols-1 gap-4"},R={class:"text-center"},da={__name:"Index",setup(s){const t=A("$can"),{t:m}=V(),a=F({imagesList:[],isActiveUploadModal:!1,isActiveImageModal:!1,imageUploadModal:[],imageModal:{id:null,src:null,alt:null},currentPage:1,isLoading:!0}),k=y(()=>a.value.isActiveUploadModal?z:null),C=y(()=>a.value.isActiveImageModal?j:null);B(async()=>await r());const v=()=>{a.value.isActiveUploadModal=!a.value.isActiveUploadModal},l=()=>{a.value.isActiveImageModal=!a.value.isActiveImageModal},$=e=>{l(),a.value.imageModal=e},U=async()=>{if(t("edit-images")){const{success:e}=await f.update(a.value.imageModal);e&&(l(),await g({icon:"success",title:m("swal.updated")}))}},x=async e=>{await w(e),l()},w=async e=>{if(t("destroy-images")&&(await g({title:m("swal.sure"),icon:"warning",showCancelButton:!0})).isConfirmed){a.value.isLoading=!0;const{success:d}=await f.destroy(e);d&&(await r(),await g({icon:"success",title:m("swal.destroyed")})),a.value.isLoading=!1}},r=async e=>{a.value.isLoading=!0,e&&(a.value.currentPage=e);const o=await f.fetch({page:a.value.currentPage});a.value.imagesList=o.success?o.result:[],a.value.isLoading=!1};return(e,o)=>(i(),n(J,{title:e.$t("images.page_title")},{header:u(()=>[_(M(e.$t("images.page_title")),1)]),default:u(()=>[a.value.isLoading?(i(),n(D,{key:0})):p("",!0),!a.value.isLoading&&c(t)("show-images")?(i(),N("div",O,[h("div",null,[c(t)("create-images")?(i(),n(E,{key:0,type:"btn",onClick:P(v,["prevent"])},{default:u(()=>[_(M(e.$t("add")),1)]),_:1},8,["onClick"])):p("",!0)]),I(S,{images:a.value.imagesList,onClickImage:$,onFetch:r,onDestroyImage:w},null,8,["images"]),h("div",R,[I(b,{pagination:a.value.imagesList,"click-handler":r,modelValue:a.value.currentPage,"onUpdate:modelValue":o[0]||(o[0]=d=>a.value.currentPage=d)},null,8,["pagination","modelValue"])])])):p("",!0),(i(),n(L(c(C)),{onCloseModal:l,onSubmitForm:U,onDeclineForm:x,image:a.value.imageModal,size:"large"},null,40,["image"])),(i(),n(L(c(k)),{onCloseModal:v,onOnUpload:r},null,32))]),_:1},8,["title"]))}};export{da as default};

import F from"./Chart.df14f4f6.js";import O from"./StatisticLayout.aa4de5c9.js";import{g as j}from"./app.ec5dc424.js";import{G as p,Y as A,H as T,ac as g,C as c,A as t,y as r,J as v,u as f,v as _,z as d,F as k,B as b,O as o,w as s,aP as w,D as i}from"./_plugin-vue_export-helper.f12554ed.js";import"./index.86214304.js";import"./Sidebar.620cebe0.js";const U=o(" \u041F\u0440\u0438\u0431\u0443\u0442\u043E\u043A "),z={key:1},E={class:"grid grid-cols-1 gap-4 mt-5"},G={class:"block"},H={class:"grid grid-cols-2 md:grid-cols-4 gap-4 my-5"},I={class:"grid grid-cols-2 md:grid-cols-4"},X={__name:"Index",setup(J){w("$swal"),w("$can");const n=p({profits:[],isLoading:!0}),l=p({date:new Date,last:"one-month",currentPage:1});p([]);const h=A(()=>{const a={};return l.value.date.length===2&&(a.date_start=l.value.date[0],a.date_end=l.value.date[1]),l.value.last&&(a.last=l.value.last),a.page=l.value.currentPage,route("api.statistics.profits.index",a)});T(()=>u());const $=g([{label:"\u0414\u0430\u0442\u0430",key:"date"},{label:"\u0412\u0438\u0442\u0440\u0430\u0442\u0438",key:"cost"},{label:"\u041E\u0431\u0435\u0440\u0442",key:"turnover"},{label:"\u041C\u0430\u0440\u0436\u0430",key:"marginality"},{label:"\u0427\u0438\u0441\u0442\u0438\u0439 \u043F\u0440\u0438\u0431\u0443\u0442\u043E\u043A",key:"clear_profit"},{label:"\u0412\u0438\u043D\u0435\u043D \u043F\u043E\u0441\u0442\u0430\u0447\u0430\u043B\u044C\u043D\u0438\u043A",key:"debt_supplier"},{label:"\u041F\u0440\u043E\u0434\u0430\u0436\u0456 \u043F\u043E\u0432\u0456\u0442\u0440\u044F",key:"sale_of_air_sum"},{label:"\u0421\u0435\u0440\u0435\u0434\u043D\u044F \u043C\u0430\u0440\u0436\u0430",key:"average_marginality"},{label:"\u0421\u0443\u043C\u0430 \u043F\u0435\u0440\u0435\u043E\u0434\u043E\u043F\u043B\u0430\u0442",key:"prepayment_sum"},{label:"\u0421\u0443\u043C\u0430 \u0437\u0430 \u043F\u043E\u0432\u0435\u0440\u043D\u0435\u043D\u043D\u044F \u0442\u043E\u0432\u0430\u0440\u0443",key:"refunds_sum"},{label:"\u041C\u0430\u0440\u0436\u0430 \u0437 \u0434\u043E\u0434.\u043F\u0440\u043E\u0434\u0430\u0436",key:"additional_sales_marginality_sum"},{label:"\u041E\u0431\u0435\u0440\u0442 \u0434\u043E\u0434.\u043F\u0440\u043E\u0434\u0430\u0436",key:"additional_sales_sum"}]),M=g([{label:"\u0412\u0435\u0441\u044C \u0447\u0430\u0441",key:null},{label:"\u041F\u043E\u0442\u043E\u0447\u043D\u0438\u0439 \u0442\u0438\u0436\u0434\u0435\u043D\u044C",key:"week"},{label:"\u041F\u043E\u0442\u043E\u0447\u043D\u0438\u0439 \u0442\u0430 \u043F\u043E\u043F\u0435\u0440\u0435\u0434\u043D\u0456 \u0442\u0438\u0436\u043D\u0456",key:"two-week"},{label:"\u041F\u043E\u0442\u043E\u0447\u043D\u0438\u0439 \u043C\u0456\u0441\u044F\u0446\u044C",key:"one-month"},{label:"7 \u0434\u043D\u0456\u0432",key:"7-days"},{label:"14 \u0434\u043D\u0456\u0432",key:"14-days"},{label:"30 \u0434\u043D\u0456\u0432",key:"30-days"},{label:"90 \u0434\u043D\u0456\u0432",key:"90-days"}]);function V(a){a?l.value.last=a:l.value={date:[],last:null,currentPage:1},u()}function P(a){l.value.last="range",u()}function u(){n.value.isLoading=!0,axios.get(h.value).then(a=>{Object.assign(n.value.profits,a.data),n.value.isLoading=!1}).catch(a=>{console.log(a),n.value.isLoading=!1})}return(a,m)=>{const L=i("loader-component"),B=i("label-component"),C=i("Datepicker"),D=i("button-component"),N=i("card-component"),S=i("table-component");return r(),c(O,{title:"\u041F\u0440\u0438\u0431\u0443\u0442\u043E\u043A"},{header:t(()=>[U]),default:t(()=>[n.value.isLoading?(r(),c(L,{key:0})):v("",!0),n.value.isLoading?v("",!0):(r(),f("div",z,[_("div",E,[_("div",G,[d(B,{value:"\u0424\u0456\u043B\u044C\u0442\u0440 \u043F\u043E \u0434\u0430\u0442\u0456"}),d(C,{modelValue:l.value.date,"onUpdate:modelValue":[m[0]||(m[0]=e=>l.value.date=e),P],class:"w-100",placeholder:"\u041E\u0431\u0435\u0440\u0456\u0442\u044C \u0434\u0430\u0442\u0443",autoApply:"",monthChangeOnScroll:!1,enableTimePicker:!1,range:"",locale:"ru"},null,8,["modelValue"])])]),_("div",H,[(r(!0),f(k,null,b(M,e=>(r(),c(D,{type:"btn",onClick:y=>V(e.key),active:e.key===l.value.last},{default:t(()=>[o(s(e.label),1)]),_:2},1032,["onClick","active"]))),256))]),d(F,{"chart-data":n.value.profits.chart},null,8,["chart-data"]),_("div",I,[(r(!0),f(k,null,b(n.value.profits.generalStat,(e,y)=>(r(),c(N,{class:"text-center",title:y,description:a.$filters.formatMoney(e)},null,8,["title","description"]))),256))]),d(S,{headings:$,rows:n.value.profits.result.data,isSlotMode:!0},{date:t(({data:e})=>[o(s(a.$filters.dateFormat(e.row.date)),1)]),costs:t(({data:e})=>[o(s(a.$filters.formatMoney(e.row.costs)),1)]),turnover:t(({data:e})=>[o(s(a.$filters.formatMoney(e.row.turnover)),1)]),marginality:t(({data:e})=>[o(s(a.$filters.formatMoney(e.row.marginality)),1)]),clear_profit:t(({data:e})=>[o(s(a.$filters.formatMoney(e.row.clear_profit)),1)]),average_marginality:t(({data:e})=>[o(s(a.$filters.formatMoney(e.row.average_marginality)),1)]),sale_of_air_sum:t(({data:e})=>[o(s(a.$filters.formatMoney(e.row.sale_of_air_sum)),1)]),debt_supplier:t(({data:e})=>[o(s(a.$filters.formatMoney(e.row.debt_supplier)),1)]),prepayment_sum:t(({data:e})=>[o(s(a.$filters.formatMoney(e.row.prepayment_sum)),1)]),refunds_sum:t(({data:e})=>[o(s(a.$filters.formatMoney(e.row.refunds_sum)),1)]),additional_sales_marginality_sum:t(({data:e})=>[o(s(a.$filters.formatMoney(e.row.additional_sales_marginality_sum)),1)]),additional_sales_sum:t(({data:e})=>[o(s(a.$filters.formatMoney(e.row.additional_sales_sum)),1)]),_:1},8,["headings","rows"]),d(j,{pagination:n.value.profits.result,"click-handler":u,modelValue:l.value.currentPage,"onUpdate:modelValue":m[1]||(m[1]=e=>l.value.currentPage=e)},null,8,["pagination","modelValue"])]))]),_:1})}}};export{X as default};

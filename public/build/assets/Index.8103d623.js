import F from"./Chart.abb18b9b.js";import O from"./StatisticLayout.aa4de5c9.js";import{g as j}from"./app.ec5dc424.js";import{G as p,Y as A,H as T,ac as g,C as m,A as t,y as s,J as v,u as f,v as _,z as d,F as k,B as b,O as o,w as r,aP as h,D as i}from"./_plugin-vue_export-helper.f12554ed.js";import"./index.86214304.js";import"./Sidebar.620cebe0.js";const U=o(" \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0437\u0430\u044F\u0432\u043E\u043A "),q={key:1},z={class:"grid grid-cols-1 gap-4 mt-5"},E={class:"block"},G={class:"grid grid-cols-2 md:grid-cols-4 gap-4 my-5"},H={class:"grid grid-cols-2 md:grid-cols-4"},X={__name:"Index",setup(I){h("$swal"),h("$can");const n=p({orders:[],isLoading:!0}),l=p({date:[],filter:null,last:"one-month",currentPage:1});p([]);const w=A(()=>{const a={};return l.value.date.length===2&&(a.date_start=l.value.date[0],a.date_end=l.value.date[1]),l.value.last&&(a.last=l.value.last),a.page=l.value.currentPage,route("api.statistics.orders.index",a)});T(()=>c());const $=g([{label:"\u0414\u0430\u0442\u0430",key:"date"},{label:"\u0412\u0441\u044C\u043E\u0433\u043E",key:"applications"},{label:"\u041F\u0435\u0440\u0435\u0434\u0430\u043D\u0456 \u043F\u043E\u0441\u0442\u0430\u0447\u0430\u043B\u044C\u043D\u0438\u043A\u0443",key:"transferred_to_supplier"},{label:"\u0412\u0438\u043C\u0430\u0433\u0430\u044E\u0442\u044C \u0443\u0442\u043E\u0447\u043D\u0435\u043D\u043D\u044F",key:"requires_clarification"},{label:"\u041E\u0447\u0456\u043A\u0443\u044E\u0442\u044C \u0432\u0456\u0434\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043D\u044F",key:"awaiting_dispatch"},{label:"\u041E\u0447\u0456\u043A\u0443\u044E\u0442\u044C \u043F\u0435\u0440\u0435\u0434\u043E\u043F\u043B\u0430\u0442\u0438",key:"awaiting_prepayment"},{label:"\u0412 \u0434\u043E\u0440\u043E\u0437\u0456",key:"on_the_road"},{label:"\u0412 \u043F\u0440\u043E\u0446\u0435\u0441\u0456",key:"in_process"},{label:"\u041D\u0430 \u043F\u043E\u0448\u0442\u0456",key:"at_the_post_office"},{label:"\u0412\u0438\u043A\u043E\u043D\u0430\u043D\u0456",key:"completed"},{label:"\u041F\u043E\u0432\u0435\u0440\u043D\u0435\u043D\u043D\u044F",key:"refunds"},{label:"\u0421\u043A\u0430\u0441\u043E\u0432\u0430\u043D\u0456",key:"cancel"},{label:"\u041D\u043E\u0432\u0456",key:"unprocessed"}]),M=g([{label:"\u0412\u0435\u0441\u044C \u0447\u0430\u0441",key:null},{label:"\u041F\u043E\u0442\u043E\u0447\u043D\u0438\u0439 \u0442\u0438\u0436\u0434\u0435\u043D\u044C",key:"week"},{label:"\u041F\u043E\u0442\u043E\u0447\u043D\u0438\u0439 \u0442\u0430 \u043F\u043E\u043F\u0435\u0440\u0435\u0434\u043D\u0456 \u0442\u0438\u0436\u043D\u0456",key:"two-week"},{label:"\u041F\u043E\u0442\u043E\u0447\u043D\u0438\u0439 \u043C\u0456\u0441\u044F\u0446\u044C",key:"one-month"},{label:"7 \u0434\u043D\u0456\u0432",key:"7-days"},{label:"14 \u0434\u043D\u0456\u0432",key:"14-days"},{label:"30 \u0434\u043D\u0456\u0432",key:"30-days"},{label:"90 \u0434\u043D\u0456\u0432",key:"90-days"}]);function V(a){a?l.value.last=a:l.value={date:[],filter:null,last:null,currentPage:1},c()}function P(){l.value.last="range",c()}function c(){n.value.isLoading=!0,axios.get(w.value).then(a=>{Object.assign(n.value.orders,a.data),n.value.isLoading=!1}).catch(a=>{console.log(a),n.value.isLoading=!1})}return(a,u)=>{const L=i("loader-component"),B=i("label-component"),C=i("Datepicker"),D=i("button-component"),N=i("card-component"),S=i("table-component");return s(),m(O,{title:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0437\u0430\u044F\u0432\u043E\u043A"},{header:t(()=>[U]),default:t(()=>[n.value.isLoading?(s(),m(L,{key:0})):v("",!0),n.value.isLoading?v("",!0):(s(),f("div",q,[_("div",z,[_("div",E,[d(B,{value:"\u0424\u0456\u043B\u044C\u0442\u0440 \u043F\u043E \u0434\u0430\u0442\u0456"}),d(C,{modelValue:l.value.date,"onUpdate:modelValue":[u[0]||(u[0]=e=>l.value.date=e),P],class:"w-100",locale:"ru",placeholder:"\u041E\u0431\u0435\u0440\u0456\u0442\u044C \u0434\u0430\u0442\u0443",autoApply:"",monthChangeOnScroll:!1,enableTimePicker:!1,range:"",utc:""},null,8,["modelValue"])])]),_("div",G,[(s(!0),f(k,null,b(M,e=>(s(),m(D,{type:"btn",onClick:y=>V(e.key),active:e.key===l.value.last},{default:t(()=>[o(r(e.label),1)]),_:2},1032,["onClick","active"]))),256))]),d(F,{"chart-data":n.value.orders.chart},null,8,["chart-data"]),_("div",H,[(s(!0),f(k,null,b(n.value.orders.generalStat,(e,y)=>(s(),m(N,{class:"text-center",title:y,description:e},null,8,["title","description"]))),256))]),d(S,{headings:$,rows:n.value.orders.result.data,isSlotMode:!0},{date:t(({data:e})=>[o(r(a.$filters.dateFormat(e.row.date)),1)]),costs:t(({data:e})=>[o(r(a.$filters.formatMoney(e.row.costs)),1)]),turnover:t(({data:e})=>[o(r(a.$filters.formatMoney(e.row.turnover)),1)]),marginality:t(({data:e})=>[o(r(a.$filters.formatMoney(e.row.marginality)),1)]),clear_profit:t(({data:e})=>[o(r(a.$filters.formatMoney(e.row.clear_profit)),1)]),average_marginality:t(({data:e})=>[o(r(a.$filters.formatMoney(e.row.average_marginality)),1)]),sale_of_air_sum:t(({data:e})=>[o(r(a.$filters.formatMoney(e.row.sale_of_air_sum)),1)]),debt_supplier:t(({data:e})=>[o(r(a.$filters.formatMoney(e.row.debt_supplier)),1)]),prepayment_sum:t(({data:e})=>[o(r(a.$filters.formatMoney(e.row.prepayment_sum)),1)]),refunds_sum:t(({data:e})=>[o(r(a.$filters.formatMoney(e.row.refunds_sum)),1)]),additional_sales_marginality_sum:t(({data:e})=>[o(r(a.$filters.formatMoney(e.row.additional_sales_marginality_sum)),1)]),additional_sales_sum:t(({data:e})=>[o(r(a.$filters.formatMoney(e.row.additional_sales_sum)),1)]),_:1},8,["headings","rows"]),d(j,{pagination:n.value.orders.result,"click-handler":c,modelValue:l.value.currentPage,"onUpdate:modelValue":u[1]||(u[1]=e=>l.value.currentPage=e)},null,8,["pagination","modelValue"])]))]),_:1})}}};export{X as default};

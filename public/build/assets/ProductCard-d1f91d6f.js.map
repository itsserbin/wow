{"version":3,"file":"ProductCard-d1f91d6f.js","sources":["../../../resources/js/Pages/Public/Components/ProductCard.vue"],"sourcesContent":["<script setup>\nimport {computed,ref} from \"vue\";\nimport {useStore} from \"vuex\";\nimport {useGtm} from \"@gtm-support/vue-gtm\";\nimport {swal} from '@/Includes/swal';\nimport {Link} from \"@inertiajs/inertia-vue3\";\nimport eventTracking from \"@/Includes/eventTracking\";\n\nconst props = defineProps({\n    product: Object,\n    lang: String,\n    textGoToProductCard: {\n        type: String,\n        default: 'Докладніше'\n    },\n    slider: {\n        type: Boolean,\n        default: false\n    }\n});\n\nconst store = useStore();\n\nconst gtm = useGtm();\nconst item = ref({\n    count: 1,\n    size: [],\n    color: [],\n    item_id: null,\n    src: typeof window !== 'undefined' ? window.location.href : null,\n    event_id: ''\n});\n\nconst discountPercentage = computed(() => (price, discount_price) => `- ${(((price - discount_price) * 100) / price).toFixed()}%`);\n\nconst uuidv4 = () => {\n    return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n    );\n}\n\nconst addToCard = async (id) => {\n    item.value.item_id = id;\n    item.value.event_id = uuidv4() + '_AddToCard' + '_' + new Date().getTime();\n    await axios.post(route('api.v1.cart.add', item.value))\n        .then(async () => {\n            store.commit('loadCart');\n            if (import.meta.env.MODE === 'production') {\n                try {\n                    eventTracking(\n                        'AddToCart',\n                        {\n                            \"value\": props.product.discount_price ? props.product.discount_price : props.product.price,\n                            \"currency\": \"UAH\",\n                            \"content_type\": \"product\",\n                            \"content_ids\": [item.value.item_id],\n                            \"content_name\": props.product.h1\n                        },\n                        item.value.event_id\n                    );\n\n                    gtm.trackEvent({\n                        event: 'add_product_to_cart',\n                        ecommerce: {\n                            items: [{\n                                item_name: props.product.h1,\n                                item_id: item.value.item_id,\n                                price: props.product.discount_price ? props.product.discount_price : props.product.price,\n                                quantity: 1\n                            }]\n                        }\n                    });\n                } catch (e) {\n                    console.log(e);\n                }\n            }\n            await swal({\n                icon: 'success',\n                title: 'Товар додано до вашого кошика!',\n                text: 'Ви можете оформити замовлення або продовжити покупки :)',\n                showCancelButton: true,\n                confirmButtonText: 'Оформити замовлення',\n                cancelButtonText: 'Продовжити покупки',\n\n            }).then((result) => {\n                if (result.isConfirmed && typeof window !== 'undefined') {\n                    window.location.href = route('checkout');\n                }\n            })\n\n        })\n        .catch(async () => {\n            await swal({\n                icon: 'error',\n                title: 'Виникла помилка',\n                text: 'Перевірте корректність данних'\n            })\n        });\n}\n</script>\n\n<template>\n    <div class=\"\n                    items-stretch\n                    flex\n                    flex-col\n                    no-underline\n                    border-[1px]\n                    border-secondary\n                    rounded-lg\n                    relative\n                    hover:scale-105\n                    transition-all\n                    duration-300\n                    h-full\n            \"\n    >\n        <div v-if=\"product.discount_price\"\n             class=\"\n                    absolute\n                    rounded-xl\n                    bg-secondary\n                    p-1\n                    top-1\n                    left-1\n                    text-[0.675rem]\n                    z-10\n                \"\n        >\n            {{ discountPercentage(product.price, product.discount_price) }}\n        </div>\n        <div>\n            <div class=\"w-full mx-auto\">\n                <Link :href=\"route('product',product.id)\">\n                    <picture v-if=\"product.preview\">\n                        <source :srcset=\"route('images.350',product.preview.webp_src)\"\n                                v-if=\"product.preview.webp_src\"\n                                type=\"image/webp\">\n\n                        <img :src=\"route('images.350',product.preview.src)\"\n                             :alt=\"product.h1[lang]\"\n                             class=\"object-cover w-full rounded-t-lg h-56 md:h-72 \"\n                        >\n                    </picture>\n                </Link>\n            </div>\n        </div>\n\n        <div class=\"\n                        flex\n                        flex-col\n                        items-center\n                        p-2\n                        md:p-4\n                        pt-0\n                        justify-between\n                    \"\n        >\n            <Link :href=\"route('product',product.id)\">\n\n                <h5 class=\"\n                            text-black\n                            mb-[15px]\n                            overflow-hidden\n                            font-bold\n                            text-center\n                            h-18\n                            md:h-12\n                            font-subheading\n                            text-base\n                        \"\n                >\n                    {{ product.h1[$page.props.lang] }}\n                </h5>\n\n            </Link>\n            <div class=\"text-sm text-gray-500 font-text w-full mb-3\">\n                <span v-for=\"size in product.sizes\">\n                    {{ size.title }}&nbsp;\n                </span>\n            </div>\n\n            <div class=\"card__price flex-col mr-auto font-subheading\">\n                <div v-if=\"!product.discount_price\"\n                     class=\"\n                                font-bold\n                                text-lg\n                                md:text-2xl\n                                text-black\n                             \"\n                >{{ product.price }} грн.\n                </div>\n\n                <div v-if=\"product.discount_price\" class=\"flex flex-col\">\n                    <div class=\"\n                                    text-[1rem]\n                                    font-medium\n                                    text-xs\n                                    md:text-base\n                                    line-through\n                                    text-[#A5A5A5]\n                        \">{{ product.price }} грн.\n                    </div>\n                    <div class=\"\n                                    font-bold\n                                    text-lg\n                                    md:text-2xl\n                                    text-[#ff0000]\n                        \">{{ product.discount_price }} грн.\n                    </div>\n                </div>\n                <a href=\"javascript:\"\n                   @click=\"addToCard(product.id)\"\n                   class=\"\n                            w-12\n                            h-12\n                            md:w-14\n                            md:h-14\n                            rounded-full\n                            flex\n                            justify-center\n                            items-center\n                            col-span-1\n                            absolute\n                            right-[-7px]\n                            bottom-[-7px]\n                            bg-button\n                            hover:bg-accent\n                            hover:scale-105\n                            transition-all\n                            duration-500\n                    \">\n                    <svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <ellipse cx=\"12.459\" cy=\"22.2084\" rx=\"1.625\" ry=\"1.625\" fill=\"white\"></ellipse>\n                        <circle cx=\"18.959\" cy=\"22.2084\" r=\"1.625\" fill=\"white\"></circle>\n                        <path\n                            d=\"M7.32572 7.04167L9.60348 17.2435C9.75655 17.9291 10.3649 18.4167 11.0674 18.4167H20.0919C20.7944 18.4167 21.4028 17.9291 21.5559 17.2435L23.4258 8.86852C23.635 7.93136 22.9221 7.04167 21.9618 7.04167H7.32572ZM7.32572 7.04167L6.59497 4.35616C6.41728 3.70315 5.82435 3.25 5.1476 3.25H2.16699\"\n                            stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\"></path>\n                    </svg>\n                </a>\n            </div>\n        </div>\n    </div>\n\n</template>\n\n<style>\n.product-card-swiper .swiper-button-prev {\n    left: 0;\n}\n\n.product-card-swiper .swiper-button-next {\n    right: 0;\n}\n\n.product-card-swiper .swiper-button-prev::after,\n.product-card-swiper .swiper-button-next::after {\n    font-size: 20px;\n}\n</style>\n"],"names":["store","useStore","gtm","useGtm","item","ref","discountPercentage","computed","price","discount_price","uuidv4","c","addToCard","id","eventTracking","props","e","swal","result"],"mappings":"o4DAqBMA,EAAQC,EAAQ,EAEhBC,EAAMC,EAAM,EACZC,EAAOC,EAAI,CACb,MAAO,EACP,KAAM,CAAE,EACR,MAAO,CAAE,EACT,QAAS,KACT,IAAK,OAAO,OAAW,IAAc,OAAO,SAAS,KAAO,KAC5D,SAAU,EACd,CAAC,EAEKC,EAAqBC,EAAS,IAAM,CAACC,EAAOC,IAAmB,OAAQD,EAAQC,GAAkB,IAAOD,GAAO,QAAS,IAAG,EAE3HE,EAAS,KACH,CAAC,GAAG,EAAI,KAAO,KAAO,KAAO,OAAO,QAAQ,SAAUC,IACzDA,EAAI,OAAO,gBAAgB,IAAI,WAAW,CAAC,CAAC,EAAE,CAAC,EAAI,IAAMA,EAAI,GAAG,SAAS,EAAE,CACpF,EAGMC,EAAY,MAAOC,GAAO,CAC5BT,EAAK,MAAM,QAAUS,EACrBT,EAAK,MAAM,SAAWM,EAAQ,EAAG,cAAqB,IAAI,OAAO,UACjE,MAAM,MAAM,KAAK,MAAM,kBAAmBN,EAAK,KAAK,CAAC,EAChD,KAAK,SAAY,CACdJ,EAAM,OAAO,UAAU,EAEnB,GAAI,CACAc,EACI,YACA,CACI,MAASC,EAAM,QAAQ,eAAiBA,EAAM,QAAQ,eAAiBA,EAAM,QAAQ,MACrF,SAAY,MACZ,aAAgB,UAChB,YAAe,CAACX,EAAK,MAAM,OAAO,EAClC,aAAgBW,EAAM,QAAQ,EACjC,EACDX,EAAK,MAAM,QACnC,EAEoBF,EAAI,WAAW,CACX,MAAO,sBACP,UAAW,CACP,MAAO,CAAC,CACJ,UAAWa,EAAM,QAAQ,GACzB,QAASX,EAAK,MAAM,QACpB,MAAOW,EAAM,QAAQ,eAAiBA,EAAM,QAAQ,eAAiBA,EAAM,QAAQ,MACnF,SAAU,CAC1C,CAA6B,CACJ,CACzB,CAAqB,CACJ,OAAQC,EAAP,CACE,QAAQ,IAAIA,CAAC,CAChB,CAEL,MAAMC,EAAK,CACP,KAAM,UACN,MAAO,iCACP,KAAM,0DACN,iBAAkB,GAClB,kBAAmB,sBACnB,iBAAkB,oBAElC,CAAa,EAAE,KAAMC,GAAW,CACZA,EAAO,aAAe,OAAO,OAAW,MACxC,OAAO,SAAS,KAAO,MAAM,UAAU,EAE3D,CAAa,CAEb,CAAS,EACA,MAAM,SAAY,CACf,MAAMD,EAAK,CACP,KAAM,QACN,MAAO,kBACP,KAAM,+BACtB,CAAa,CACb,CAAS,CACT"}
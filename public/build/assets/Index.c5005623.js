import j from"./StatisticLayout.0f895e4d.js";import{s as E,e as M,_ as S}from"./Datepicker.f60d9fe1.js";import U from"./Table.6a234e37.js";import{j as p,p as h,o as F,C as m,D as i,G as k,N as c,A as r,v as b,u as I,q as x,s as l,H as n,F as O,E as q,x as _}from"./index.e4375aa7.js";import"./app.2c2e52ca.js";import"./moment.9709ab41.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./lazyload.6866379a.js";import"./Logo.6d532cc3.js";const G=_(" \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0442\u043E\u0432\u0430\u0440\u0456\u0432 "),H={key:1,class:"grid grid-cols-1 gap-4"},T={class:"grid grid-cols-1 md:grid-cols-12 gap-4 mt-5"},z={class:"block col-span-2 text-center"},J=_(" \u041E\u0447\u0438\u0441\u0442\u0438\u0442\u0438 "),K={class:"block col-span-4"},Q={class:"block col-span-4"},R={class:"block col-span-2 text-center"},W=_(" \u041F\u043E\u0448\u0443\u043A "),X={class:"grid grid-cols-2 md:grid-cols-4"},Y={class:"text-center"},ue={__name:"Index",setup(Z){k("$swal");const V=k("$can"),t=p({data:[],products:[],chart:null,isLoading:!0}),v=p([]),a=p({date:[],currentPage:1}),g=h(()=>{let e=[];return t.value.products.forEach(o=>{e.push(o.id)}),e.join()}),L=h(()=>{const e={};return a.value.date.length===2&&(e.date_start=a.value.date[0].toLocaleDateString(),e.date_end=a.value.date[1].toLocaleDateString()),g.value&&(e.products=g.value),e.page=a.value.currentPage,e});F(()=>{a.value.date[0]=E(new Date),a.value.date[1]=M(new Date),u(),axios.get(route("api.products.list")).then(({data:e})=>v.value=e.result).catch(e=>console.log(e))});function C(){a.value.date=[],t.value.products=[],u()}function P({h1:e,id:o}){return e.ua?e.ua+` (${o})`:e.ru?e.ru+` (${o})`:o}function $(e){e&&(a.value.currentPage=e),u()}function y(){a.value.currentPage=1,u()}function u(){t.value.isLoading=!0,axios.get(route("api.statistics.products.index",L.value)).then(({data:e})=>{t.value.data=e,t.value.isLoading=!1}).catch(e=>{console.log(e),t.value.isLoading=!1})}return(e,o)=>{const w=c("loader-component"),d=c("label-component"),f=c("button-component"),D=c("multiselect"),N=c("card-component"),A=c("pagination");return r(),m(j,{title:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0442\u043E\u0432\u0430\u0440\u0456\u0432"},{header:i(()=>[G]),default:i(()=>[t.value.isLoading?(r(),m(w,{key:0})):b("",!0),!t.value.isLoading&&I(V)("show-bookkeeping-marketing")?(r(),x("div",H,[l("div",T,[l("div",z,[n(d,{value:"\xA0"}),n(f,{type:"button",onClick:C},{default:i(()=>[J]),_:1})]),l("div",K,[n(d,{value:"\u0424\u0456\u043B\u044C\u0442\u0440 \u043F\u043E \u0434\u0430\u0442\u0456"}),n(S,{modelValue:a.value.date,"onUpdate:modelValue":o[0]||(o[0]=s=>a.value.date=s)},null,8,["modelValue"])]),l("div",Q,[n(d,{value:"\u0424\u0456\u043B\u044C\u0442\u0440 \u043F\u043E \u043C\u0435\u043D\u0435\u0434\u0436\u0435\u0440\u0430\u043C"}),n(D,{modelValue:t.value.products,"onUpdate:modelValue":o[1]||(o[1]=s=>t.value.products=s),options:v.value,"custom-label":P,placeholder:"\u041E\u0431\u0435\u0440\u0456\u0442\u044C \u0442\u043E\u0432\u0430\u0440\u0438","track-by":"id",searchable:!0,"close-on-select":!1,multiple:""},null,8,["modelValue","options"])]),l("div",R,[n(d,{value:"\xA0"}),n(f,{type:"button",onClick:y},{default:i(()=>[W]),_:1})])]),l("div",X,[(r(!0),x(O,null,q(t.value.data.generalStat,(s,B)=>(r(),m(N,{class:"text-center",title:B,description:s||"0"},null,8,["title","description"]))),256))]),n(U,{data:t.value.data.result.data},null,8,["data"]),l("div",Y,[n(A,{pagination:t.value.data.result,"click-handler":$,modelValue:a.value.currentPage,"onUpdate:modelValue":o[2]||(o[2]=s=>a.value.currentPage=s)},null,8,["pagination","modelValue"])])])):b("",!0)]),_:1})}}};export{ue as default};

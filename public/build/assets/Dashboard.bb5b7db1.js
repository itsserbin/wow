import h from"./Chart.c8df88b3.js";import f from"./LastParams.1a91c023.js";import v from"./Indicators.ea79b91c.js";import _ from"./Table.9cc9fb26.js";import{A as c,G as p,B as g,V as l,S as u,X as k,R as o,P as x,L as b,K as y,$ as s,Y as B,x as $}from"./moment.e1708d83.js";import"./index.90dbbb6c.js";import"./app.296ce57f.js";const D=B(" Dashboard "),V={key:0},G={__name:"Dashboard",setup(C){const t=c({date:[],filter:null,last:"one-month",page:1}),e=c({table:null,chart:null,indicators:null}),i=$("$can");p(()=>n());const r=g(()=>{const a={};return t.value.filter&&(a.filter=t.value.filter),t.value.date.length===2&&(a.date_start=t.value.date[0],a.date_end=t.value.date[1]),t.value.last&&(a.last=t.value.last),a.page=t.value.page,a});function d(a){a?t.value.last=a:t.value={date:[],filter:null,last:null,page:1},n()}function n(){axios.get(route("api.statistics.orders.index",r.value)).then(({data:a})=>e.value.table=a.result.data).catch(a=>console.log(a)),axios.get(route("api.statistics.orders.chart",r.value)).then(({data:a})=>e.value.chart=a.result).catch(a=>console.log(a)),axios.get(route("api.statistics.orders.indicators",r.value)).then(({data:a})=>e.value.indicators=a.result).catch(a=>console.log(a))}return(a,L)=>{const m=k("auth-layout");return o(),l(m,{title:"Dashboard"},{header:u(()=>[D]),default:u(()=>[x(i)("show-bookkeeping-orders")?(o(),b("div",V,[y(f,{"active-item":t.value.last,onSortByLast:d},null,8,["active-item"]),e.value.chart?(o(),l(h,{key:0,chartData:e.value.chart},null,8,["chartData"])):s("",!0),e.value.indicators?(o(),l(v,{key:1,data:e.value.indicators},null,8,["data"])):s("",!0),e.value.table?(o(),l(_,{key:2,data:e.value.table},null,8,["data"])):s("",!0)])):s("",!0)]),_:1})}}};export{G as default};

import P from"./Chart.3d332806.js";import b from"./Table.5b8e7021.js";import y from"./StatisticLayout.b3b862e8.js";import D from"./Datepicker.c8c8c334.js";import{p as u,f as d,q as M,ag as N,ah as C,m as l,w as _,v,B as r,o,j as p,u as S,g as f,i as m,x as i,F as j,s as F,k as O}from"./vendor.aefaaf5e.js";import"./index.d515e462.js";import"./__commonjsHelpers__.488ed5c2.js";import"./app.95816afc.js";import"./vue.m.8e70aa70.js";import"./bootstrap.a62f1e2e.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./Logo.9cbb3071.js";const U=O(" \u041F\u0440\u0438\u0431\u0443\u0442\u043E\u043A "),q={key:1,class:"grid grid-cols-1 gap-4"},E={class:"block"},I={class:"grid grid-cols-2 md:grid-cols-4"},R={class:"text-center"},te={__name:"Index",setup(T){v("$swal");const h=v("$can"),e=u({profits:[],chart:null,isLoading:!0}),t=u({date:[],currentPage:1});u([]);const k=d(()=>{if(t.value.date.length===2)return{date_start:t.value.date[0].toLocaleDateString(),date_end:t.value.date[1].toLocaleDateString()}}),x=d(()=>t.value.last),g=d(()=>({...k.value,last:x.value,page:t.value.currentPage}));M(()=>{t.value.date[0]=N(new Date),t.value.date[1]=C(new Date),c()});function c(){e.value.isLoading=!0,axios.get(route("api.statistics.profits.index",g.value)).then(({data:a})=>{e.value.profits=a,e.value.isLoading=!1}).catch(a=>{console.log(a),e.value.isLoading=!1}),axios.get(route("api.statistics.profits.chart",g.value)).then(({data:a})=>e.value.chart=a.result).catch(a=>console.log(a))}return(a,s)=>{const V=r("loader-component"),L=r("label-component"),$=r("card-component"),w=r("pagination");return o(),l(y,{title:"\u041F\u0440\u0438\u0431\u0443\u0442\u043E\u043A"},{header:_(()=>[U]),default:_(()=>[e.value.isLoading?(o(),l(V,{key:0})):p("",!0),!e.value.isLoading&&S(h)("show-bookkeeping-profits")?(o(),f("div",q,[m("div",E,[i(L,{value:"\u0424\u0456\u043B\u044C\u0442\u0440 \u043F\u043E \u0434\u0430\u0442\u0456"}),i(D,{modelValue:t.value.date,"onUpdate:modelValue":[s[0]||(s[0]=n=>t.value.date=n),c]},null,8,["modelValue"])]),e.value.chart?(o(),l(P,{key:0,"chart-data":e.value.chart},null,8,["chart-data"])):p("",!0),m("div",I,[(o(!0),f(j,null,F(e.value.profits.generalStat,(n,B)=>(o(),l($,{class:"text-center",title:B,description:a.$filters.formatMoney(n)},null,8,["title","description"]))),256))]),i(b,{data:e.value.profits.result.data},null,8,["data"]),m("div",R,[i(w,{pagination:e.value.profits.result,"click-handler":c,modelValue:t.value.currentPage,"onUpdate:modelValue":s[1]||(s[1]=n=>t.value.currentPage=n)},null,8,["pagination","modelValue"])])])):p("",!0)]),_:1})}}};export{te as default};

import k from"./Chart.a6ba1a2e.js";import V from"./Table.0add0e1b.js";import L from"./Indicators.976b32e6.js";import $ from"./StatisticLayout.9cc76a37.js";import{s as w,e as P,_ as B}from"./Datepicker.17ad84a1.js";import{w as i,x as b,S as y,Q as d,K as p,X as _,H as u,F as s,P as m,B as D,y as N,z as v,J as o,L as C}from"./___vite-browser-external_commonjs-proxy.4f2b06be.js";import"./index.15d68b78.js";import"./app.d5d36829.js";const M=C(" \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0437\u0430\u044F\u0432\u043E\u043A "),S={key:1,class:"grid grid-cols-1 gap-4"},O={class:"block"},U={class:"text-center"},T={__name:"Index",setup(j){_("$swal");const g=_("$can"),a=i({orders:[],chart:null,indicators:null,isLoading:!0}),t=i({date:[],currentPage:1});i([]);const r=b(()=>{const e={};return t.value.date.length===2&&(e.date_start=t.value.date[0].toLocaleDateString(),e.date_end=t.value.date[1].toLocaleDateString()),e.page=t.value.currentPage,e});y(()=>{t.value.date[0]=w(new Date),t.value.date[1]=P(new Date),l()});function l(){a.value.isLoading=!0,axios.get(route("api.statistics.orders.index",r.value)).then(({data:e})=>{a.value.orders=e,a.value.isLoading=!1}).catch(e=>{console.log(e),a.value.isLoading=!1}),axios.get(route("api.statistics.orders.chart",r.value)).then(({data:e})=>a.value.chart=e.result).catch(e=>console.log(e)),axios.get(route("api.statistics.orders.indicators",r.value)).then(({data:e})=>a.value.indicators=e.result).catch(e=>console.log(e))}return(e,n)=>{const f=u("loader-component"),h=u("label-component"),x=u("pagination");return s(),d($,{title:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0437\u0430\u044F\u0432\u043E\u043A"},{header:p(()=>[M]),default:p(()=>[a.value.isLoading?(s(),d(f,{key:0})):m("",!0),!a.value.isLoading&&D(g)("show-bookkeeping-orders")?(s(),N("div",S,[v("div",O,[o(h,{value:"\u0424\u0456\u043B\u044C\u0442\u0440 \u043F\u043E \u0434\u0430\u0442\u0456"}),o(B,{modelValue:t.value.date,"onUpdate:modelValue":[n[0]||(n[0]=c=>t.value.date=c),l]},null,8,["modelValue"])]),a.value.chart?(s(),d(k,{key:0,"chart-data":a.value.chart},null,8,["chart-data"])):m("",!0),o(L,{data:a.value.indicators},null,8,["data"]),o(V,{data:a.value.orders.result.data},null,8,["data"]),v("div",U,[o(x,{pagination:a.value.orders.result,"click-handler":l,modelValue:t.value.currentPage,"onUpdate:modelValue":n[1]||(n[1]=c=>t.value.currentPage=c)},null,8,["pagination","modelValue"])])])):m("",!0)]),_:1})}}};export{T as default};

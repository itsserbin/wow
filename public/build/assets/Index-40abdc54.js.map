{"version":3,"file":"Index-40abdc54.js","sources":["../../../resources/js/Pages/Public/Reviews/Index.vue"],"sourcesContent":["<script setup>\nimport Breadcrumbs from './Breadcrumbs.vue'\nimport Card from './Card.vue';\nimport Loader from '@/Pages/Public/Components/Loader.vue'\nimport Button from '@/Pages/Public/Components/Button.vue'\nimport Head from \"@/Pages/Public/Components/Head.vue\";\nimport MasterLayout from \"@/Layouts/MasterLayout.vue\";\n\nimport {onMounted, ref} from \"vue\";\n\ndefineOptions({layout: MasterLayout})\n\nconst props = defineProps({\n    lang: String,\n    categories: Array,\n    options: Object,\n    pages: Array,\n    textLoadMore: {\n        type: String,\n        default: 'Завантажити ще'\n    },\n})\n\nconst state = ref({\n    reviews: [],\n    isLoadingMore: false,\n    showLoadMore: true,\n    currentPage: 0,\n    endpoint: '/api/v1/reviews/paginate-list?page='\n});\n\nonMounted(async () => {\n    await fetch();\n})\n\nconst fetch = async () => {\n    state.value.isLoadingMore = true;\n    axios.get(state.value.endpoint + (state.value.currentPage + 1))\n        .then(({data}) => {\n            state.value.isLoadingMore = false;\n            state.value.currentPage = data.result.current_page;\n            state.value.reviews = state.value.reviews.concat(data.result.data);\n            state.value.showLoadMore = (data.result.to !== data.result.total);\n        });\n}\n</script>\n\n<template>\n        <Head title=\"Відгуки\"/>\n\n        <div v-if=\"state.reviews.length\">\n            <Breadcrumbs :current-url=\"route().current\" :options=\"options\" :lang=\"lang\" title=\"Відгуки\"/>\n\n            <h1 class=\"font-bold text-black text-center text-[24px] mb-[15px]\">\n                Відгуки\n            </h1>\n            <Card v-for=\"item in state.reviews\" :item=\"item\"/>\n            <div class=\"text-center\" v-if=\"state.showLoadMore\">\n                <Loader v-if=\"state.isLoadingMore\"></Loader>\n                <Button v-if=\"!state.isLoadingMore\" @click=\"fetch\" type=\"button\">\n                    {{ textLoadMore }}\n                </Button>\n            </div>\n        </div>\n</template>\n"],"names":["__default__","__MACROS_defineComponent","MasterLayout","state","ref","onMounted","fetch","data"],"mappings":"+lCAUcA,EAAAC,EAAA,CAAC,OAAQC,CAAY,CAAA,kKAanC,MAAMC,EAAQC,EAAI,CACd,QAAS,CAAE,EACX,cAAe,GACf,aAAc,GACd,YAAa,EACb,SAAU,qCACd,CAAC,EAEDC,EAAU,SAAY,CAClB,MAAMC,EAAK,CACf,CAAC,EAED,MAAMA,EAAQ,SAAY,CACtBH,EAAM,MAAM,cAAgB,GAC5B,MAAM,IAAIA,EAAM,MAAM,UAAYA,EAAM,MAAM,YAAc,EAAE,EACzD,KAAK,CAAC,CAAC,KAAAI,CAAI,IAAM,CACdJ,EAAM,MAAM,cAAgB,GAC5BA,EAAM,MAAM,YAAcI,EAAK,OAAO,aACtCJ,EAAM,MAAM,QAAUA,EAAM,MAAM,QAAQ,OAAOI,EAAK,OAAO,IAAI,EACjEJ,EAAM,MAAM,aAAgBI,EAAK,OAAO,KAAOA,EAAK,OAAO,KACvE,CAAS,CACT"}
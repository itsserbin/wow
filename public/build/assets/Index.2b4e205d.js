import U from"./StatisticLayout.b5ba8b5f.js";import{A as _,B as k,G as j,v as A,V as m,S as c,R as r,$ as y,L as f,M as i,K as o,F as D,U as F,Y as d,O as h,x as V,X as s}from"./moment.e1708d83.js";const O=d(" \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0434\u043B\u044F \u043C\u0435\u043D\u0435\u0434\u0436\u0435\u0440\u0456\u0432 "),E={key:1},T={class:"grid grid-cols-1 md:grid-cols-12 gap-4 mt-5"},G={class:"block col-span-2 text-center"},I=d(" \u041E\u0447\u0438\u0441\u0442\u0438\u0442\u0438 "),K={class:"block col-span-4"},R={class:"block col-span-4"},X={class:"block col-span-2 text-center"},Y=d(" \u041F\u043E\u0448\u0443\u043A "),q={class:"grid grid-cols-2 md:grid-cols-4"},Q={__name:"Index",setup(z){V("$swal"),V("$can");const a=_({data:[],managers:[],isLoading:!0}),g=_([]),x=k(()=>{const e={};return t.value.date.length===2&&(e.date_start=t.value.date[0],e.date_end=t.value.date[1]),v.value&&(e.managers=v.value),e.page=t.value.currentPage,console.log(e),route("api.statistics.managers.index",e)}),v=k(()=>{let e=[];return a.value.managers.forEach(n=>{e.push(n.id)}),e.join()}),t=_({date:[],managers:[],currentPage:1});j(()=>{u(),axios.get(route("api.users.list.managers")).then(({data:e})=>g.value=e.result).catch(e=>console.log(e))});const L=A([{label:"\u0414\u0430\u0442\u0430",key:"date"},{label:"\u041D\u0430\u0434\u0456\u0439\u0448\u043B\u043E \u0437\u0430\u044F\u0432\u043E\u043A",key:"count_applications"},{label:"\u0412 \u043F\u0440\u043E\u0446\u0435\u0441\u0456",key:"in_process_applications"},{label:"\u0417\u0440\u043E\u0431\u043B\u0435\u043D\u043E \u0434\u043E\u0434.\u043F\u0440\u043E\u0434\u0430\u0436",key:"count_additional_sales"},{label:"\u0421\u043A\u0430\u0441\u043E\u0432\u0430\u043D\u0438\u0445",key:"canceled_applications"},{label:"\u041F\u043E\u0432\u0435\u0440\u043D\u0435\u043D\u044C",key:"returned_applications"},{label:"\u0412\u0438\u043A\u043E\u043D\u0430\u043D\u0438\u0445",key:"done_applications"},{label:"\u0417\u0430\u0433\u0430\u043B\u044C\u043D\u0438\u0439 \u0430\u043F\u0440\u0443\u0432",key:"total_applications"},{label:"\u041A\u0456\u043B\u044C\u043A\u0456\u0441\u0442\u044C \u0434\u043E\u0434.\u043F\u0440\u043E\u0434\u0430\u0436\u0456\u0432 \u043F\u043E\u0432\u0456\u0442\u0440\u044F",key:"count_sale_of_air"},{label:"\u0421\u0443\u043C\u0430 \u0434\u043E\u0434.\u043F\u0440\u043E\u0434\u0430\u0436\u0456\u0432 \u043F\u043E\u0432\u0456\u0442\u0440\u044F",key:"price_sale_of_air"},{label:"\u041F\u0440\u0438\u0431\u0443\u0442\u043E\u043A \u0437 \u0434\u043E\u0434.\u043F\u0440\u043E\u0434\u0430\u0436\u0456\u0432 \u043F\u043E\u0432\u0456\u0442\u0440\u044F",key:"total_sale_of_air"},{label:"\u0417\u0430\u0433\u0430\u043B\u044C\u043D\u0430 \u043C\u0430\u0440\u0436\u0430 \u0434\u043E\u0434.\u043F\u0440\u043E\u0434\u0430\u0436\u0456\u0432",key:"sum_additional_sales"},{label:"\u0421\u0443\u043C\u0430 \u0437\u0430 \u0437\u0430\u044F\u0432\u043A\u0438",key:"sum_price_applications"},{label:"\u0421\u0443\u043C\u0430 \u0437\u0430 \u0434\u043E\u0434.\u043F\u0440\u043E\u0434\u0430\u0436\u0456",key:"sum_price_additional_sales"},{label:"\u041A\u0456\u043B\u044C\u043A\u0456\u0441\u0442\u044C \u043F\u0435\u0440\u0435\u0434\u043E\u043F\u043B\u0430\u0442",key:"count_prepayments"},{label:"\u0421\u0443\u043C\u0430 \u0437\u0430 \u043F\u0435\u0440\u0435\u0434\u043E\u043F\u043B\u0430\u0442\u0438",key:"prepayments_amount"},{label:"\u0417\u0430\u0433\u0430\u043B\u044C\u043D\u0430 \u0441\u0443\u043C\u0430",key:"total_price"}]);function w(){t.value.managers=[],t.value.date=[],t.value.managers=[],a.value.managers=[],u()}function u(){a.value.isLoading=!0,axios.get(x.value).then(e=>{Object.assign(a.value.data,e.data),a.value.isLoading=!1}).catch(e=>{console.log(e),a.value.isLoading=!1})}return(e,n)=>{const C=s("loader-component"),p=s("label-component"),b=s("button-component"),P=s("Datepicker"),$=s("multiselect"),B=s("card-component"),S=s("table-component"),M=s("pagination");return r(),m(U,{title:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0434\u043B\u044F \u043C\u0435\u043D\u0435\u0434\u0436\u0435\u0440\u0456\u0432"},{header:c(()=>[O]),default:c(()=>[a.value.isLoading?(r(),m(C,{key:0})):y("",!0),a.value.isLoading?y("",!0):(r(),f("div",E,[i("div",T,[i("div",G,[o(p,{value:"\xA0"}),o(b,{type:"button",onClick:w},{default:c(()=>[I]),_:1})]),i("div",K,[o(p,{value:"\u0424\u0456\u043B\u044C\u0442\u0440 \u043F\u043E \u0434\u0430\u0442\u0456"}),o(P,{modelValue:t.value.date,"onUpdate:modelValue":n[0]||(n[0]=l=>t.value.date=l),class:"w-100",locale:"ru",placeholder:"\u041E\u0431\u0435\u0440\u0456\u0442\u044C \u0434\u0430\u0442\u0443",autoApply:"",monthChangeOnScroll:!1,enableTimePicker:!1,range:"",utc:""},null,8,["modelValue"])]),i("div",R,[o(p,{value:"\u0424\u0456\u043B\u044C\u0442\u0440 \u043F\u043E \u043C\u0435\u043D\u0435\u0434\u0436\u0435\u0440\u0430\u043C"}),o($,{modelValue:a.value.managers,"onUpdate:modelValue":n[1]||(n[1]=l=>a.value.managers=l),options:g.value,label:"name",placeholder:"\u041E\u0431\u0435\u0440\u0456\u0442\u044C \u043C\u0435\u043D\u0435\u0434\u0436\u0435\u0440\u0456\u0432","track-by":"id",searchable:!0,"close-on-select":!1,multiple:""},null,8,["modelValue","options"])]),i("div",X,[o(p,{value:"\xA0"}),o(b,{type:"button",onClick:u},{default:c(()=>[Y]),_:1})])]),i("div",q,[(r(!0),f(D,null,F(a.value.data.generalStat,(l,N)=>(r(),m(B,{class:"text-center",title:N,description:l},null,8,["title","description"]))),256))]),o(S,{headings:L,rows:a.value.data.result.data,isSlotMode:!0},{date:c(({data:l})=>[d(h(e.$filters.dateFormat(l.row.date)),1)]),costs:c(({data:l})=>[d(h(e.$filters.formatMoney(l.row.costs)),1)]),_:1},8,["headings","rows"]),o(M,{pagination:a.value.data.result,"click-handler":u,modelValue:t.value.currentPage,"onUpdate:modelValue":n[2]||(n[2]=l=>t.value.currentPage=l)},null,8,["pagination","modelValue"])]))]),_:1})}}};export{Q as default};

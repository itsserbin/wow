{"version":3,"file":"Consultation-f3569e91.js","sources":["../../../resources/js/Pages/Public/Components/Consultation.vue"],"sourcesContent":["<script setup>\nimport Modal from '@/Pages/Public/Components/Modal.vue';\nimport Input from '@/Pages/Public/Components/Input.vue';\nimport InputError from '@/Components/Form/InputError.vue';\n\nimport {ref} from \"vue\";\nimport {swal} from '@/Includes/swal';\nimport {vMaska} from \"@/Includes/maska\"\n\nconst state = ref({\n    show: false,\n    isShow: true,\n    isLoading: false,\n    item: {\n        name: null,\n        phone: null,\n        comment: null,\n    },\n    errors: []\n});\n\nsetTimeout(() => {\n    if (state.value.isShow) {\n        showModal();\n    }\n}, 60000)\n\nfunction showModal() {\n    state.value.show = !state.value.show;\n}\n\nasync function sendForm() {\n    state.value.isLoading = true;\n    await axios.post(route('api.v1.callback.create'), state.value.item)\n        .then(() => {\n            swal({\n                icon: 'success',\n                title: 'Ваш запит надіслано!',\n                text: 'Наш оператор зателефонує Вам протягом 5 хвилин',\n            })\n            state.value.item = {\n                phone: null,\n            };\n            state.value.isLoading = false;\n            showModal();\n        })\n        .catch(({response}) => {\n            swal({\n                icon: 'error',\n                title: 'Виникла помилка',\n                text: 'Перевірте корректність данних',\n            })\n            state.value.errors = response.data;\n            state.value.isLoading = false;\n        })\n}\n</script>\n\n<template>\n    <Modal @closeModal=\"showModal\"\n           v-if=\"state.show\"\n           size=\"medium\"\n           submit-button-text=\"Відправити\"\n           @submitForm=\"sendForm\"\n           @clickCancel=\"showModal\"\n           :is-loading=\"state.isLoading\"\n    >\n        <template #content>\n            <div class=\"text-[24px] text-[#000] font-bold mb-5 text-center\">Потрібна консультація?</div>\n            <div class=\"text-[20px] text-[#000] mb-5 text-center\">\n                Залиште свій номер телефону, і наш консультант вам зателефонує\n            </div>\n            <div class=\"block\">\n                <Input v-maska\n                       data-maska=\"+38 (0##) ###-##-##\"\n                       placeholder=\"+380\"\n                       v-model=\"state.item.phone\"\n                       type=\"tel\"\n                ></Input>\n                <InputError v-if=\"state.errors.phone\" v-for=\"error in state.errors.phone\" :message=\"error\"/>\n            </div>\n        </template>\n    </Modal>\n</template>\n"],"names":["state","ref","showModal","sendForm","swal","response"],"mappings":"oqBASA,MAAMA,EAAQC,EAAI,CACd,KAAM,GACN,OAAQ,GACR,UAAW,GACX,KAAM,CACF,KAAM,KACN,MAAO,KACP,QAAS,IACZ,EACD,OAAQ,CAAE,CACd,CAAC,EAED,WAAW,IAAM,CACTD,EAAM,MAAM,QACZE,GAER,EAAG,GAAK,EAER,SAASA,GAAY,CACjBF,EAAM,MAAM,KAAO,CAACA,EAAM,MAAM,IACpC,CAEA,eAAeG,GAAW,CACtBH,EAAM,MAAM,UAAY,GACxB,MAAM,MAAM,KAAK,MAAM,wBAAwB,EAAGA,EAAM,MAAM,IAAI,EAC7D,KAAK,IAAM,CACRI,EAAK,CACD,KAAM,UACN,MAAO,uBACP,KAAM,gDACtB,CAAa,EACDJ,EAAM,MAAM,KAAO,CACf,MAAO,IACvB,EACYA,EAAM,MAAM,UAAY,GACxBE,GACZ,CAAS,EACA,MAAM,CAAC,CAAC,SAAAG,CAAQ,IAAM,CACnBD,EAAK,CACD,KAAM,QACN,MAAO,kBACP,KAAM,+BACtB,CAAa,EACDJ,EAAM,MAAM,OAASK,EAAS,KAC9BL,EAAM,MAAM,UAAY,EACpC,CAAS,CACT"}
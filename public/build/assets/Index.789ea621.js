import{af as V,p as F,f as y,q as B,m as r,w as g,v as _,o as i,k as M,t as h,j as p,u as d,g as P,i as I,I as D,x as L,ac as k}from"./vendor.1f6af4a6.js";import{L as E,b as N,j as b}from"./app.6790c250.js";import{_ as j}from"./UploadImagesModal.5af07505.js";import S from"./List.a1380988.js";import q from"./Modal.561a07b4.js";import z from"./ContentLayout.d34e98eb.js";import"./__commonjsHelpers__.488ed5c2.js";import"./vue.m.8e70aa70.js";import"./bootstrap.36b92799.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./Logo.9b0c7f70.js";import"./Form.d8f60b3f.js";const v={async fetch(s){try{return(await axios.get(route("api.images.index",s))).data}catch(t){throw new Error(t.response.data)}},async destroy(s){try{return(await axios.delete(route("api.images.destroy",s))).data}catch(t){throw new Error(t.response.data)}},async update(s){try{return(await axios.put(route("api.images.update",s.id),s)).data}catch(t){throw new Error(t.response.data)}}},O={key:1,class:"grid grid-cols-1 gap-4"},R={class:"text-center"},ta={__name:"Index",setup(s){const t=_("$swal"),l=_("$can"),{t:u}=V(),a=F({imagesList:[],isActiveUploadModal:!1,isActiveImageModal:!1,imageUploadModal:[],imageModal:{id:null,src:null,alt:null},currentPage:1,isLoading:!0}),$=y(()=>a.value.isActiveUploadModal?j:null),C=y(()=>a.value.isActiveImageModal?q:null);B(()=>n());const f=()=>{a.value.isActiveUploadModal=!a.value.isActiveUploadModal},c=()=>{a.value.isActiveImageModal=!a.value.isActiveImageModal},U=e=>{c(),a.value.imageModal=e},x=async()=>{if(l("edit-images")){const{success:e}=await v.update(a.value.imageModal);e&&(c(),await t({icon:"success",title:u("swal.updated")}))}},A=async e=>{await w(e),c()},w=async e=>{if(l("destroy-images")&&(await t({title:u("swal.sure"),icon:"warning",showCancelButton:!0})).isConfirmed){a.value.isLoading=!0;const{success:m}=await v.destroy(e);m&&(await n(),await t({icon:"success",title:u("swal.destroyed")})),a.value.isLoading=!1}},n=async e=>{a.value.isLoading=!0,e&&(a.value.currentPage=e);const o=await v.fetch({page:a.value.currentPage});a.value.imagesList=o.success?o.result:[],a.value.isLoading=!1};return(e,o)=>(i(),r(z,{title:e.$t("images.page_title")},{header:g(()=>[M(h(e.$t("images.page_title")),1)]),default:g(()=>[a.value.isLoading?(i(),r(E,{key:0})):p("",!0),!a.value.isLoading&&d(l)("show-images")?(i(),P("div",O,[I("div",null,[d(l)("create-images")?(i(),r(N,{key:0,type:"btn",onClick:D(f,["prevent"])},{default:g(()=>[M(h(e.$t("add")),1)]),_:1},8,["onClick"])):p("",!0)]),L(S,{images:a.value.imagesList,onClickImage:U,onFetch:n,onDestroyImage:w},null,8,["images"]),I("div",R,[L(b,{pagination:a.value.imagesList,"click-handler":n,modelValue:a.value.currentPage,"onUpdate:modelValue":o[0]||(o[0]=m=>a.value.currentPage=m)},null,8,["pagination","modelValue"])])])):p("",!0),(i(),r(k(d(C)),{onCloseModal:c,onSubmitForm:x,onDeclineForm:A,image:a.value.imageModal,size:"large"},null,40,["image"])),(i(),r(k(d($)),{onCloseModal:f,onOnUpload:n},null,32))]),_:1},8,["title"]))}};export{ta as default};

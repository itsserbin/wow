import{r as v,g as r,i as e,l as a,j as n,z as _,v as f,F as p,x,s as T,u as B,M,ac as V,p as c,k as g,A as y,B as C,O as z}from"./app-c2ee199e.js";import P from"./BuyIn1ClickModal-85ebd710.js";import{u as U}from"./app-516251b0.js";import b from"./Button-6d44b6df.js";import{s as k}from"./swal-0ce974ee.js";import{a as j}from"./eventTracking-15479577.js";import"./maska-224de96c.js";import"./Modal-5acfb43f.js";import"./Loader-1b800268.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Input-7b46ca3f.js";import"./InputError-42f8fe1e.js";import"./Label-2927eee7.js";import"./vue-i18n.esm-bundler-a7d4834c.js";const N={class:"pt-[5%]"},S=e("hr",{class:"mb-4"},null,-1),$={class:"grid grid-cols-1 md:grid-cols-2 font-subheading"},D={class:"mb-4 mb-md-0 flex items-center justify-evenly flex-col"},E={key:0,class:"text-center"},F={class:"text-lg font-medium text-[#A5A5A5] line-through"},q={class:"font-bold text-[#ff0000] text-4xl"},G={key:1,class:"text-center"},H={class:"text-lg font-bold font-medium text-[#A5A5A5] text-[2.5rem]"},L={class:"grid gap-4"},O=e("hr",{class:"mt-4"},null,-1),J={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-5 font-subheading"},K={key:0},Q=e("div",{class:"w-full mb-2"},"Доступні розміри",-1),R={class:"flex pb-[20px]"},W={class:"mx-1"},X=["value","id","onUpdate:modelValue"],Y=["for"],Z={key:1},ee=e("div",{class:"w-100 mb-2"},"Доступні кольори",-1),te={class:"flex"},oe=["id","value","onUpdate:modelValue"],ce=["for"],ge={__name:"AddToCart",props:["product","eventIdAddToCard","eventIdPurchaseIn1Click"],setup(o){const t=o,A=U(),m=M(),{appContext:I}=V();I.config.globalProperties;const d=v({count:1,size:[],color:[],item_id:t.product.id,src:typeof window<"u"?window.location.href:null,event_id:t.eventIdAddToCard}),s=v({product:{id:null,discount_price:null,price:null,h1:null,sizes:[],colors:[]},isActiveBuyIn1ClickModal:!1,isAddToCart:!1});function h(){s.value.isActiveBuyIn1ClickModal=!s.value.isActiveBuyIn1ClickModal}function w(){s.value.isAddToCart||axios.post(route("api.v1.cart.add",d.value)).then(()=>{s.value.isAddToCart=!0;try{j({value:t.product.discount_price?t.product.discount_price:t.product.price,currency:"UAH",content_type:"product",content_ids:[d.value.item_id],content_name:t.product.h1},d.value.event_id),A.trackEvent({event:"add_product_to_cart",ecommerce:{items:[{item_name:t.product.h1,item_id:d.value.item_id,price:t.product.discount_price?t.product.discount_price:t.product.price,quantity:1}]}})}catch(l){console.log(l)}m.commit("loadCart"),k({icon:"success",title:"Товар додано до вашого кошика!",text:"Ви можете оформити замовлення або продовжити покупки :)",showCancelButton:!0,confirmButtonText:"Оформити замовлення",cancelButtonText:"Продовжити покупки"}).then(l=>{l.isConfirmed&&typeof window<"u"&&(window.location.href=route("checkout"))})}).catch(()=>{k({icon:"error",title:"Виникла помилка",text:"Перевірте корректність данних"})})}return(l,de)=>(c(),r(p,null,[e("div",N,[S,e("div",$,[e("div",D,[o.product.discount_price?(c(),r("div",E,[e("div",F,a(o.product.price)+" грн. ",1),e("div",q,a(o.product.discount_price)+" грн.",1)])):n("",!0),o.product.discount_price?n("",!0):(c(),r("div",G,[e("div",H,a(o.product.price)+" грн. ",1)]))]),e("div",L,[_(b,{onClick:w,type:"button"},{default:f(()=>[g(" До кошика ")]),_:1}),_(b,{onClick:h,type:"button"},{default:f(()=>[g(" Купити в 1 клік ")]),_:1})])]),O]),e("div",J,[o.product.sizes.length?(c(),r("div",K,[Q,e("ul",R,[(c(!0),r(p,null,x(o.product.sizes,i=>(c(),r("li",W,[y(e("input",{type:"checkbox",value:i.title,id:i.title,class:"hidden peer","onUpdate:modelValue":u=>d.value.size=u},null,8,X),[[C,d.value.size]]),e("label",{for:i.title,class:"inline-flex justify-center items-center mx-auto text-gray-500 bg-white rounded-lg border-2 border-gray-200 cursor-pointer peer-checked:border-blue-600 hover:text-gray-600 peer-checked:text-gray-600 hover:bg-gray-50 w-[40px] h-[40px]"},a(i.title),9,Y)]))),256))])])):n("",!0),o.product.colors.length?(c(),r("div",Z,[ee,e("div",te,[(c(!0),r(p,null,x(o.product.colors,i=>(c(),r("div",null,[y(e("input",{type:"checkbox",id:i.name,value:i.name,class:"hidden peer","onUpdate:modelValue":u=>d.value.color=u},null,8,oe),[[C,d.value.color]]),e("label",{for:i.name,style:z("background-color:"+i.hex),class:"inline-flex justify-center items-center mx-auto text-black-500 rounded-lg border-2 border-gray-200 cursor-pointer peer-checked:border-blue-600 hover:text-black peer-checked:text-gray-600 hover:bg-black w-[40px] h-[40px]"},null,12,ce)]))),256))])])):n("",!0)]),s.value.isActiveBuyIn1ClickModal?(c(),T(P,{key:0,onCloseModal:h,item:d.value,product:o.product,cart:B(m).state.list,eventIdPurchaseIn1Click:t.eventIdPurchaseIn1Click,eventIdAddToCard:t.eventIdAddToCard,isAddToCart:s.value.isAddToCart},null,8,["item","product","cart","eventIdPurchaseIn1Click","eventIdAddToCard","isAddToCart"])):n("",!0)],64))}};export{ge as default};

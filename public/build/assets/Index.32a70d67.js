import $ from"./Chart.eb2d9935.js";import P from"./Table.48673259.js";import w from"./StatisticLayout.de6fce46.js";import{s as y,e as D,_ as M}from"./Datepicker.e4c62f5d.js";import{y as d,z as b,G as B,a0 as l,W as _,S as o,Z as u,P as N,L as f,M as p,K as r,F as S,Y as C,X as F,D as g,$ as i}from"./___vite-browser-external_commonjs-proxy.bd54111c.js";import"./index.6f821958.js";import"./app.79417ded.js";const O=F(" \u041F\u0440\u0438\u0431\u0443\u0442\u043E\u043A "),U={key:1,class:"grid grid-cols-1 gap-4"},j={class:"block"},z={class:"grid grid-cols-2 md:grid-cols-4"},E={class:"text-center"},q={__name:"Index",setup(G){g("$swal");const v=g("$can"),t=d({profits:[],chart:null,isLoading:!0}),a=d({date:[],currentPage:1});d([]);const m=b(()=>{const e={};return a.value.date.length===2&&(e.date_start=a.value.date[0].toLocaleDateString(),e.date_end=a.value.date[1].toLocaleDateString()),a.value.last&&(e.last=a.value.last),e.page=a.value.currentPage,e});B(()=>{a.value.date[0]=y(new Date),a.value.date[1]=D(new Date),c()});function c(){t.value.isLoading=!0,axios.get(route("api.statistics.profits.index",m.value)).then(({data:e})=>{t.value.profits=e,t.value.isLoading=!1}).catch(e=>{console.log(e),t.value.isLoading=!1}),axios.get(route("api.statistics.profits.chart",m.value)).then(({data:e})=>t.value.chart=e.result).catch(e=>console.log(e))}return(e,s)=>{const h=i("loader-component"),k=i("label-component"),L=i("card-component"),V=i("pagination");return o(),l(w,{title:"\u041F\u0440\u0438\u0431\u0443\u0442\u043E\u043A"},{header:_(()=>[O]),default:_(()=>[t.value.isLoading?(o(),l(h,{key:0})):u("",!0),!t.value.isLoading&&N(v)("show-bookkeeping-profits")?(o(),f("div",U,[p("div",j,[r(k,{value:"\u0424\u0456\u043B\u044C\u0442\u0440 \u043F\u043E \u0434\u0430\u0442\u0456"}),r(M,{modelValue:a.value.date,"onUpdate:modelValue":[s[0]||(s[0]=n=>a.value.date=n),c]},null,8,["modelValue"])]),t.value.chart?(o(),l($,{key:0,"chart-data":t.value.chart},null,8,["chart-data"])):u("",!0),p("div",z,[(o(!0),f(S,null,C(t.value.profits.generalStat,(n,x)=>(o(),l(L,{class:"text-center",title:x,description:e.$filters.formatMoney(n)},null,8,["title","description"]))),256))]),r(P,{data:t.value.profits.result.data},null,8,["data"]),p("div",E,[r(V,{pagination:t.value.profits.result,"click-handler":c,modelValue:a.value.currentPage,"onUpdate:modelValue":s[1]||(s[1]=n=>a.value.currentPage=n)},null,8,["pagination","modelValue"])])])):u("",!0)]),_:1})}}};export{q as default};

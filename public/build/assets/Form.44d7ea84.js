import z from"./ItemsModal.6c7c4742.js";import{Q as m,K as g,L as l,z as N,D as O,A as B,u as p,bN as y,J as s,U as u,R as x,bb as D,O as T,W as L,M as k,V as c,Z as E,v as R}from"./_plugin-vue_export-helper.a5aa4da2.js";import"./ItemsForm.f318a510.js";const W=["width","height"],J=l("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"},null,-1),K=[J],Q={__name:"Pencil",props:{width:{type:String,default:"16"},height:{type:String,default:"16"}},setup(t){return(h,v)=>(m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",width:t.width,height:t.height,fill:"currentColor",class:"bi bi-pencil",viewBox:"0 0 16 16"},K,8,W))}},Y={class:"flex flex-col"},Z={class:"grid grid-cols-1 md:grid-cols-4"},q={class:"block mb-5 md:mr-5"},G={class:"block mb-5 md:mr-5"},H={class:"block mb-5 md:mr-5"},X={class:"block mb-7"},ee={class:"grid grid-cols-1 md:grid-cols-4 mb-5"},te={class:"block mb-5 md:mr-5"},oe={class:"block mb-5 md:mr-5"},le={class:"block mb-5 md:mr-5"},se={class:"block mb-5"},de={class:"grid grid-cols-1 md:grid-cols-2 mb-10"},ae={class:"block md:mr-5"},ne={class:"block mb-5"},ie={class:"block mb-5"},me={class:"block"},re={class:"block"},ue={class:"mb-7"},ce={class:"grid grid-cols-2"},ve={class:"block mb-5 mr-5"},be={class:"block mb-5"},ye={class:"grid grid-cols-2"},Ve={class:"block mb-5 mr-5"},he={class:"block mb-5"},fe={class:"grid grid-cols-2"},ke={class:"block mb-5 mr-5"},ge={class:"block mb-5"},pe={class:"block mb-5"},xe=E("Add product"),_e={key:0,class:"block mb-5"},we={class:"flex"},Me=["onClick"],Ue=["onClick"],Ce={class:"grid grid-cols-1 md:grid-cols-3 mt-5"},Ie={class:"flex justify-center"},Se=l("p",{class:"font-semibold text-l text-gray-900 dark:text-white"}," Total count:\xA0 ",-1),Ae={class:"text-l text-gray-900 dark:text-white"},Pe={class:"flex justify-center"},je=l("p",{class:"font-semibold text-l text-gray-900 dark:text-white"}," Total price:\xA0 ",-1),Fe={class:"text-l text-gray-900 dark:text-white"},$e={class:"flex justify-center"},ze=l("p",{class:"font-semibold text-l text-gray-900 dark:text-white"}," Promo-code:\xA0 ",-1),Ne={class:"text-l text-gray-900 dark:text-white"},Te={__name:"Form",props:["order","statuses","paymentMethods"],emits:["submitItemForm"],setup(t,{emit:h}){const v=t,f=R("$swal"),n=N({showItemsModal:!1,itemsModalAction:"",item:{count:1,size:"",color:""},statuses:[],managers:[],paymentMethods:[]});O(()=>{C();for(const[a,e]of Object.entries(v.statuses))n.value.statuses.push({key:e,value:e});for(const[a,e]of Object.entries(v.paymentMethods))n.value.paymentMethods.push({key:e,value:e})});const _=B(()=>n.value.showItemsModal?z:null),w=p([{label:"Title",key:"title"},{label:"Count",key:"count"},{label:"Price",key:"sale_price"},{label:"Sum",key:"total_price"},{label:"Resale",key:"resale"},{label:"Discount",key:"discount"},{label:"Vendor code",key:"vendor_code"},{label:"#",key:"actions"}]),V=p([{key:0,value:"No"},{key:1,value:"Yes"}]);function M(){n.value.itemsModalAction==="create"?y.post(route("api.order-items.add",v.order.id),n.value.item).then(({data:a})=>{b(),h("submitItemForm",a.result)}).catch(a=>console.log(a)):n.value.itemsModalAction==="edit"&&y.put(route("api.order-items.update",n.value.item.id),n.value.item).then(({data:a})=>{b(),h("submitItemForm",a.result)}).catch(a=>console.log(a))}function U(){b(),n.value.itemsModalAction="create"}function b(){n.value.showItemsModal=!n.value.showItemsModal}function C(){y.get(route("api.users.list.managers")).then(({data:a})=>{a.result.length&&a.result.forEach((e,d)=>{n.value.managers.push({key:e,value:d})})}).catch(a=>console.log(a))}function I(a,e){f({title:"Are you sure?",icon:"warning",showCancelButton:!0}).then(d=>{d.isConfirmed&&y.delete(route("api.order-items.destroy",{item_id:a,order_id:v.order.id})).then(()=>{v.order.items.splice(e,1),f({title:"Success",icon:"success"})}).catch(i=>{console.log(i),f({title:"Error",icon:"error"})})})}function S(a){b(),n.value.itemsModalAction="edit",y.get(route("api.order-items.edit",a)).then(({data:e})=>n.value.item=e.result).catch(e=>console.log(e))}return(a,e)=>{const d=c("label-component"),i=c("input-component"),r=c("select-component"),A=c("textarea-component"),P=c("button-component"),j=c("xcircle-component"),F=c("table-component");return m(),g("form",Y,[l("div",Z,[l("div",q,[s(d,{value:"First name"}),s(i,{modelValue:t.order.first_name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.order.first_name=o),type:"text"},null,8,["modelValue"])]),l("div",G,[s(d,{value:"Last name"}),s(i,{modelValue:t.order.last_name,"onUpdate:modelValue":e[1]||(e[1]=o=>t.order.last_name=o),type:"text"},null,8,["modelValue"])]),l("div",H,[s(d,{value:"Middle name"}),s(i,{modelValue:t.order.middle_name,"onUpdate:modelValue":e[2]||(e[2]=o=>t.order.middle_name=o),type:"text"},null,8,["modelValue"])]),l("div",X,[s(d,{value:"Phone"}),s(i,{modelValue:t.order.phone,"onUpdate:modelValue":e[3]||(e[3]=o=>t.order.phone=o),type:"text"},null,8,["modelValue"])])]),l("div",ee,[l("div",te,[s(d,{value:"Order status"}),s(r,{modelValue:t.order.status,"onUpdate:modelValue":e[4]||(e[4]=o=>t.order.status=o),options:n.value.statuses},null,8,["modelValue","options"])]),l("div",oe,[s(d,{value:"Manager"}),s(r,{modelValue:t.order.manager_id,"onUpdate:modelValue":e[5]||(e[5]=o=>t.order.manager_id=o),options:n.value.managers},null,8,["modelValue","options"])]),l("div",le,[s(d,{value:"Payment methods"}),s(r,{modelValue:t.order.payment_method,"onUpdate:modelValue":e[6]||(e[6]=o=>t.order.payment_method=o),options:n.value.paymentMethods},null,8,["modelValue","options"])]),l("div",se,[s(d,{value:"Parcel reminder"}),s(r,{modelValue:t.order.parcel_reminder,"onUpdate:modelValue":e[7]||(e[7]=o=>t.order.parcel_reminder=o),options:V},null,8,["modelValue","options"])])]),l("div",de,[l("div",ae,[l("div",ne,[s(d,{value:"City"}),s(i,{modelValue:t.order.city,"onUpdate:modelValue":e[8]||(e[8]=o=>t.order.city=o),type:"text"},null,8,["modelValue"])]),l("div",ie,[s(d,{value:"Post office"}),s(i,{modelValue:t.order.postal_office,"onUpdate:modelValue":e[9]||(e[9]=o=>t.order.postal_office=o),type:"text"},null,8,["modelValue"])]),l("div",me,[s(d,{value:"Waybill"}),s(i,{modelValue:t.order.waybill,"onUpdate:modelValue":e[10]||(e[10]=o=>t.order.waybill=o),type:"text"},null,8,["modelValue"])])]),l("div",re,[s(d,{value:"Comment"}),s(A,{rows:"10",modelValue:t.order.comment,"onUpdate:modelValue":e[11]||(e[11]=o=>t.order.comment=o)},null,8,["modelValue"])])]),l("div",ue,[l("div",ce,[l("div",ve,[s(d,{value:"Sale of air"}),s(r,{modelValue:t.order.sale_of_air,"onUpdate:modelValue":e[12]||(e[12]=o=>t.order.sale_of_air=o),options:V},null,8,["modelValue","options"])]),l("div",be,[s(d,{value:"Sum sale of air"}),t.order.sale_of_air?(m(),u(i,{key:0,modelValue:t.order.sale_of_air_sum,"onUpdate:modelValue":e[13]||(e[13]=o=>t.order.sale_of_air_sum=o),type:"number"},null,8,["modelValue"])):(m(),u(i,{key:1,modelValue:t.order.sale_of_air_sum,"onUpdate:modelValue":e[14]||(e[14]=o=>t.order.sale_of_air_sum=o),type:"number",disabled:""},null,8,["modelValue"]))])]),l("div",ye,[l("div",Ve,[s(d,{value:"Prepayment"}),s(r,{modelValue:t.order.prepayment,"onUpdate:modelValue":e[15]||(e[15]=o=>t.order.prepayment=o),options:V},null,8,["modelValue","options"])]),l("div",he,[s(d,{value:"Sum prepayment"}),t.order.prepayment?(m(),u(i,{key:0,modelValue:t.order.prepayment_sum,"onUpdate:modelValue":e[16]||(e[16]=o=>t.order.prepayment_sum=o),type:"number"},null,8,["modelValue"])):(m(),u(i,{key:1,modelValue:t.order.prepayment_sum,"onUpdate:modelValue":e[17]||(e[17]=o=>t.order.prepayment_sum=o),type:"number",disabled:""},null,8,["modelValue"]))])]),l("div",fe,[l("div",ke,[s(d,{value:"Discount"}),s(r,{modelValue:t.order.discount,"onUpdate:modelValue":e[18]||(e[18]=o=>t.order.discount=o),options:V},null,8,["modelValue","options"])]),l("div",ge,[s(d,{value:"Sum discount"}),t.order.discount?(m(),u(i,{key:0,modelValue:t.order.discount_sum,"onUpdate:modelValue":e[19]||(e[19]=o=>t.order.discount_sum=o),type:"number"},null,8,["modelValue"])):(m(),u(i,{key:1,modelValue:t.order.discount_sum,"onUpdate:modelValue":e[20]||(e[20]=o=>t.order.discount_sum=o),type:"number",disabled:""},null,8,["modelValue"]))])])]),l("div",pe,[s(P,{type:"button",onClick:U},{default:x(()=>[xe]),_:1}),(m(),u(D(T(_)),{item:n.value.item,size:"medium",onCloseModal:b,onSubmitItemForm:M},null,40,["item"]))]),t.order.items.length?(m(),g("div",_e,[s(F,{isSlotMode:!0,rows:t.order.items,headings:w},{actions:x(({data:o})=>[l("div",we,[l("a",{href:"javascript:",class:"md:mr-3",onClick:$=>S(o.row.id,o.i)},[s(Q)],8,Me),l("a",{href:"javascript:",onClick:$=>I(o.row.id,o.i)},[s(j)],8,Ue)])]),_:1},8,["rows","headings"])])):L("",!0),l("div",Ce,[l("div",Ie,[Se,l("p",Ae,k(t.order.total_count),1)]),l("div",Pe,[je,l("p",Fe,k(t.order.total_price),1)]),l("div",$e,[ze,l("p",Ne,k(t.order.promo_code?t.order.promo_code:"None"),1)])])])}}};export{Te as default};

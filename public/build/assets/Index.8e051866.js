import y from"./Chart.6ff250a4.js";import P from"./Table.f84613b1.js";import $ from"./Indicators.a5cbceb3.js";import B from"./StatisticLayout.de6fce46.js";import b from"./LastParams.439b145e.js";import{y as u,z as w,G as C,a0 as d,W as p,S as r,Z as m,P as N,L as D,M as v,K as o,X as S,D as _,$ as i}from"./___vite-browser-external_commonjs-proxy.bd54111c.js";import"./index.2cef5c13.js";import"./app.ca178ea4.js";const M=S(" \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0437\u0430\u044F\u0432\u043E\u043A "),T={key:1},U={class:"grid grid-cols-1 gap-4 mt-5"},j={class:"block"},X={__name:"Index",setup(z){_("$swal");const g=_("$can"),a=u({orders:[],chart:null,indicators:null,indicators2:null,isLoading:!0}),t=u({date:[],filter:null,last:"one-month",currentPage:1});u([]);const l=w(()=>{const e={};return t.value.date.length===2&&(e.date_start=t.value.date[0],e.date_end=t.value.date[1]),t.value.last&&(e.last=t.value.last),e.page=t.value.currentPage,e});C(()=>n());function f(e){e?t.value.last=e:t.value={date:[],filter:null,last:null,currentPage:1},n()}function h(){t.value.last="range",n()}function n(){a.value.isLoading=!0,axios.get(route("api.statistics.orders.index",l.value)).then(({data:e})=>{a.value.orders=e,a.value.isLoading=!1}).catch(e=>{console.log(e),a.value.isLoading=!1}),axios.get(route("api.statistics.orders.chart",l.value)).then(({data:e})=>a.value.chart=e.result).catch(e=>console.log(e)),axios.get(route("api.statistics.orders.indicators",l.value)).then(({data:e})=>a.value.indicators=e.result).catch(e=>console.log(e)),axios.get(route("api.statistics.orders.indicators2",l.value)).then(({data:e})=>a.value.indicators2=e.result).catch(e=>console.log(e))}return(e,s)=>{const k=i("loader-component"),x=i("label-component"),V=i("Datepicker"),L=i("pagination");return r(),d(B,{title:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0437\u0430\u044F\u0432\u043E\u043A"},{header:p(()=>[M]),default:p(()=>[a.value.isLoading?(r(),d(k,{key:0})):m("",!0),!a.value.isLoading&&N(g)("show-bookkeeping-orders")?(r(),D("div",T,[v("div",U,[v("div",j,[o(x,{value:"\u0424\u0456\u043B\u044C\u0442\u0440 \u043F\u043E \u0434\u0430\u0442\u0456"}),o(V,{modelValue:t.value.date,"onUpdate:modelValue":[s[0]||(s[0]=c=>t.value.date=c),h],class:"w-100",locale:"ru",placeholder:"\u041E\u0431\u0435\u0440\u0456\u0442\u044C \u0434\u0430\u0442\u0443",autoApply:"",monthChangeOnScroll:!1,enableTimePicker:!1,range:"",utc:""},null,8,["modelValue"])])]),o(b,{"active-item":t.value.last,onSortByLast:f},null,8,["active-item"]),a.value.chart?(r(),d(y,{key:0,"chart-data":a.value.chart},null,8,["chart-data"])):m("",!0),o($,{data:a.value.indicators},null,8,["data"]),o(P,{data:a.value.orders.result.data},null,8,["data"]),o(L,{pagination:a.value.orders.result,"click-handler":n,modelValue:t.value.currentPage,"onUpdate:modelValue":s[1]||(s[1]=c=>t.value.currentPage=c)},null,8,["pagination","modelValue"])])):m("",!0)]),_:1})}}};export{X as default};

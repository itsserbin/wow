{"version":3,"file":"Index-59aa642c.js","sources":["../../../resources/js/Repositories/OptionsRepository.js","../../../resources/js/Pages/Admin/Options/Main/Index.vue"],"sourcesContent":["export default {\n    main() {\n        return {\n            async index() {\n                try {\n                    const response = await axios.get(route('api.options.main.index'));\n                    return response.data;\n                } catch (error) {\n                    throw new Error(error.response.data);\n                }\n            },\n            async update(params) {\n                try {\n                    const response = await  axios.put(route('api.options.main.update'), params);\n                    return response.data;\n                } catch (error) {\n                    throw new Error(error.response.data);\n                }\n            },\n        }\n    },\n    // async fetch(params) {\n    //     try {\n    //         const response = await axios.get(route('api.categories.index', params));\n    //         return response.data;\n    //     } catch (error) {\n    //         throw new Error(error.response.data.message);\n    //     }\n    // },\n    // async update(item) {\n    //     try {\n    //         const response = await axios.put(route('api.categories.update', item.id), item);\n    //         return response.data;\n    //     } catch (error) {\n    //         return error.response.data;\n    //     }\n    // },\n    // async edit(id) {\n    //     try {\n    //         const response = await axios.get(route('api.categories.edit', id));\n    //         return response.data;\n    //     } catch (error) {\n    //         return error.response.data;\n    //     }\n    // },\n}\n","<script setup>\nimport OptionsLayout from '@/Pages/Admin/Options/OptionsLayout.vue';\nimport Form from '@/Pages/Admin/Options/Main/Form.vue';\nimport Loader from '@/Components/Loader.vue';\n\nimport {inject, onMounted, ref} from \"vue\";\nimport OptionsRepository from \"@/Repositories/OptionsRepository\";\nimport {useI18n} from 'vue-i18n';\nimport {swal} from \"@/Includes/swal\";\n\nconst can = inject('$can');\nconst {t} = useI18n();\n\nconst state = ref({\n    isLoading: false,\n    options: {}\n});\n\nonMounted(() => fetch());\n\nconst fetch = async () => {\n    state.value.isLoading = true;\n    const data = await OptionsRepository.main().index();\n    if (data.success) {\n        state.value.options = data.result;\n    }\n    state.value.isLoading = false;\n}\n\nconst onUpdate = async () => {\n    state.value.isLoading = true;\n    const data = await OptionsRepository.main().update(state.value.options);\n    if (data.success) {\n        await swal({\n            title: t('swal.updated'),\n            icon: 'success'\n        });\n    } else {\n        console.log(data);\n        await swal({\n            title: t('swal.error'),\n            icon: 'error',\n        });\n    }\n    state.value.isLoading = false;\n}\n</script>\n\n<template>\n    <OptionsLayout>\n        <Loader v-if=\"state.isLoading\"/>\n        <Form :options=\"state.options\" @submitForm=\"onUpdate\"\n              v-if=\"can('show-main-options') && !state.isLoading\"/>\n    </OptionsLayout>\n</template>\n"],"names":["OptionsRepository","error","params","can","inject","t","useI18n","state","ref","onMounted","fetch","data","onUpdate","swal"],"mappings":"imBAAA,MAAeA,EAAA,CACX,MAAO,CACH,MAAO,CACH,MAAM,OAAQ,CACV,GAAI,CAEA,OADiB,MAAM,MAAM,IAAI,MAAM,wBAAwB,CAAC,GAChD,IACnB,OAAQC,EAAP,CACE,MAAM,IAAI,MAAMA,EAAM,SAAS,IAAI,CACtC,CACJ,EACD,MAAM,OAAOC,EAAQ,CACjB,GAAI,CAEA,OADiB,MAAO,MAAM,IAAI,MAAM,yBAAyB,EAAGA,CAAM,GAC1D,IACnB,OAAQD,EAAP,CACE,MAAM,IAAI,MAAMA,EAAM,SAAS,IAAI,CACtC,CACJ,CACJ,CACJ,CAyBL,6BCnCA,MAAME,EAAMC,EAAO,MAAM,EACnB,CAAC,EAAAC,CAAC,EAAIC,IAENC,EAAQC,EAAI,CACd,UAAW,GACX,QAAS,CAAE,CACf,CAAC,EAEDC,EAAU,IAAMC,EAAK,CAAE,EAEvB,MAAMA,EAAQ,SAAY,CACtBH,EAAM,MAAM,UAAY,GACxB,MAAMI,EAAO,MAAMX,EAAkB,KAAM,EAAC,MAAK,EAC7CW,EAAK,UACLJ,EAAM,MAAM,QAAUI,EAAK,QAE/BJ,EAAM,MAAM,UAAY,EAC5B,EAEMK,EAAW,SAAY,CACzBL,EAAM,MAAM,UAAY,GACxB,MAAMI,EAAO,MAAMX,EAAkB,KAAI,EAAG,OAAOO,EAAM,MAAM,OAAO,EAClEI,EAAK,QACL,MAAME,EAAK,CACP,MAAOR,EAAE,cAAc,EACvB,KAAM,SAClB,CAAS,GAED,QAAQ,IAAIM,CAAI,EAChB,MAAME,EAAK,CACP,MAAOR,EAAE,YAAY,EACrB,KAAM,OAClB,CAAS,GAELE,EAAM,MAAM,UAAY,EAC5B"}
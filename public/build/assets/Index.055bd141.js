import S from"./Chart.7ff75066.js";import F from"./StatisticLayout.aa4de5c9.js";import{g as O}from"./app.ec5dc424.js";import{G as v,Y as j,H as A,ac as k,C as d,A as s,y as o,J as y,u as m,v as u,z as r,F as f,B as b,O as p,w as _,aP as h,D as n}from"./_plugin-vue_export-helper.f12554ed.js";import"./index.86214304.js";import"./Sidebar.620cebe0.js";const T=p(" \u041C\u0430\u0440\u043A\u0435\u0442\u0438\u043D\u0433\u043E\u0432\u0430 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 "),U={key:1},z={class:"grid grid-cols-1 gap-4 mt-5"},E={class:"block"},G={class:"grid grid-cols-2 md:grid-cols-4 gap-4 my-5"},H={class:"grid grid-cols-2 md:grid-cols-4"},W={__name:"Index",setup(I){h("$swal"),h("$can");const l=v({data:[],isLoading:!0}),a=v({date:[],filter:null,last:"one-month",currentPage:1}),w=j(()=>{const e={};return a.value.date.length===2&&(e.date_start=a.value.date[0],e.date_end=a.value.date[1]),a.value.last&&(e.last=a.value.last),e.page=a.value.currentPage,route("api.statistics.marketing.index",e)});A(()=>c());const V=k([{label:"\u0414\u0430\u0442\u0430",key:"date"},{label:"\u0421\u0440. \u0446\u0456\u043D\u0430 \u0437\u0430\u044F\u0432\u043A\u0438",key:"average_application_price"},{label:"\u0421\u0440. \u0446\u0456\u043D\u0430 \u0430\u043F\u0440\u0443\u0432\u0430",key:"average_approve_application_price"},{label:"\u0421\u0440. \u0446\u0456\u043D\u0430 \u0432\u0438\u043A\u043E\u043D\u0430\u043D\u043E\u0457 \u0437\u0430\u044F\u0432\u043A\u0438",key:"average_done_application_price"},{label:"\u0421\u0440. \u0447\u0435\u043A",key:"average_check"},{label:"\u0421\u0440. \u043C\u0430\u0440\u0436\u0430",key:"average_marginality"},{label:"\u0421\u0440. \u043A\u0456\u043B\u044C\u043A\u0456\u0441\u0442\u044C \u0442\u043E\u0432\u0430\u0440\u0456\u0432",key:"average_items"}]),P=k([{label:"\u0412\u0435\u0441\u044C \u0447\u0430\u0441",key:null},{label:"\u041F\u043E\u0442\u043E\u0447\u043D\u0438\u0439 \u0442\u0438\u0436\u0434\u0435\u043D\u044C",key:"week"},{label:"\u041F\u043E\u0442\u043E\u0447\u043D\u0438\u0439 \u0442\u0430 \u043F\u043E\u043F\u0435\u0440\u0435\u0434\u043D\u0456 \u0442\u0438\u0436\u043D\u0456",key:"two-week"},{label:"\u041F\u043E\u0442\u043E\u0447\u043D\u0438\u0439 \u043C\u0456\u0441\u044F\u0446\u044C",key:"one-month"},{label:"7 \u0434\u043D\u0456\u0432",key:"7-days"},{label:"14 \u0434\u043D\u0456\u0432",key:"14-days"},{label:"30 \u0434\u043D\u0456\u0432",key:"30-days"},{label:"90 \u0434\u043D\u0456\u0432",key:"90-days"}]);function $(e){e?a.value.last=e:a.value={date:[],filter:null,last:null,currentPage:1},c()}function L(){a.value.last="range",c()}function c(){l.value.isLoading=!0,axios.get(w.value).then(e=>{Object.assign(l.value.data,e.data),l.value.isLoading=!1}).catch(e=>{console.log(e),l.value.isLoading=!1})}return(e,i)=>{const B=n("loader-component"),C=n("label-component"),x=n("Datepicker"),D=n("button-component"),M=n("card-component"),N=n("table-component");return o(),d(F,{title:"\u041C\u0430\u0440\u043A\u0435\u0442\u0438\u043D\u0433\u043E\u0432\u0430 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430"},{header:s(()=>[T]),default:s(()=>[l.value.isLoading?(o(),d(B,{key:0})):y("",!0),l.value.isLoading?y("",!0):(o(),m("div",U,[u("div",z,[u("div",E,[r(C,{value:"\u0424\u0456\u043B\u044C\u0442\u0440 \u043F\u043E \u0434\u0430\u0442\u0456"}),r(x,{modelValue:a.value.date,"onUpdate:modelValue":[i[0]||(i[0]=t=>a.value.date=t),L],class:"w-100",locale:"ru",placeholder:"\u041E\u0431\u0435\u0440\u0456\u0442\u044C \u0434\u0430\u0442\u0443",autoApply:"",monthChangeOnScroll:!1,enableTimePicker:!1,range:"",utc:""},null,8,["modelValue"])])]),u("div",G,[(o(!0),m(f,null,b(P,t=>(o(),d(D,{type:"btn",onClick:g=>$(t.key),active:t.key===a.value.last},{default:s(()=>[p(_(t.label),1)]),_:2},1032,["onClick","active"]))),256))]),r(S,{"chart-data":l.value.data.chart},null,8,["chart-data"]),u("div",H,[(o(!0),m(f,null,b(l.value.data.generalStatistics,(t,g)=>(o(),d(M,{class:"text-center",title:g,description:e.$filters.formatMoney(t)},null,8,["title","description"]))),256))]),r(N,{headings:V,rows:l.value.data.result.data,isSlotMode:!0},{date:s(({data:t})=>[p(_(e.$filters.dateFormat(t.row.date)),1)]),costs:s(({data:t})=>[p(_(e.$filters.formatMoney(t.row.costs)),1)]),_:1},8,["headings","rows"]),r(O,{pagination:l.value.data.result,"click-handler":c,modelValue:a.value.currentPage,"onUpdate:modelValue":i[1]||(i[1]=t=>a.value.currentPage=t)},null,8,["pagination","modelValue"])]))]),_:1})}}};export{W as default};

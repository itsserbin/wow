import{_ as L}from"./Card-d700085f.js";import{L as x}from"./Loader-ccf6e4ba.js";import{_ as V}from"./Label-20131f4c.js";import{_ as $}from"./Paginate-01527c78.js";import w from"./Chart-8529e800.js";import y from"./Table-5143489b.js";import N from"./StatisticLayout-af991e7b.js";import P from"./Datepicker-1dfd351e.js";import{s as B,e as D}from"./index-7a810988.js";import{N as M,k as u,z as c,o as S,l as o,s as l,y as f,w as b,t as d,x as C,m as v,p as m,n as i,F,q as O}from"./index-a01126e2.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./chart-10c086bf.js";import"./Table-fe1ca8dd.js";import"./AuthenticatedLayout-704e8f94.js";import"./index.esm-02fff71f.js";import"./Logo-83ffc10f.js";import"./SidebarItem-446a46b0.js";import"./isDark-c828c264.js";import"./vue-datepicker-3bdc29fb.js";import"./index-2cbe9ca3.js";const U={key:1,class:"grid grid-cols-1 gap-4"},j={class:"block"},q={class:"grid grid-cols-2 md:grid-cols-4"},z={class:"text-center"},ie={__name:"Index",setup(E){const g=M("$can"),e=u({profits:[],chart:null,isLoading:!0}),t=u({date:[],currentPage:1});u([]);const _=c(()=>{if(t.value.date.length===2)return{date_start:t.value.date[0].toLocaleDateString(),date_end:t.value.date[1].toLocaleDateString()}}),h=c(()=>t.value.last),p=c(()=>({..._.value,last:h.value,page:t.value.currentPage}));S(()=>{t.value.date[0]=B(new Date),t.value.date[1]=D(new Date),n()});function n(){e.value.isLoading=!0,axios.get(route("api.statistics.profits.index",p.value)).then(({data:a})=>{e.value.profits=a,e.value.isLoading=!1}).catch(a=>{console.log(a),e.value.isLoading=!1}),axios.get(route("api.statistics.profits.chart",p.value)).then(({data:a})=>e.value.chart=a.result).catch(a=>console.log(a))}return(a,s)=>(o(),l(N,{title:"Прибуток"},{header:f(()=>[b(" Прибуток ")]),default:f(()=>[e.value.isLoading?(o(),l(x,{key:0})):d("",!0),!e.value.isLoading&&C(g)("show-bookkeeping-profits")?(o(),v("div",U,[m("div",j,[i(V,{value:"Фільтр по даті"}),i(P,{modelValue:t.value.date,"onUpdate:modelValue":[s[0]||(s[0]=r=>t.value.date=r),n]},null,8,["modelValue"])]),e.value.chart?(o(),l(w,{key:0,"chart-data":e.value.chart},null,8,["chart-data"])):d("",!0),m("div",q,[(o(!0),v(F,null,O(e.value.profits.generalStat,(r,k)=>(o(),l(L,{class:"text-center",title:k,description:a.$filters.formatMoney(r)},null,8,["title","description"]))),256))]),i(y,{data:e.value.profits.result.data},null,8,["data"]),m("div",z,[i($,{pagination:e.value.profits.result,"click-handler":n,modelValue:t.value.currentPage,"onUpdate:modelValue":s[1]||(s[1]=r=>t.value.currentPage=r)},null,8,["pagination","modelValue"])])])):d("",!0)]),_:1}))}};export{ie as default};

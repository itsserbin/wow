import D from"./StatisticLayout.950fc83c.js";import N from"./Datepicker.ebb98a98.js";import j from"./Table.e4e06472.js";import{q as m,g as h,s as M,ah as S,ai as U,p,w as u,x as k,C as r,o as c,l as g,k as b,u as E,i as x,j as s,y as o,F,v as O}from"./vendor.2c8aab53.js";import"./app.1edad9f2.js";import"./vue.m.132a23fc.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./Logo.6090e12d.js";import"./__commonjsHelpers__.4516dc8a.js";const q={key:1,class:"grid grid-cols-1 gap-4"},A={class:"grid grid-cols-1 md:grid-cols-12 gap-4 mt-5"},I={class:"block col-span-2 text-center"},T={class:"block col-span-4"},z={class:"block col-span-4"},G={class:"block col-span-2 text-center"},H={class:"grid grid-cols-2 md:grid-cols-4"},J={class:"text-center"},oe={__name:"Index",setup(K){k("$swal");const V=k("$can"),a=m({data:[],managers:[],isLoading:!0}),v=m([]),L=h(()=>{const e={};return t.value.date.length===2&&(e.date_start=t.value.date[0].toLocaleDateString(),e.date_end=t.value.date[1].toLocaleDateString()),_.value&&(e.managers=_.value),e.page=t.value.currentPage,route("api.statistics.managers.index",e)}),_=h(()=>{let e=[];return a.value.managers.forEach(n=>{e.push(n.id)}),e.join()}),t=m({date:[],managers:[],currentPage:1});M(()=>{t.value.date[0]=S(new Date),t.value.date[1]=U(new Date),i(),axios.get(route("api.users.list.managers")).then(({data:e})=>v.value=e.result).catch(e=>console.log(e))});function y(){t.value.managers=[],t.value.date=[],t.value.managers=[],a.value.managers=[],i()}function i(){a.value.isLoading=!0,axios.get(L.value).then(({data:e})=>{a.value.data=e,a.value.isLoading=!1}).catch(e=>{console.log(e),a.value.isLoading=!1})}return(e,n)=>{const C=r("loader-component"),d=r("label-component"),f=r("button-component"),w=r("multiselect"),P=r("card-component"),$=r("pagination");return c(),p(D,{title:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0434\u043B\u044F \u043C\u0435\u043D\u0435\u0434\u0436\u0435\u0440\u0456\u0432"},{header:u(()=>[g(" \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0434\u043B\u044F \u043C\u0435\u043D\u0435\u0434\u0436\u0435\u0440\u0456\u0432 ")]),default:u(()=>[a.value.isLoading?(c(),p(C,{key:0})):b("",!0),!a.value.isLoading&&E(V)("show-bookkeeping-managers")?(c(),x("div",q,[s("div",A,[s("div",I,[o(d,{value:"\xA0"}),o(f,{type:"button",onClick:y},{default:u(()=>[g(" \u041E\u0447\u0438\u0441\u0442\u0438\u0442\u0438 ")]),_:1})]),s("div",T,[o(d,{value:"\u0424\u0456\u043B\u044C\u0442\u0440 \u043F\u043E \u0434\u0430\u0442\u0456"}),o(N,{modelValue:t.value.date,"onUpdate:modelValue":n[0]||(n[0]=l=>t.value.date=l)},null,8,["modelValue"])]),s("div",z,[o(d,{value:"\u0424\u0456\u043B\u044C\u0442\u0440 \u043F\u043E \u043C\u0435\u043D\u0435\u0434\u0436\u0435\u0440\u0430\u043C"}),o(w,{modelValue:a.value.managers,"onUpdate:modelValue":n[1]||(n[1]=l=>a.value.managers=l),options:v.value,label:"name",placeholder:"\u041E\u0431\u0435\u0440\u0456\u0442\u044C \u043C\u0435\u043D\u0435\u0434\u0436\u0435\u0440\u0456\u0432","track-by":"id",searchable:!0,"close-on-select":!1,multiple:""},null,8,["modelValue","options"])]),s("div",G,[o(d,{value:"\xA0"}),o(f,{type:"button",onClick:i},{default:u(()=>[g(" \u041F\u043E\u0448\u0443\u043A ")]),_:1})])]),s("div",H,[(c(!0),x(F,null,O(a.value.data.generalStat,(l,B)=>(c(),p(P,{class:"text-center",title:B,description:l},null,8,["title","description"]))),256))]),o(j,{data:a.value.data.result.data},null,8,["data"]),s("div",J,[o($,{pagination:a.value.data.result,"click-handler":i,modelValue:t.value.currentPage,"onUpdate:modelValue":n[2]||(n[2]=l=>t.value.currentPage=l)},null,8,["pagination","modelValue"])])])):b("",!0)]),_:1})}}};export{oe as default};

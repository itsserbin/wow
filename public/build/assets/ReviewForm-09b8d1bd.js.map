{"version":3,"file":"ReviewForm-09b8d1bd.js","sources":["../../../resources/js/Pages/Public/Product/ReviewForm.vue"],"sourcesContent":["<script setup>\nimport {ref} from \"vue\";\nimport {swal} from '@/Includes/swal';\n\nconst props = defineProps({\n    id: Number,\n    textGiveReview: {\n        type: String,\n        default: 'Залишити відгук'\n    },\n    textEnterName: {\n        type: String,\n        default: 'Ваше імʼя'\n    },\n    textEnterReview: {\n        type: String,\n        default: 'Ваш відгук'\n    },\n    textName: {\n        type: String,\n        default: 'Імʼя'\n    },\n    textPhone: {\n        type: String,\n        default: 'Телефон'\n    },\n    textComment: {\n        type: String,\n        default: 'Відгук'\n    },\n});\n\nconst state = ref({\n    showReviewModal: false,\n    review: {\n        published: 0,\n        product_id: null,\n        phone: null,\n        name: null,\n        comment: null,\n    },\n    errors: [],\n    isLoading: false,\n});\n\nfunction showReviewModalFunction() {\n    state.value.showReviewModal = !state.value.showReviewModal;\n}\n\nfunction sendReview() {\n    state.value.isLoading = true;\n    state.value.review.product_id = props.id;\n    axios.post('/api/v1/reviews/create', state.value.review)\n        .then(() => {\n            state.value.review = {\n                phone: null,\n                name: null,\n                comment: null,\n            };\n            state.value.isLoading = false;\n            state.value.errors = [];\n            showReviewModalFunction();\n            swal({\n                icon: 'success',\n                title: 'Ваш коментар надіслано!',\n                text: 'Він буде опублікований після перевірки на спам :)',\n            })\n        })\n        .catch(({response}) => {\n            state.value.errors = response.data;\n            state.value.isLoading = false;\n            console.log(response);\n            swal({\n                icon: 'error',\n                title: 'Виникла помилка',\n                text: 'Перевірте корректність данних',\n            })\n        });\n}\n</script>\n\n<template>\n    <div>\n        <div>\n            <div class=\"text-center\">\n                <button-component\n                    type=\"button\"\n                    @click=\"showReviewModalFunction\"\n                >{{ textGiveReview }}\n                </button-component>\n            </div>\n\n            <modal v-if=\"state.showReviewModal\"\n                   @clickCancel=\"showReviewModalFunction\"\n                   @closeModal=\"showReviewModalFunction\"\n                   @submitForm=\"sendReview\"\n                   submit-button-text=\"Відправити\"\n                   cancel-button-text=\"Відмінити\"\n                   size=\"medium\"\n            >\n                <template #heading>\n                    {{ textGiveReview }}\n                </template>\n\n                <template #content>\n                    <div class=\"grid gap-4\">\n                        <div class=\"block\">\n                            <label-component :required=\"true\">{{ textName }}</label-component>\n                            <input-component type=\"text\"\n                                             v-model=\"state.review.name\"\n                                             :placeholder=\"textEnterName\"\n                            />\n                        </div>\n\n                        <div class=\"block\">\n                            <label-component :required=\"true\">{{ textPhone }}</label-component>\n                            <input-component type=\"tel\"\n                                             v-maska=\"'+38 (0##) ###-##-##'\"\n                                             v-model=\"state.review.phone\"\n                                             placeholder=\"+38 (0\"\n                                             class=\"phone\"\n                            />\n                        </div>\n                        <div class=\"block\">\n                            <label-component :required=\"true\">{{ textComment }}</label-component>\n                            <textarea placeholder=\"Введіть ваш коментар\"\n                                      v-model=\"state.review.comment\"\n                                      rows=\"4\"\n                                      class=\"\n                                            border-[0.5px]\n                                            rounded-[10px]\n                                            box-border\n                                            font-[350]\n                                            h-[100]\n                                            mt-[0.75rem]\n                                            p-[1rem]\n                                            resize-none\n                                            w-[100%]\n                                            outline-none\n                                            border-red-600\n                                            focus:border-red-600\n                                            focus:ring-red-600\n                                        \"\n                            ></textarea>\n                        </div>\n                    </div>\n                </template>\n            </modal>\n        </div>\n    </div>\n</template>\n"],"names":["state","ref","showReviewModalFunction","sendReview","props","swal","response"],"mappings":"wlBAgCMA,EAAQC,EAAI,CACd,gBAAiB,GACjB,OAAQ,CACJ,UAAW,EACX,WAAY,KACZ,MAAO,KACP,KAAM,KACN,QAAS,IACZ,EACD,OAAQ,CAAE,EACV,UAAW,EACf,CAAC,EAED,SAASC,GAA0B,CAC/BF,EAAM,MAAM,gBAAkB,CAACA,EAAM,MAAM,eAC/C,CAEA,SAASG,GAAa,CAClBH,EAAM,MAAM,UAAY,GACxBA,EAAM,MAAM,OAAO,WAAaI,EAAM,GACtC,MAAM,KAAK,yBAA0BJ,EAAM,MAAM,MAAM,EAClD,KAAK,IAAM,CACRA,EAAM,MAAM,OAAS,CACjB,MAAO,KACP,KAAM,KACN,QAAS,IACzB,EACYA,EAAM,MAAM,UAAY,GACxBA,EAAM,MAAM,OAAS,GACrBE,IACAG,EAAK,CACD,KAAM,UACN,MAAO,0BACP,KAAM,mDACtB,CAAa,CACb,CAAS,EACA,MAAM,CAAC,CAAC,SAAAC,CAAQ,IAAM,CACnBN,EAAM,MAAM,OAASM,EAAS,KAC9BN,EAAM,MAAM,UAAY,GACxB,QAAQ,IAAIM,CAAQ,EACpBD,EAAK,CACD,KAAM,QACN,MAAO,kBACP,KAAM,+BACtB,CAAa,CACb,CAAS,CACT"}
import x from"./Chart.65ab8b8e.js";import L from"./Table.2eb4eda5.js";import $ from"./Indicators.281253f1.js";import y from"./StatisticLayout.b8647884.js";import{h as B}from"./app.e81ce1e5.js";import P from"./LastParams.601af168.js";import{z as c,A as b,D as C,U as u,R as p,Q as n,Z as d,K as N,L as v,J as o,X as w,v as _,W as m}from"./_plugin-vue_export-helper.19045d4a.js";import"./index.4f2ac0f4.js";import"./Sidebar.82a4c271.js";const D=w(" \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0437\u0430\u044F\u0432\u043E\u043A "),U={key:1},A={class:"grid grid-cols-1 gap-4 mt-5"},R={class:"block"},Q={__name:"Index",setup(S){_("$swal"),_("$can");const t=c({orders:[],chart:null,indicators:null,isLoading:!0}),a=c({date:[],filter:null,last:"one-month",currentPage:1});c([]);const r=b(()=>{const e={};return a.value.date.length===2&&(e.date_start=a.value.date[0],e.date_end=a.value.date[1]),a.value.last&&(e.last=a.value.last),e.page=a.value.currentPage,e});C(()=>l());function f(e){e?a.value.last=e:a.value={date:[],filter:null,last:null,currentPage:1},l()}function g(){a.value.last="range",l()}function l(){t.value.isLoading=!0,axios.get(route("api.statistics.orders.index",r.value)).then(({data:e})=>{t.value.orders=e,t.value.isLoading=!1}).catch(e=>{console.log(e),t.value.isLoading=!1}),axios.get(route("api.statistics.orders.chart",r.value)).then(({data:e})=>t.value.chart=e.result).catch(e=>console.log(e)),axios.get(route("api.statistics.orders.indicators",r.value)).then(({data:e})=>t.value.indicators=e.result).catch(e=>console.log(e))}return(e,s)=>{const h=m("loader-component"),k=m("label-component"),V=m("Datepicker");return n(),u(y,{title:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0437\u0430\u044F\u0432\u043E\u043A"},{header:p(()=>[D]),default:p(()=>[t.value.isLoading?(n(),u(h,{key:0})):d("",!0),t.value.isLoading?d("",!0):(n(),N("div",U,[v("div",A,[v("div",R,[o(k,{value:"\u0424\u0456\u043B\u044C\u0442\u0440 \u043F\u043E \u0434\u0430\u0442\u0456"}),o(V,{modelValue:a.value.date,"onUpdate:modelValue":[s[0]||(s[0]=i=>a.value.date=i),g],class:"w-100",locale:"ru",placeholder:"\u041E\u0431\u0435\u0440\u0456\u0442\u044C \u0434\u0430\u0442\u0443",autoApply:"",monthChangeOnScroll:!1,enableTimePicker:!1,range:"",utc:""},null,8,["modelValue"])])]),o(P,{"active-item":a.value.last,onSortByLast:f},null,8,["active-item"]),t.value.chart?(n(),u(x,{key:0,"chart-data":t.value.chart},null,8,["chart-data"])):d("",!0),o($,{data:t.value.indicators},null,8,["data"]),o(L,{data:t.value.orders.result.data},null,8,["data"]),o(B,{pagination:t.value.orders.result,"click-handler":l,modelValue:a.value.currentPage,"onUpdate:modelValue":s[1]||(s[1]=i=>a.value.currentPage=i)},null,8,["pagination","modelValue"])]))]),_:1})}}};export{Q as default};

import{L as _}from"./Loader-8bf33617.js";import{_ as f}from"./Label-fa7af1d1.js";import{_ as g}from"./Paginate-b71b7269.js";import h from"./Chart-e63c68a7.js";import x from"./Table-8faf9096.js";import k from"./Indicators-4c5b48e4.js";import L from"./StatisticLayout-99ba8621.js";import{s as V,e as $,_ as D}from"./Datepicker-5f10a97a.js";import{i as P,r as d,j as w,o as B,p as s,D as u,x as m,A as N,C as c,t as y,q as C,v as p,l as o}from"./app-f55448cf.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Table-6800669f.js";import"./Card-ec829b36.js";import"./AuthenticatedLayout-ecf8db9d.js";import"./index.esm-f21e1dfa.js";import"./Logo-edac3a30.js";import"./vue-i18n.esm-bundler-d070be13.js";import"./SidebarItem-eda03439.js";import"./vue-datepicker-3843f364.js";const M={key:1,class:"grid grid-cols-1 gap-4"},b={class:"block"},j={class:"text-center"},Z={__name:"Index",setup(O){const v=P("$can"),e=d({orders:[],chart:null,indicators:null,isLoading:!0}),t=d({date:[],currentPage:1});d([]);const l=w(()=>{const a={};return t.value.date.length===2&&(a.date_start=t.value.date[0].toLocaleDateString(),a.date_end=t.value.date[1].toLocaleDateString()),a.page=t.value.currentPage,a});B(()=>{t.value.date[0]=V(new Date),t.value.date[1]=$(new Date),i()});function i(){e.value.isLoading=!0,axios.get(route("api.statistics.orders.index",l.value)).then(({data:a})=>{e.value.orders=a,e.value.isLoading=!1}).catch(a=>{console.log(a),e.value.isLoading=!1}),axios.get(route("api.statistics.orders.chart",l.value)).then(({data:a})=>e.value.chart=a.result).catch(a=>console.log(a)),axios.get(route("api.statistics.orders.indicators",l.value)).then(({data:a})=>e.value.indicators=a.result).catch(a=>console.log(a))}return(a,r)=>(s(),u(L,{title:"Статистика заявок"},{header:m(()=>[N(" Статистика заявок ")]),default:m(()=>[e.value.isLoading?(s(),u(_,{key:0})):c("",!0),!e.value.isLoading&&y(v)("show-bookkeeping-orders")?(s(),C("div",M,[p("div",b,[o(f,{value:"Фільтр по даті"}),o(D,{modelValue:t.value.date,"onUpdate:modelValue":[r[0]||(r[0]=n=>t.value.date=n),i]},null,8,["modelValue"])]),e.value.chart?(s(),u(h,{key:0,"chart-data":e.value.chart},null,8,["chart-data"])):c("",!0),o(k,{data:e.value.indicators},null,8,["data"]),o(x,{data:e.value.orders.result.data},null,8,["data"]),p("div",j,[o(g,{pagination:e.value.orders.result,"click-handler":i,modelValue:t.value.currentPage,"onUpdate:modelValue":r[1]||(r[1]=n=>t.value.currentPage=n)},null,8,["pagination","modelValue"])])])):c("",!0)]),_:1}))}};export{Z as default};

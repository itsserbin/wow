import{_ as $}from"./Paginate-01527c78.js";import{_ as y}from"./Card-d700085f.js";import{_}from"./Button-dd1aed97.js";import{L as w}from"./Loader-ccf6e4ba.js";import{_ as d}from"./Label-20131f4c.js";import C from"./StatisticLayout-af991e7b.js";import M from"./Datepicker-1dfd351e.js";import N from"./Table-1b3a19be.js";import{M as P}from"./Multiselect-a4b04608.js";import{s as B,e as D}from"./index-7a810988.js";import{N as S,k as c,z as f,o as U,l as r,s as m,y as u,w as p,t as h,x as j,m as k,p as n,n as o,F as E,q as F}from"./index-a01126e2.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./AuthenticatedLayout-704e8f94.js";import"./index.esm-02fff71f.js";import"./Logo-83ffc10f.js";import"./SidebarItem-446a46b0.js";import"./isDark-c828c264.js";import"./vue-datepicker-3bdc29fb.js";import"./index-2cbe9ca3.js";import"./Table-fe1ca8dd.js";const O={key:1,class:"grid grid-cols-1 gap-4"},q={class:"grid grid-cols-1 md:grid-cols-12 gap-4 mt-5"},z={class:"block col-span-2 text-center"},A={class:"block col-span-4"},I={class:"block col-span-4"},T={class:"block col-span-2 text-center"},G={class:"grid grid-cols-2 md:grid-cols-4"},H={class:"text-center"},pe={__name:"Index",setup(J){const x=S("$can"),a=c({data:[],managers:[],isLoading:!0}),g=c([]),V=f(()=>{const e={};return t.value.date.length===2&&(e.date_start=t.value.date[0].toLocaleDateString(),e.date_end=t.value.date[1].toLocaleDateString()),v.value&&(e.managers=v.value),e.page=t.value.currentPage,route("api.statistics.managers.index",e)}),v=f(()=>{let e=[];return a.value.managers.forEach(s=>{e.push(s.id)}),e.join()}),t=c({date:[],managers:[],currentPage:1});U(()=>{t.value.date[0]=B(new Date),t.value.date[1]=D(new Date),i(),axios.get(route("api.users.list.managers")).then(({data:e})=>g.value=e.result).catch(e=>console.log(e))});function L(){t.value.managers=[],t.value.date=[],t.value.managers=[],a.value.managers=[],i()}function i(){a.value.isLoading=!0,axios.get(V.value).then(({data:e})=>{a.value.data=e,a.value.isLoading=!1}).catch(e=>{console.log(e),a.value.isLoading=!1})}return(e,s)=>(r(),m(C,{title:"Статистика для менеджерів"},{header:u(()=>[p(" Статистика для менеджерів ")]),default:u(()=>[a.value.isLoading?(r(),m(w,{key:0})):h("",!0),!a.value.isLoading&&j(x)("show-bookkeeping-managers")?(r(),k("div",O,[n("div",q,[n("div",z,[o(d,{value:" "}),o(_,{type:"button",onClick:L},{default:u(()=>[p(" Очистити ")]),_:1})]),n("div",A,[o(d,{value:"Фільтр по даті"}),o(M,{modelValue:t.value.date,"onUpdate:modelValue":s[0]||(s[0]=l=>t.value.date=l)},null,8,["modelValue"])]),n("div",I,[o(d,{value:"Фільтр по менеджерам"}),o(P,{modelValue:a.value.managers,"onUpdate:modelValue":s[1]||(s[1]=l=>a.value.managers=l),options:g.value,label:"name",placeholder:"Оберіть менеджерів","track-by":"id",searchable:!0,"close-on-select":!1,multiple:""},null,8,["modelValue","options"])]),n("div",T,[o(d,{value:" "}),o(_,{type:"button",onClick:i},{default:u(()=>[p(" Пошук ")]),_:1})])]),n("div",G,[(r(!0),k(E,null,F(a.value.data.generalStat,(l,b)=>(r(),m(y,{class:"text-center",title:b,description:l},null,8,["title","description"]))),256))]),o(N,{data:a.value.data.result.data},null,8,["data"]),n("div",H,[o($,{pagination:a.value.data.result,"click-handler":i,modelValue:t.value.currentPage,"onUpdate:modelValue":s[2]||(s[2]=l=>t.value.currentPage=l)},null,8,["pagination","modelValue"])])])):h("",!0)]),_:1}))}};export{pe as default};

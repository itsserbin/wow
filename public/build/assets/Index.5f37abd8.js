import B from"./Chart.9a1ab9e2.js";import M from"./Table.4b5dfc4c.js";import b from"./StatisticLayout.9cc76a37.js";import{s as D,e as N,_ as S}from"./Datepicker.27cc4262.js";import{w as d,x as l,S as C,Q as r,K as g,X as v,H as c,F as o,P as p,B as O,y as f,z as m,J as i,M as F,O as U,L as j}from"./___vite-browser-external_commonjs-proxy.4f2b06be.js";import"./index.5319b6af.js";import"./app.460df568.js";const z=j(" \u041F\u0440\u0438\u0431\u0443\u0442\u043E\u043A "),E={key:1,class:"grid grid-cols-1 gap-4"},H={class:"block"},I={class:"grid grid-cols-2 md:grid-cols-4"},J={class:"text-center"},W={__name:"Index",setup(K){v("$swal");const h=v("$can"),e=d({profits:[],chart:null,isLoading:!0}),t=d({date:[],currentPage:1});d([]);const k=l(()=>{if(t.value.date.length===2)return{date_start:t.value.date[0].toLocaleDateString(),date_end:t.value.date[1].toLocaleDateString()}}),x=l(()=>t.value.last),L=l(()=>t.value.currentPage),_=l(()=>({...k.value,last:x.value,page:L.value}));C(()=>{t.value.date[0]=D(new Date),t.value.date[1]=N(new Date),u()});function u(){e.value.isLoading=!0,axios.get(route("api.statistics.profits.index",_.value)).then(({data:a})=>{e.value.profits=a,e.value.isLoading=!1}).catch(a=>{console.log(a),e.value.isLoading=!1}),axios.get(route("api.statistics.profits.chart",_.value)).then(({data:a})=>e.value.chart=a.result).catch(a=>console.log(a))}return(a,s)=>{const V=c("loader-component"),P=c("label-component"),$=c("card-component"),w=c("pagination");return o(),r(b,{title:"\u041F\u0440\u0438\u0431\u0443\u0442\u043E\u043A"},{header:g(()=>[z]),default:g(()=>[e.value.isLoading?(o(),r(V,{key:0})):p("",!0),!e.value.isLoading&&O(h)("show-bookkeeping-profits")?(o(),f("div",E,[m("div",H,[i(P,{value:"\u0424\u0456\u043B\u044C\u0442\u0440 \u043F\u043E \u0434\u0430\u0442\u0456"}),i(S,{modelValue:t.value.date,"onUpdate:modelValue":[s[0]||(s[0]=n=>t.value.date=n),u]},null,8,["modelValue"])]),e.value.chart?(o(),r(B,{key:0,"chart-data":e.value.chart},null,8,["chart-data"])):p("",!0),m("div",I,[(o(!0),f(F,null,U(e.value.profits.generalStat,(n,y)=>(o(),r($,{class:"text-center",title:y,description:a.$filters.formatMoney(n)},null,8,["title","description"]))),256))]),i(M,{data:e.value.profits.result.data},null,8,["data"]),m("div",J,[i(w,{pagination:e.value.profits.result,"click-handler":u,modelValue:t.value.currentPage,"onUpdate:modelValue":s[1]||(s[1]=n=>t.value.currentPage=n)},null,8,["pagination","modelValue"])])])):p("",!0)]),_:1})}}};export{W as default};

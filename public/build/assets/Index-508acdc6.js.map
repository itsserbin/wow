{"version":3,"file":"Index-508acdc6.js","sources":["../../../resources/js/Pages/Public/Thanks/Index.vue"],"sourcesContent":["<script setup>\nimport Timer from '@/Pages/Public/Thanks/Timer.vue'\nimport ProductCard from '@/Pages/Public/Thanks/ProductCard.vue'\nimport MasterLayout from '@/Layouts/MasterLayout.vue'\nimport Head from \"@/Pages/Public/Components/Head.vue\";\n\nimport {onMounted, ref} from \"vue\";\nimport {swal} from '@/Includes/swal';\n\ndefineOptions({layout: MasterLayout})\n\nconst props = defineProps({\n    categories: Array,\n    options: Object,\n    pages: Array,\n    lang: String,\n    eventIdPageView: String,\n    textThanksPageTitle: {\n        type: String,\n        default: 'Дякую за ваше замовлення :)'\n    },\n    textThanksPageDescription: {\n        type: String,\n        default: 'Найближчим часом з вами зв`яжеться оператор для підтвердження замовлення.',\n    },\n    textThanksPageOrderId: {\n        type: String,\n        default: 'Номер вашого замовлення:'\n    },\n    textThanksPageSpecials: {\n        type: String,\n        default: 'Спеціальні пропозиції. Встигни додати до замовлення'\n    },\n    textThanksPageSpecialsEnds: {\n        type: String,\n        default: 'Час дії пропозиції минув. Сподіваємось, Вас зацікавлять наші акції наступного разу. Починаємо готувати посилку і незабаром відправимо Ваше замовлення'\n    },\n});\n\nconst timer = ref({\n    hours: '',\n    mins: '',\n    secs: '',\n});\n\nconst state = ref({\n    orderId: null,\n    isLoading: true,\n    products: [],\n    activeSpecialOffer: false,\n});\n\nonMounted(async () => {\n    state.value.orderId = route().params.id;\n\n    await axios.get(route('api.v1.orders.special', state.value.orderId))\n        .then(({data}) => {\n            if (data.result) {\n                setInterval(function () {\n                    let t = new Date(data.result.end_time).getTime() - new Date().getTime();\n                    if (t >= 0) {\n                        timer.value.hours = ('0' + Math.floor((t % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))).slice(-2);\n                        timer.value.mins = ('0' + Math.floor((t % (1000 * 60 * 60)) / (1000 * 60))).slice(-2);\n                        timer.value.secs = ('0' + Math.floor((t % (1000 * 60)) / 1000)).slice(-2);\n                        state.value.activeSpecialOffer = true;\n                        state.value.products = data.result.products;\n                        state.value.isLoading = false;\n                    } else {\n                        state.value.activeSpecialOffer = false;\n                        state.value.isLoading = false;\n                    }\n                }, 1000);\n            } else {\n                state.value.isLoading = false;\n                state.value.activeSpecialOffer = false;\n            }\n\n        })\n});\n\nconst addItemToOrder = async (id, price) => {\n    await axios.post('/api/v1/order/add-item/' + state.value.orderId, {\n        'id': id,\n        'price': price,\n    })\n        .then(async () => await swal({\n            icon: 'success',\n            title: 'Додано!',\n            text: 'Товар успішно додано до вашого замовлення',\n        }))\n        .catch(async (response) => {\n            console.error(response);\n            await swal({\n                icon: 'error',\n                title: 'Виникла помилка',\n                text: 'Зверніться до адміністратора',\n            })\n        })\n}\n</script>\n\n<template>\n    <Head title=\"Дякуємо за покупку!\"/>\n\n    <section class=\"grid gap-4 grid-cols-1\">\n        <div class=\"grid grid-cols-1 gap-4\">\n            <h1 class=\"font-bold text-black text-center text-2xl font-heading\">\n                {{ textThanksPageTitle }}\n            </h1>\n\n            <div class=\"text-center text-xl font-subheading\">\n                <p>{{ textThanksPageDescription }}</p>\n            </div>\n\n            <div class=\"text-center text-xl font-subheading\" v-if=\"state.orderId\">\n                {{ textThanksPageOrderId }} {{ state.orderId }}\n            </div>\n        </div>\n\n        <div v-if=\"state.activeSpecialOffer\" class=\"grid gap-4 mt-5\">\n            <div class=\"font-bold text-black text-center text-2xl font-subheading\">\n                {{ textThanksPageSpecials }}\n            </div>\n            <Timer :timer=\"timer\"/>\n            <div class=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <ProductCard v-for=\"product in state.products\"\n                             :product=\"product\"\n                             @addItemToOrder=\"addItemToOrder\"\n                             :lang=\"lang\"\n                />\n            </div>\n        </div>\n        <div v-else class=\"order-page__text my-5\">\n            <p>{{ textThanksPageSpecialsEnds }}</p>\n        </div>\n    </section>\n</template>\n"],"names":["__default__","__MACROS_defineComponent","MasterLayout","timer","ref","state","onMounted","data","t","addItemToOrder","id","price","swal","response"],"mappings":"umCAScA,EAAAC,EAAA,CAAC,OAAQC,CAAY,CAAA,2rBA8BnC,MAAMC,EAAQC,EAAI,CACd,MAAO,GACP,KAAM,GACN,KAAM,EACV,CAAC,EAEKC,EAAQD,EAAI,CACd,QAAS,KACT,UAAW,GACX,SAAU,CAAE,EACZ,mBAAoB,EACxB,CAAC,EAEDE,EAAU,SAAY,CAClBD,EAAM,MAAM,QAAU,MAAK,EAAG,OAAO,GAErC,MAAM,MAAM,IAAI,MAAM,wBAAyBA,EAAM,MAAM,OAAO,CAAC,EAC9D,KAAK,CAAC,CAAC,KAAAE,CAAI,IAAM,CACVA,EAAK,OACL,YAAY,UAAY,CACpB,IAAIC,EAAI,IAAI,KAAKD,EAAK,OAAO,QAAQ,EAAE,UAAY,IAAI,KAAM,EAAC,QAAO,EACjEC,GAAK,GACLL,EAAM,MAAM,OAAS,IAAM,KAAK,MAAOK,GAAK,IAAO,GAAK,GAAK,KAAQ,IAAO,GAAK,GAAG,GAAG,MAAM,EAAE,EAC/FL,EAAM,MAAM,MAAQ,IAAM,KAAK,MAAOK,GAAK,IAAO,GAAK,KAAQ,IAAO,GAAG,GAAG,MAAM,EAAE,EACpFL,EAAM,MAAM,MAAQ,IAAM,KAAK,MAAOK,GAAK,IAAO,IAAO,GAAI,GAAG,MAAM,EAAE,EACxEH,EAAM,MAAM,mBAAqB,GACjCA,EAAM,MAAM,SAAWE,EAAK,OAAO,SACnCF,EAAM,MAAM,UAAY,KAExBA,EAAM,MAAM,mBAAqB,GACjCA,EAAM,MAAM,UAAY,GAE/B,EAAE,GAAI,GAEPA,EAAM,MAAM,UAAY,GACxBA,EAAM,MAAM,mBAAqB,GAGjD,CAAS,CACT,CAAC,EAED,MAAMI,EAAiB,MAAOC,EAAIC,IAAU,CACxC,MAAM,MAAM,KAAK,0BAA4BN,EAAM,MAAM,QAAS,CAC9D,GAAMK,EACN,MAASC,CACjB,CAAK,EACI,KAAK,SAAY,MAAMC,EAAK,CACzB,KAAM,UACN,MAAO,UACP,KAAM,2CAClB,CAAS,CAAC,EACD,MAAM,MAAOC,GAAa,CACvB,QAAQ,MAAMA,CAAQ,EACtB,MAAMD,EAAK,CACP,KAAM,QACN,MAAO,kBACP,KAAM,8BACtB,CAAa,CACb,CAAS,CACT"}
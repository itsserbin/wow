import $ from"./StatisticLayout-0376b79c.js";import{s as N,e as E,_ as M}from"./Datepicker-d3feb497.js";import S from"./Table-ae9813bd.js";import{g as m,l as h,o as U,A as p,B as u,D as k,K as r,y as c,s as g,q as b,u as j,m as V,p as s,E as o,F as A,C as F}from"./index-bc3c132c.js";import"./app-b232e098.js";import"./moment-fbc5633a.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Logo-3d23fa23.js";const O={key:1,class:"grid grid-cols-1 gap-4"},q={class:"grid grid-cols-1 md:grid-cols-12 gap-4 mt-5"},I={class:"block col-span-2 text-center"},K={class:"block col-span-4"},T={class:"block col-span-4"},z={class:"block col-span-2 text-center"},G={class:"grid grid-cols-2 md:grid-cols-4"},H={class:"text-center"},te={__name:"Index",setup(J){k("$swal");const x=k("$can"),a=m({data:[],managers:[],isLoading:!0}),_=m([]),L=h(()=>{const e={};return t.value.date.length===2&&(e.date_start=t.value.date[0].toLocaleDateString(),e.date_end=t.value.date[1].toLocaleDateString()),v.value&&(e.managers=v.value),e.page=t.value.currentPage,route("api.statistics.managers.index",e)}),v=h(()=>{let e=[];return a.value.managers.forEach(n=>{e.push(n.id)}),e.join()}),t=m({date:[],managers:[],currentPage:1});U(()=>{t.value.date[0]=N(new Date),t.value.date[1]=E(new Date),i(),axios.get(route("api.users.list.managers")).then(({data:e})=>_.value=e.result).catch(e=>console.log(e))});function y(){t.value.managers=[],t.value.date=[],t.value.managers=[],a.value.managers=[],i()}function i(){a.value.isLoading=!0,axios.get(L.value).then(({data:e})=>{a.value.data=e,a.value.isLoading=!1}).catch(e=>{console.log(e),a.value.isLoading=!1})}return(e,n)=>{const C=r("loader-component"),d=r("label-component"),f=r("button-component"),w=r("multiselect"),B=r("card-component"),D=r("pagination");return c(),p($,{title:"Статистика для менеджерів"},{header:u(()=>[g(" Статистика для менеджерів ")]),default:u(()=>[a.value.isLoading?(c(),p(C,{key:0})):b("",!0),!a.value.isLoading&&j(x)("show-bookkeeping-managers")?(c(),V("div",O,[s("div",q,[s("div",I,[o(d,{value:" "}),o(f,{type:"button",onClick:y},{default:u(()=>[g(" Очистити ")]),_:1})]),s("div",K,[o(d,{value:"Фільтр по даті"}),o(M,{modelValue:t.value.date,"onUpdate:modelValue":n[0]||(n[0]=l=>t.value.date=l)},null,8,["modelValue"])]),s("div",T,[o(d,{value:"Фільтр по менеджерам"}),o(w,{modelValue:a.value.managers,"onUpdate:modelValue":n[1]||(n[1]=l=>a.value.managers=l),options:_.value,label:"name",placeholder:"Оберіть менеджерів","track-by":"id",searchable:!0,"close-on-select":!1,multiple:""},null,8,["modelValue","options"])]),s("div",z,[o(d,{value:" "}),o(f,{type:"button",onClick:i},{default:u(()=>[g(" Пошук ")]),_:1})])]),s("div",G,[(c(!0),V(A,null,F(a.value.data.generalStat,(l,P)=>(c(),p(B,{class:"text-center",title:P,description:l},null,8,["title","description"]))),256))]),o(S,{data:a.value.data.result.data},null,8,["data"]),s("div",H,[o(D,{pagination:a.value.data.result,"click-handler":i,modelValue:t.value.currentPage,"onUpdate:modelValue":n[2]||(n[2]=l=>t.value.currentPage=l)},null,8,["pagination","modelValue"])])])):b("",!0)]),_:1})}}};export{te as default};

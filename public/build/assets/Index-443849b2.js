import x from"./Chart-5e337dc8.js";import V from"./Table-a56357e9.js";import L from"./Indicators-5c75fb88.js";import $ from"./StatisticLayout-63634715.js";import{s as w,e as D,_ as P}from"./Datepicker-51a575de.js";import{r as c,f as b,o as y,s as d,v as p,y as v,D as u,p as s,k as B,j as m,u as N,g as C,i as _,z as o}from"./app-57dfd45b.js";import"./index-d62acdfa.js";import"./app-c4688fac.js";import"./vue-i18n.esm-bundler-cbabedce.js";import"./moment-fbc5633a.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Logo-c2c32df4.js";const M={key:1,class:"grid grid-cols-1 gap-4"},j={class:"block"},O={class:"text-center"},Q={__name:"Index",setup(S){v("$swal");const g=v("$can"),a=c({orders:[],chart:null,indicators:null,isLoading:!0}),t=c({date:[],currentPage:1});c([]);const r=b(()=>{const e={};return t.value.date.length===2&&(e.date_start=t.value.date[0].toLocaleDateString(),e.date_end=t.value.date[1].toLocaleDateString()),e.page=t.value.currentPage,e});y(()=>{t.value.date[0]=w(new Date),t.value.date[1]=D(new Date),l()});function l(){a.value.isLoading=!0,axios.get(route("api.statistics.orders.index",r.value)).then(({data:e})=>{a.value.orders=e,a.value.isLoading=!1}).catch(e=>{console.log(e),a.value.isLoading=!1}),axios.get(route("api.statistics.orders.chart",r.value)).then(({data:e})=>a.value.chart=e.result).catch(e=>console.log(e)),axios.get(route("api.statistics.orders.indicators",r.value)).then(({data:e})=>a.value.indicators=e.result).catch(e=>console.log(e))}return(e,n)=>{const f=u("loader-component"),h=u("label-component"),k=u("pagination");return s(),d($,{title:"Статистика заявок"},{header:p(()=>[B(" Статистика заявок ")]),default:p(()=>[a.value.isLoading?(s(),d(f,{key:0})):m("",!0),!a.value.isLoading&&N(g)("show-bookkeeping-orders")?(s(),C("div",M,[_("div",j,[o(h,{value:"Фільтр по даті"}),o(P,{modelValue:t.value.date,"onUpdate:modelValue":[n[0]||(n[0]=i=>t.value.date=i),l]},null,8,["modelValue"])]),a.value.chart?(s(),d(x,{key:0,"chart-data":a.value.chart},null,8,["chart-data"])):m("",!0),o(L,{data:a.value.indicators},null,8,["data"]),o(V,{data:a.value.orders.result.data},null,8,["data"]),_("div",O,[o(k,{pagination:a.value.orders.result,"click-handler":l,modelValue:t.value.currentPage,"onUpdate:modelValue":n[1]||(n[1]=i=>t.value.currentPage=i)},null,8,["pagination","modelValue"])])])):m("",!0)]),_:1})}}};export{Q as default};

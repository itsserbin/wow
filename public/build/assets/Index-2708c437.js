import $ from"./Chart-30f19932.js";import w from"./StatisticLayout-0376b79c.js";import{s as y,e as B,_ as D}from"./Datepicker-d3feb497.js";import P from"./Table-3f1084ad.js";import{g as p,l as b,o as C,A as s,B as g,D as _,K as r,y as o,s as M,q as d,u as N,m as v,p as u,E as i,F as S,C as E}from"./index-bc3c132c.js";import"./index-20498043.js";import"./app-b232e098.js";import"./moment-fbc5633a.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Logo-3d23fa23.js";const F={key:1,class:"grid grid-cols-1 gap-4"},O={class:"block"},U={class:"grid grid-cols-2 md:grid-cols-4"},j={class:"text-center"},W={__name:"Index",setup(q){_("$swal");const f=_("$can"),a=p({data:[],chart:null,isLoading:!0}),t=p({date:[],currentPage:1}),m=b(()=>{const e={};return t.value.date.length===2&&(e.date_start=t.value.date[0].toLocaleDateString(),e.date_end=t.value.date[1].toLocaleDateString()),e.page=t.value.currentPage,e});C(()=>{t.value.date[0]=y(new Date),t.value.date[1]=B(new Date),c()});function c(){a.value.isLoading=!0,axios.get(route("api.statistics.marketing.index",m.value)).then(({data:e})=>{a.value.data=e,a.value.isLoading=!1}).catch(e=>{console.log(e),a.value.isLoading=!1}),axios.get(route("api.statistics.marketing.chart",m.value)).then(({data:e})=>a.value.chart=e.result).catch(e=>console.log(e))}return(e,l)=>{const h=r("loader-component"),k=r("label-component"),V=r("card-component"),x=r("pagination");return o(),s(w,{title:"Маркетингова статистика"},{header:g(()=>[M(" Маркетингова статистика ")]),default:g(()=>[a.value.isLoading?(o(),s(h,{key:0})):d("",!0),!a.value.isLoading&&N(f)("show-bookkeeping-marketing")?(o(),v("div",F,[u("div",O,[i(k,{value:"Фільтр по даті"}),i(D,{modelValue:t.value.date,"onUpdate:modelValue":[l[0]||(l[0]=n=>t.value.date=n),c]},null,8,["modelValue"])]),a.value.chart?(o(),s($,{key:0,"chart-data":a.value.chart},null,8,["chart-data"])):d("",!0),u("div",U,[(o(!0),v(S,null,E(a.value.data.generalStat,(n,L)=>(o(),s(V,{class:"text-center",title:L,description:e.$filters.formatMoney(n)},null,8,["title","description"]))),256))]),i(P,{data:a.value.data.result.data},null,8,["data"]),u("div",j,[i(x,{pagination:a.value.data.result,"click-handler":c,modelValue:t.value.currentPage,"onUpdate:modelValue":l[1]||(l[1]=n=>t.value.currentPage=n)},null,8,["pagination","modelValue"])])])):d("",!0)]),_:1})}}};export{W as default};

import L from"./Modal.f2f0b874.js";import w from"./Table.806a6c81.js";import{v as B,A as E,G as P,B as D,V as u,S as v,X as r,R as i,$ as f,P as p,L as $,M as g,K as h,bc as F,Y as N,x as _}from"./moment.e1708d83.js";import"./Form.00e6e2d0.js";const S=N(" \u0417\u0430\u044F\u0432\u043A\u0438 \u043D\u0430 \u0437\u0432\u043E\u0440\u043E\u0442\u043D\u0456\u0439 \u0437\u0432\u02BC\u044F\u0437\u043E\u043A "),O={key:1},j={class:"grid grid-cols-1 gap-4"},U={class:"text-center"},T={__name:"Index",props:["statuses"],setup(d){const o=_("$swal"),s=_("$can");B({name:null,phone:null,comment:null,status:null});const e=E({data:[],currentPage:1,isLoading:!0,isActiveModal:!1,modalAction:"",item:{}});P(()=>{l(1)});const k=D(()=>e.value.isActiveModal?L:null);function l(t){e.value.isLoading=!0,t&&(e.value.currentPage=t),axios.get(route("api.callbacks.index",{page:e.value.currentPage})).then(a=>{Object.assign(e.value.data,a.data.result),e.value.isLoading=!1}).catch(a=>{console.log(a),e.value.isLoading=!1})}function m(t){s("destroy-callbacks")&&o({title:"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438?",icon:"warning",showCancelButton:!0}).then(a=>{a.isConfirmed&&axios.delete(route("api.callbacks.destroy",t)).then(()=>{l(),e.value.isActiveModal&&c(),o({icon:"success",title:"Destroyed!"})}).catch(n=>{console.log(n),o({icon:"error",title:"Error!"})})})}function c(){e.value.isActiveModal=!e.value.isActiveModal}function b(t,a){s("edit-callbacks")&&axios.get(route("api.callbacks.edit",t)).then(({data:n})=>{e.value.item=n.result,e.value.modalAction="edit",e.value.item.index=a,c()}).catch(n=>console.log(n))}function x(){s("edit-callbacks")&&axios.put(route("api.callbacks.update",e.value.item.id),e.value.item).then(()=>{c(),l(),o({title:"Success!",icon:"success"})}).catch(t=>{console.log(t),o({title:"Error!",icon:"error"})})}function y(){s("create-callbacks")&&axios.post(route("api.callbacks.create"),e.value.item).then(({data:t})=>{c(),e.value.item={},l(),o({title:"Success!",icon:"success"})}).catch(t=>{console.log(t),o({title:"Error!",icon:"error"})})}function A(){e.value.modalAction==="edit"&&s("edit-callbacks")?x():e.value.modalAction==="create"&&s("create-callbacks")&&y()}return(t,a)=>{const n=r("loader-component"),M=r("pagination"),C=r("auth-layout");return i(),u(C,{title:"\u0417\u0430\u044F\u0432\u043A\u0438 \u043D\u0430 \u0437\u0432\u043E\u0440\u043E\u0442\u043D\u0456\u0439 \u0437\u0432\u02BC\u044F\u0437\u043E\u043A"},{header:v(()=>[S]),default:v(()=>[e.value.isLoading?(i(),u(n,{key:0})):f("",!0),!e.value.isLoading&&p(s)("show-callbacks")?(i(),$("div",O,[g("div",j,[h(w,{data:e.value.data.data,statuses:d.statuses,onOnEdit:b,onOnDestroy:m},null,8,["data","statuses"]),g("div",U,[h(M,{pagination:e.value.data,"click-handler":l,modelValue:e.value.currentPage,"onUpdate:modelValue":a[0]||(a[0]=V=>e.value.currentPage=V)},null,8,["pagination","modelValue"])])]),(i(),u(F(p(k)),{item:e.value.item,onCloseModal:c,onSubmitForm:A,onDeclineForm:m,statuses:d.statuses},null,40,["item","statuses"]))])):f("",!0)]),_:1})}}};export{T as default};

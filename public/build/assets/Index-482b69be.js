import{L as _}from"./Loader-3f12bd2d.js";import{_ as f}from"./Label-646a10b8.js";import{_ as g}from"./Paginate-7604e12b.js";import h from"./Chart-d8491e4a.js";import x from"./Table-888cebf3.js";import k from"./Indicators-59b8df60.js";import L from"./StatisticLayout-1a38d1fa.js";import{s as V,e as $,_ as D}from"./Datepicker-47ab19ec.js";import{i as P,r as d,j as w,o as B,p as s,D as u,x as m,A as N,C as c,t as y,q as C,v as p,l as o}from"./app-6d1ec759.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Table-d4015883.js";import"./Card-36606ffb.js";import"./AuthenticatedLayout-53775af0.js";import"./index.esm-09a1b1ab.js";import"./Logo-7b0b10d2.js";import"./vue-i18n.esm-bundler-39f45a4f.js";import"./SidebarItem-9941fa54.js";import"./vue-datepicker-609e4dad.js";const M={key:1,class:"grid grid-cols-1 gap-4"},b={class:"block"},j={class:"text-center"},Z={__name:"Index",setup(O){const v=P("$can"),e=d({orders:[],chart:null,indicators:null,isLoading:!0}),t=d({date:[],currentPage:1});d([]);const l=w(()=>{const a={};return t.value.date.length===2&&(a.date_start=t.value.date[0].toLocaleDateString(),a.date_end=t.value.date[1].toLocaleDateString()),a.page=t.value.currentPage,a});B(()=>{t.value.date[0]=V(new Date),t.value.date[1]=$(new Date),i()});function i(){e.value.isLoading=!0,axios.get(route("api.statistics.orders.index",l.value)).then(({data:a})=>{e.value.orders=a,e.value.isLoading=!1}).catch(a=>{console.log(a),e.value.isLoading=!1}),axios.get(route("api.statistics.orders.chart",l.value)).then(({data:a})=>e.value.chart=a.result).catch(a=>console.log(a)),axios.get(route("api.statistics.orders.indicators",l.value)).then(({data:a})=>e.value.indicators=a.result).catch(a=>console.log(a))}return(a,r)=>(s(),u(L,{title:"Статистика заявок"},{header:m(()=>[N(" Статистика заявок ")]),default:m(()=>[e.value.isLoading?(s(),u(_,{key:0})):c("",!0),!e.value.isLoading&&y(v)("show-bookkeeping-orders")?(s(),C("div",M,[p("div",b,[o(f,{value:"Фільтр по даті"}),o(D,{modelValue:t.value.date,"onUpdate:modelValue":[r[0]||(r[0]=n=>t.value.date=n),i]},null,8,["modelValue"])]),e.value.chart?(s(),u(h,{key:0,"chart-data":e.value.chart},null,8,["chart-data"])):c("",!0),o(k,{data:e.value.indicators},null,8,["data"]),o(x,{data:e.value.orders.result.data},null,8,["data"]),p("div",j,[o(g,{pagination:e.value.orders.result,"click-handler":i,modelValue:t.value.currentPage,"onUpdate:modelValue":r[1]||(r[1]=n=>t.value.currentPage=n)},null,8,["pagination","modelValue"])])])):c("",!0)]),_:1}))}};export{Z as default};

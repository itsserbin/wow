{"version":3,"file":"focustrap.esm-94bc3b5f.js","sources":["../../../node_modules/primevue/focustrap/focustrap.esm.js"],"sourcesContent":["import { DomHandler, ObjectUtils } from 'primevue/utils';\n\nfunction bind(el, binding) {\n    const { onFocusIn, onFocusOut } = binding.value || {};\n\n    el.$_pfocustrap_mutationobserver = new MutationObserver((mutationList) => {\n        mutationList.forEach((mutation) => {\n            if (mutation.type === 'childList' && !el.contains(document.activeElement)) {\n                const findNextFocusableElement = (el) => {\n                    const focusableElement = DomHandler.isFocusableElement(el) ? el : DomHandler.getFirstFocusableElement(el);\n\n                    return ObjectUtils.isNotEmpty(focusableElement) ? focusableElement : findNextFocusableElement(el.nextSibling);\n                };\n\n                DomHandler.focus(findNextFocusableElement(mutation.nextSibling));\n            }\n        });\n    });\n\n    el.$_pfocustrap_mutationobserver.disconnect();\n    el.$_pfocustrap_mutationobserver.observe(el, {\n        childList: true\n    });\n\n    el.$_pfocustrap_focusinlistener = (event) => onFocusIn && onFocusIn(event);\n    el.$_pfocustrap_focusoutlistener = (event) => onFocusOut && onFocusOut(event);\n\n    el.addEventListener('focusin', el.$_pfocustrap_focusinlistener);\n    el.addEventListener('focusout', el.$_pfocustrap_focusoutlistener);\n}\n\nfunction unbind(el) {\n    el.$_pfocustrap_mutationobserver && el.$_pfocustrap_mutationobserver.disconnect();\n    el.$_pfocustrap_focusinlistener && el.removeEventListener('focusin', el.$_pfocustrap_focusinlistener) && (el.$_pfocustrap_focusinlistener = null);\n    el.$_pfocustrap_focusoutlistener && el.removeEventListener('focusout', el.$_pfocustrap_focusoutlistener) && (el.$_pfocustrap_focusoutlistener = null);\n}\n\nfunction autoFocus(el, binding) {\n    const { autoFocusSelector = '', firstFocusableSelector = '', autoFocus = false } = binding.value || {};\n    let focusableElement = DomHandler.getFirstFocusableElement(el, `[autofocus]:not(.p-hidden-focusable)${autoFocusSelector}`);\n\n    autoFocus && !focusableElement && (focusableElement = DomHandler.getFirstFocusableElement(el, `:not(.p-hidden-focusable)${firstFocusableSelector}`));\n    DomHandler.focus(focusableElement);\n}\n\nfunction onFirstHiddenElementFocus(event) {\n    const { currentTarget, relatedTarget } = event;\n    const focusableElement =\n        relatedTarget === currentTarget.$_pfocustrap_lasthiddenfocusableelement\n            ? DomHandler.getFirstFocusableElement(currentTarget.parentElement, `:not(.p-hidden-focusable)${currentTarget.$_pfocustrap_focusableselector}`)\n            : currentTarget.$_pfocustrap_lasthiddenfocusableelement;\n\n    DomHandler.focus(focusableElement);\n}\n\nfunction onLastHiddenElementFocus(event) {\n    const { currentTarget, relatedTarget } = event;\n    const focusableElement =\n        relatedTarget === currentTarget.$_pfocustrap_firsthiddenfocusableelement\n            ? DomHandler.getLastFocusableElement(currentTarget.parentElement, `:not(.p-hidden-focusable)${currentTarget.$_pfocustrap_focusableselector}`)\n            : currentTarget.$_pfocustrap_firsthiddenfocusableelement;\n\n    DomHandler.focus(focusableElement);\n}\n\nfunction createHiddenFocusableElements(el, binding) {\n    const { tabIndex = 0, firstFocusableSelector = '', lastFocusableSelector = '' } = binding.value || {};\n\n    const createFocusableElement = (onFocus) => {\n        const element = document.createElement('span');\n\n        element.classList = 'p-hidden-accessible p-hidden-focusable';\n        element.tabIndex = tabIndex;\n        element.setAttribute('aria-hidden', 'true');\n        element.setAttribute('role', 'presentation');\n        element.addEventListener('focus', onFocus);\n\n        return element;\n    };\n\n    const firstFocusableElement = createFocusableElement(onFirstHiddenElementFocus);\n    const lastFocusableElement = createFocusableElement(onLastHiddenElementFocus);\n\n    firstFocusableElement.$_pfocustrap_lasthiddenfocusableelement = lastFocusableElement;\n    firstFocusableElement.$_pfocustrap_focusableselector = firstFocusableSelector;\n\n    lastFocusableElement.$_pfocustrap_firsthiddenfocusableelement = firstFocusableElement;\n    lastFocusableElement.$_pfocustrap_focusableselector = lastFocusableSelector;\n\n    el.prepend(firstFocusableElement);\n    el.append(lastFocusableElement);\n}\n\nconst FocusTrap = {\n    mounted(el, binding) {\n        const { disabled } = binding.value || {};\n\n        if (!disabled) {\n            createHiddenFocusableElements(el, binding);\n            bind(el, binding);\n            autoFocus(el, binding);\n        }\n    },\n    updated(el, binding) {\n        const { disabled } = binding.value || {};\n\n        disabled && unbind(el);\n    },\n    unmounted(el) {\n        unbind(el);\n    }\n};\n\nexport { FocusTrap as default };\n"],"names":["bind","el","binding","onFocusIn","onFocusOut","mutationList","mutation","findNextFocusableElement","focusableElement","DomHandler","ObjectUtils","event","unbind","autoFocus","autoFocusSelector","firstFocusableSelector","onFirstHiddenElementFocus","currentTarget","relatedTarget","onLastHiddenElementFocus","createHiddenFocusableElements","tabIndex","lastFocusableSelector","createFocusableElement","onFocus","element","firstFocusableElement","lastFocusableElement","FocusTrap","disabled"],"mappings":"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","x_google_ignoreList":[0]}
import{y as M,C,z as x,a0 as p,X as d,V as v,S as s,K as c,ac as U,M as i,L as u,Z as w,a3 as F,aa as I,F as S,_ as V,bg as $,P as L,Y as f}from"./___vite-browser-external_commonjs-proxy.af1999bf.js";import{h as A,i as P}from"./app.addb6bdc.js";import{_ as B}from"./UploadImagesModal.fc374e34.js";const D=f("Select images"),N=f(" Add "),z={class:"grid grid-cols-2 md:grid-cols-5 mt-3"},j={class:"block m-1"},E=["value","id"],T=["for"],K={class:"block"},X={key:0,class:"row flex justify-center my-5"},H={__name:"ImagesSelectModal",emits:["submitForm","closeModal","clickImage","destroyImage"],setup(Y,{emit:_}){const e=M({images:{},pagination:{},imagesSelected:[],imageUploadModal:[],isLoading:!1,isActiveUploadModal:!1,currentPage:1});C(()=>r());const b=x(()=>e.value.isActiveUploadModal?B:null);async function r(t){e.value.isLoading=!0,t&&(e.value.currentPage=t),await axios.get(route("api.images.index",{page:e.value.currentPage})).then(a=>{e.value.images=a.data.result,e.value.isLoading=!1}).catch(a=>{console.log(a),e.value.isLoading=!1})}function h(){_("submitForm",e.value.imagesSelected)}function m(){e.value.isActiveUploadModal=!e.value.isActiveUploadModal}function k(t){Array.from(t).forEach(function(a){let n=new FormData;n.append("image",a),axios.post(route("api.images.upload"),n,{headers:{"Content-Type":"multipart/form-data"}}).then(({data:l})=>{e.value.imageUploadModal.push({src:l.result}),r()}).catch(l=>console.log(l))})}function y(){e.value.imageUploadModal=[]}return(t,a)=>{const n=v("button-component"),l=v("pagination");return s(),p(A,{onCloseModal:a[2]||(a[2]=o=>t.$emit("closeModal")),"submit-button-text":"Save","cancel-button-text":"Cancel",onSubmitForm:h,onClickCancel:a[3]||(a[3]=o=>t.$emit("closeModal")),size:"large"},{title:d(()=>[D]),content:d(()=>[c(n,{type:"btn",onClick:U(m,["prevent"])},{default:d(()=>[N]),_:1},8,["onClick"]),i("div",z,[(s(!0),u(S,null,w(e.value.images.data,o=>(s(),u("div",j,[F(i("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=g=>e.value.imagesSelected=g),value:o,id:o.id,class:"hidden peer"},null,8,E),[[I,e.value.imagesSelected]]),i("label",{for:o.id,class:"inline-flex justify-between items-center p-5 w-full text-gray-500 bg-white rounded-lg border-2 border-gray-200 cursor-pointer dark:hover:text-gray-300 dark:border-gray-700 peer-checked:border-blue-600 hover:text-gray-600 dark:peer-checked:text-gray-300 peer-checked:text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700"},[i("div",K,[c(P,{class:"m-1",image:t.route("images.350",o.src),alt:o.alt,onClick:g=>t.$emit("clickImage",o)},null,8,["image","alt","onClick"])])],8,T)]))),256))]),e.value.images?(s(),u("div",X,[c(l,{"click-handler":r,pagination:e.value.images,modelValue:e.value.currentPage,"onUpdate:modelValue":a[1]||(a[1]=o=>e.value.currentPage=o)},null,8,["pagination","modelValue"])])):V("",!0),(s(),p($(L(b)),{onCloseModal:m,onUploadImages:k,onLoadMoreImages:y,images:e.value.imageUploadModal,size:"large"},null,40,["images"]))]),_:1})}}};export{H as default};

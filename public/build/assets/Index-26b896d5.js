import v from"./StatisticLayout-1a38d1fa.js";import n from"./Chart-d8491e4a.js";import{s as k,e as f,_ as x}from"./Datepicker-47ab19ec.js";import{r as _,i as y,o as D,j as w,p as s,D as l,x as m,A as V,v as e,l as b,t as d,q as u,C as r}from"./app-6d1ec759.js";import"./AuthenticatedLayout-53775af0.js";import"./index.esm-09a1b1ab.js";import"./Logo-7b0b10d2.js";import"./vue-i18n.esm-bundler-39f45a4f.js";import"./SidebarItem-9941fa54.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./vue-datepicker-609e4dad.js";const B={class:"grid grid-cols-1 gap-4"},N={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$={key:0,class:"block"},C=e("div",{class:"text-lg text-gray-800 leading-tight dark:text-gray-300"},"Витрати",-1),L=e("hr",{class:"my-1"},null,-1),M={key:1,class:"div"},j=e("div",{class:"text-lg text-gray-800 leading-tight dark:text-gray-300"},"Прибуток",-1),O=e("hr",{class:"my-1"},null,-1),S={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},q={key:0,class:"div"},A=e("div",{class:"text-lg text-gray-800 leading-tight dark:text-gray-300"},"Заявки",-1),E=e("hr",{class:"my-1"},null,-1),I={key:1,class:"div"},P=e("div",{class:"text-lg text-gray-800 leading-tight dark:text-gray-300"},"Маркетинг",-1),T=e("hr",{class:"my-1"},null,-1),Z={__name:"Index",setup(U){const o=_({date:[],page:1}),i=y("$can"),a=_({costs:null,profits:null,orders:null,marketing:null});D(async()=>{o.value.date[0]=k(new Date),o.value.date[1]=f(new Date),await g()});const c=w(()=>{const t={};return o.value.date.length===2&&(t.date_start=o.value.date[0].toLocaleDateString(),t.date_end=o.value.date[1].toLocaleDateString()),t.page=o.value.page,t}),g=async()=>{a.value.isLoading=!0,await axios.get(route("api.statistics.costs.chart",c.value)).then(({data:t})=>a.value.costs=t.result).catch(t=>console.log(t)),await axios.get(route("api.statistics.profits.chart",c.value)).then(({data:t})=>a.value.profits=t.result).catch(t=>console.log(t)),await axios.get(route("api.statistics.orders.chart",c.value)).then(({data:t})=>a.value.orders=t.result).catch(t=>console.log(t)),await axios.get(route("api.statistics.marketing.chart",c.value)).then(({data:t})=>a.value.marketing=t.result).catch(t=>console.log(t))};return(t,h)=>(s(),l(v,{title:"Статистика"},{header:m(()=>[V(" Статистика ")]),default:m(()=>[e("div",B,[b(x,{modelValue:o.value.date,"onUpdate:modelValue":[h[0]||(h[0]=p=>o.value.date=p),g]},null,8,["modelValue"]),e("div",N,[d(i)("show-bookkeeping-costs")?(s(),u("div",$,[C,L,a.value.costs?(s(),l(n,{key:0,chartData:a.value.costs},null,8,["chartData"])):r("",!0)])):r("",!0),d(i)("show-bookkeeping-profits")?(s(),u("div",M,[j,O,a.value.profits?(s(),l(n,{key:0,chartData:a.value.profits},null,8,["chartData"])):r("",!0)])):r("",!0)]),e("div",S,[d(i)("show-bookkeeping-orders")?(s(),u("div",q,[A,E,a.value.orders?(s(),l(n,{key:0,chartData:a.value.orders},null,8,["chartData"])):r("",!0)])):r("",!0),d(i)("show-bookkeeping-marketing")?(s(),u("div",I,[P,T,a.value.marketing?(s(),l(n,{key:0,chartData:a.value.marketing},null,8,["chartData"])):r("",!0)])):r("",!0)])])]),_:1}))}};export{Z as default};

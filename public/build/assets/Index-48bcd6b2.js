import{L as f}from"./Loader-ccf6e4ba.js";import{_}from"./Label-20131f4c.js";import{_ as g}from"./Paginate-01527c78.js";import h from"./Chart-8529e800.js";import k from"./Table-d154ed85.js";import x from"./Indicators-46c0f27c.js";import L from"./StatisticLayout-af991e7b.js";import V from"./Datepicker-1dfd351e.js";import{s as $,e as w}from"./index-7a810988.js";import{N,k as d,z as P,o as y,l as s,s as u,y as m,w as B,t as c,x as D,m as M,p,n as o}from"./index-a01126e2.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./chart-10c086bf.js";import"./Table-fe1ca8dd.js";import"./Card-d700085f.js";import"./AuthenticatedLayout-704e8f94.js";import"./index.esm-02fff71f.js";import"./Logo-83ffc10f.js";import"./SidebarItem-446a46b0.js";import"./isDark-c828c264.js";import"./vue-datepicker-3bdc29fb.js";import"./index-2cbe9ca3.js";const b={key:1,class:"grid grid-cols-1 gap-4"},C={class:"block"},O={class:"text-center"},ta={__name:"Index",setup(S){const v=N("$can"),e=d({orders:[],chart:null,indicators:null,isLoading:!0}),t=d({date:[],currentPage:1});d([]);const i=P(()=>{const a={};return t.value.date.length===2&&(a.date_start=t.value.date[0].toLocaleDateString(),a.date_end=t.value.date[1].toLocaleDateString()),a.page=t.value.currentPage,a});y(()=>{t.value.date[0]=$(new Date),t.value.date[1]=w(new Date),l()});function l(){e.value.isLoading=!0,axios.get(route("api.statistics.orders.index",i.value)).then(({data:a})=>{e.value.orders=a,e.value.isLoading=!1}).catch(a=>{console.log(a),e.value.isLoading=!1}),axios.get(route("api.statistics.orders.chart",i.value)).then(({data:a})=>e.value.chart=a.result).catch(a=>console.log(a)),axios.get(route("api.statistics.orders.indicators",i.value)).then(({data:a})=>e.value.indicators=a.result).catch(a=>console.log(a))}return(a,r)=>(s(),u(L,{title:"Статистика заявок"},{header:m(()=>[B(" Статистика заявок ")]),default:m(()=>[e.value.isLoading?(s(),u(f,{key:0})):c("",!0),!e.value.isLoading&&D(v)("show-bookkeeping-orders")?(s(),M("div",b,[p("div",C,[o(_,{value:"Фільтр по даті"}),o(V,{modelValue:t.value.date,"onUpdate:modelValue":[r[0]||(r[0]=n=>t.value.date=n),l]},null,8,["modelValue"])]),e.value.chart?(s(),u(h,{key:0,"chart-data":e.value.chart},null,8,["chart-data"])):c("",!0),o(x,{data:e.value.indicators},null,8,["data"]),o(k,{data:e.value.orders.result.data},null,8,["data"]),p("div",O,[o(g,{pagination:e.value.orders.result,"click-handler":l,modelValue:t.value.currentPage,"onUpdate:modelValue":r[1]||(r[1]=n=>t.value.currentPage=n)},null,8,["pagination","modelValue"])])])):c("",!0)]),_:1}))}};export{ta as default};

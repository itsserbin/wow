import{_ as v}from"./Paginate-b71b7269.js";import{_ as h}from"./Card-ec829b36.js";import{_ as k}from"./Label-fa7af1d1.js";import{L}from"./Loader-8bf33617.js";import x from"./Chart-e63c68a7.js";import V from"./StatisticLayout-99ba8621.js";import{s as $,e as D,_ as P}from"./Datepicker-5f10a97a.js";import w from"./Table-910e6af6.js";import{i as y,r as m,j as B,o as M,p as o,D as l,x as p,A as N,C as d,t as C,q as g,v as u,l as n,F as S,K as b}from"./app-f55448cf.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./AuthenticatedLayout-ecf8db9d.js";import"./index.esm-f21e1dfa.js";import"./Logo-edac3a30.js";import"./vue-i18n.esm-bundler-d070be13.js";import"./SidebarItem-eda03439.js";import"./vue-datepicker-3843f364.js";import"./Table-6800669f.js";const j={key:1,class:"grid grid-cols-1 gap-4"},F={class:"block"},O={class:"grid grid-cols-2 md:grid-cols-4"},U={class:"text-center"},ta={__name:"Index",setup(q){const _=y("$can"),e=m({data:[],chart:null,isLoading:!0}),t=m({date:[],currentPage:1}),c=B(()=>{const a={};return t.value.date.length===2&&(a.date_start=t.value.date[0].toLocaleDateString(),a.date_end=t.value.date[1].toLocaleDateString()),a.page=t.value.currentPage,a});M(()=>{t.value.date[0]=$(new Date),t.value.date[1]=D(new Date),i()});function i(){e.value.isLoading=!0,axios.get(route("api.statistics.marketing.index",c.value)).then(({data:a})=>{e.value.data=a,e.value.isLoading=!1}).catch(a=>{console.log(a),e.value.isLoading=!1}),axios.get(route("api.statistics.marketing.chart",c.value)).then(({data:a})=>e.value.chart=a.result).catch(a=>console.log(a))}return(a,s)=>(o(),l(V,{title:"Маркетингова статистика"},{header:p(()=>[N(" Маркетингова статистика ")]),default:p(()=>[e.value.isLoading?(o(),l(L,{key:0})):d("",!0),!e.value.isLoading&&C(_)("show-bookkeeping-marketing")?(o(),g("div",j,[u("div",F,[n(k,{value:"Фільтр по даті"}),n(P,{modelValue:t.value.date,"onUpdate:modelValue":[s[0]||(s[0]=r=>t.value.date=r),i]},null,8,["modelValue"])]),e.value.chart?(o(),l(x,{key:0,"chart-data":e.value.chart},null,8,["chart-data"])):d("",!0),u("div",O,[(o(!0),g(S,null,b(e.value.data.generalStat,(r,f)=>(o(),l(h,{class:"text-center",title:f,description:a.$filters.formatMoney(r)},null,8,["title","description"]))),256))]),n(w,{data:e.value.data.result.data},null,8,["data"]),u("div",U,[n(v,{pagination:e.value.data.result,"click-handler":i,modelValue:t.value.currentPage,"onUpdate:modelValue":s[1]||(s[1]=r=>t.value.currentPage=r)},null,8,["pagination","modelValue"])])])):d("",!0)]),_:1}))}};export{ta as default};

import{y as F,z as v,C as P,a0 as i,X as d,B as f,V as u,S as t,_ as m,P as c,L as $,M as _,ad as B,K as M,bh as h,Y as L}from"./___vite-browser-external_commonjs-proxy.c41a93ce.js";import{_ as D}from"./UploadImagesModal.8c0f5090.js";import N from"./List.ab5db769.js";import j from"./Modal.2fc2072e.js";import"./app.84459353.js";import z from"./ContentLayout.395d7634.js";import"./Form.154678ad.js";const O=L("\u0417\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F"),S={key:1,class:"grid grid-cols-1 gap-4"},E=L(" \u0414\u043E\u0434\u0430\u0442\u0438 "),K={class:"text-center"},R={__name:"Index",setup(T){const r=f("$swal"),l=f("$can"),e=F({imagesList:[],isActiveUploadModal:!1,isActiveImageModal:!1,imageUploadModal:[],imageModal:{id:null,src:null,alt:null},currentPage:1,isLoading:!0}),y=v(()=>e.value.isActiveUploadModal?D:null),I=v(()=>e.value.isActiveImageModal?j:null);P(()=>n());function U(){n()}function g(){e.value.isActiveUploadModal=!e.value.isActiveUploadModal}function s(){e.value.isActiveImageModal=!e.value.isActiveImageModal}function k(a){s(),e.value.imageModal=a}function x(){l("edit-images")&&axios.put(route("api.images.update",e.value.imageModal.id),e.value.imageModal).then(()=>{s(),r({icon:"success",title:"Updated!"})}).catch(a=>console.log(a))}function C(a){p(a),s()}function p(a){l("destroy-images")&&(e.value.isLoading=!0,axios.delete(route("api.images.destroy",a)).then(()=>{n(),e.value.isLoading=!1,r({icon:"success",title:"Destroyed!"})}).catch(o=>{console.log(o),e.value.isLoading=!1}))}async function n(a){e.value.isLoading=!0,a&&(e.value.currentPage=a),await axios.get(route("api.images.index",{page:e.value.currentPage})).then(o=>{Object.assign(e.value.imagesList,o.data.result),e.value.isLoading=!1}).catch(o=>{console.log(o),e.value.isLoading=!1})}return(a,o)=>{const A=u("loader-component"),V=u("button-component"),b=u("pagination");return t(),i(z,{title:"\u0417\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F"},{header:d(()=>[O]),default:d(()=>[e.value.isLoading?(t(),i(A,{key:0})):m("",!0),!e.value.isLoading&&c(l)("show-images")?(t(),$("div",S,[_("div",null,[c(l)("create-images")?(t(),i(V,{key:0,type:"btn",onClick:B(g,["prevent"])},{default:d(()=>[E]),_:1},8,["onClick"])):m("",!0)]),M(N,{images:e.value.imagesList,onClickImage:k,onFetch:n,onDestroyImage:p},null,8,["images"]),_("div",K,[M(b,{pagination:e.value.imagesList,"click-handler":n,modelValue:e.value.currentPage,"onUpdate:modelValue":o[0]||(o[0]=w=>e.value.currentPage=w)},null,8,["pagination","modelValue"])])])):m("",!0),(t(),i(h(c(I)),{onCloseModal:s,onSubmitForm:x,onDeclineForm:C,image:e.value.imageModal,size:"large"},null,40,["image"])),(t(),i(h(c(y)),{onCloseModal:g,onOnUpload:U},null,32))]),_:1})}}};export{R as default};

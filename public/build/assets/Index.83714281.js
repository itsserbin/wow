import N from"./Modal.15312eb2.js";import O from"./OptionsLayout.46107609.js";import{u as k,z as T,D as U,A as H,U as v,R as n,Q as m,W as g,K as I,O as y,J as _,L as f,M as p,Y as u,bb as X,v as h,V as r}from"./_plugin-vue_export-helper.80033396.js";import"./Form.4504f3a3.js";import"./Sidebar.3b7eddfa.js";import"./app.3d1b1164.js";const z=u(" XML "),J={key:1},K=u(" \u0414\u043E\u0434\u0430\u0442\u0438 "),Q=["onClick"],R=["innerHTML"],W=f("hr",{class:"my-1"},null,-1),Y=["onClick"],ne={__name:"Index",setup(q){const l=h("$swal"),i=h("$can"),x=k({products:[],title:null,description:null,category:null});h("$defaultLang");const e=T({data:[],currentPage:1,isLoading:!0,isActiveModal:!1,modalAction:"",item:{}});U(()=>{d(1)});const L=H(()=>e.value.isActiveModal?N:null),w=k([{label:"ID",key:"id"},{label:"\u041D\u0430\u0437\u0432\u0430",key:"title"},{label:"Slug",key:"slug"},{label:"\u041E\u043F\u0438\u0441",key:"description"},{label:"\u041E\u043D\u043E\u0432\u043B\u0435\u043D\u043E<hr class='my-1'>\u0421\u0442\u0432\u043E\u0440\u0435\u043D\u043E",key:"timestamps"},{label:"#",key:"actions"}]);function C(o){e.value.activeLang=o}function d(o){e.value.isLoading=!0,o&&(e.value.currentPage=o),axios.get(route("api.xmls.index",{page:e.value.currentPage})).then(a=>{Object.assign(e.value.data,a.data.result),e.value.isLoading=!1}).catch(a=>{console.log(a),e.value.isLoading=!1})}function b(o){i("destroy-xml")&&l({title:"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438?",icon:"warning",showCancelButton:!0}).then(a=>{a.isConfirmed&&axios.delete(route("api.xmls.destroy",o)).then(()=>{d(),e.value.isActiveModal&&s(),l({icon:"success",title:"Destroyed!"})}).catch(c=>{console.log(c),l({icon:"error",title:"Error!"})})})}function s(){e.value.isActiveModal=!e.value.isActiveModal}function M(o,a){i("edit-xml")&&axios.get(route("api.xmls.edit",o)).then(({data:c})=>{e.value.item=c.result,e.value.modalAction="edit",e.value.item.index=a,s()}).catch(c=>console.log(c))}function A(){i("edit-xml")&&axios.put(route("api.xmls.update",e.value.item.id),e.value.item).then(()=>{s(),d(),l({title:"Success!",icon:"success"})}).catch(o=>{console.log(o),l({title:"Error!",icon:"error"})})}function $(){i("create-xml")&&axios.post(route("api.xmls.create"),e.value.item).then(()=>{s(),e.value.item=x,d(),l({title:"Success!",icon:"success"})}).catch(o=>{console.log(o),l({title:"Error!",icon:"error"})})}function V(){e.value.modalAction==="edit"&&i("edit-xml")?A():e.value.modalAction==="create"&&i("create-xml")&&$()}function D(){i("create-xml")&&(Object.assign(e.value.item,x),e.value.modalAction="create",s())}return(o,a)=>{const c=r("loader-component"),S=r("button-component"),F=r("lang-tabs"),j=r("xcircle-component"),B=r("table-component"),E=r("paginate");return m(),v(O,{title:"XML"},{header:n(()=>[z]),default:n(()=>[e.value.isLoading?(m(),v(c,{key:0})):g("",!0),e.value.isLoading?g("",!0):(m(),I("div",J,[y(i)("create-xml")?(m(),v(S,{key:0,type:"btn",onClick:D},{default:n(()=>[K]),_:1})):g("",!0),_(F,{onClickLang:C}),_(B,{headings:w,isSlotMode:!0,rows:e.value.data.data},{id:n(({data:t})=>[f("a",{href:"javascript:",onClick:P=>M(t.row.id,t.i)},p(t.row.id),9,Q)]),icon:n(({data:t})=>[f("div",{innerHTML:t.row.icon},null,8,R)]),text:n(({data:t})=>[u(p(e.value.activeLang==="ua"?t.row.text.ua:e.value.activeLang==="ru"?t.row.text.ru:null),1)]),published:n(({data:t})=>[u(p(o.$filters.publishedStatus(t.row.published)),1)]),timestamps:n(({data:t})=>[u(p(o.$filters.dateFormat(t.row.updated_at))+" ",1),W,u(" "+p(o.$filters.dateFormat(t.row.created_at)),1)]),actions:n(({data:t})=>[f("a",{href:"javascript:",onClick:P=>b(t.row.id)},[_(j)],8,Y)]),_:1},8,["headings","rows"]),_(E,{pagination:e.value.data,"click-handler":d,modelValue:e.value.currentPage,"onUpdate:modelValue":a[0]||(a[0]=t=>e.value.currentPage=t)},null,8,["pagination","modelValue"]),(m(),v(X(y(L)),{item:e.value.item,onCloseModal:s,onSubmitForm:V,onDeclineForm:b},null,40,["item"]))]))]),_:1})}}};export{ne as default};
